{
  "version": 3,
  "sources": ["../../@fast-crud/src/use/default-crud-options.ts", "../../@fast-crud/src/utils/util.log.ts", "../../@fast-crud/src/utils/util.string.ts", "../../@fast-crud/src/utils/util.trace.ts", "../../@fast-crud/src/utils/util.vite.ts", "../../@fast-crud/src/utils/util.store.ts", "../../@fast-crud/src/utils/deepdash/private/getPathToString.ts", "../../@fast-crud/src/utils/deepdash/private/getIterate.ts", "../../@fast-crud/src/utils/deepdash/get-each-deep.ts", "../../@fast-crud/src/utils/deepdash/index.ts", "../../@fast-crud/src/utils/util.dash.ts", "../../@fast-crud/src/utils/index.ts", "../../@fast-crud/src/types/list/assist.ts", "../../@fast-crud/src/types/list/button.ts", "../../@fast-crud/src/types/list/cascader.ts", "../../@fast-crud/src/locale/lang/zh-cn.ts", "../../@fast-crud/src/locale/lang/en.ts", "../../@fast-crud/src/locale/index.ts", "../../node_modules/.pnpm/dayjs@1.11.9/node_modules/dayjs/plugin/advancedFormat.js", "../../@fast-crud/src/types/functions.ts", "../../node_modules/.pnpm/dayjs@1.11.9/node_modules/dayjs/plugin/weekOfYear.js", "../../node_modules/.pnpm/dayjs@1.11.9/node_modules/dayjs/plugin/weekday.js", "../../node_modules/.pnpm/dayjs@1.11.9/node_modules/dayjs/plugin/localeData.js", "../../@fast-crud/src/types/list/date.ts", "../../@fast-crud/src/types/list/el.ts", "../../@fast-crud/src/types/list/number.ts", "../../@fast-crud/src/types/list/phone.ts", "../../@fast-crud/src/types/list/select.ts", "../../@fast-crud/src/types/list/text.ts", "../../@fast-crud/src/types/list/tree.ts", "../../@fast-crud/src/types/index.ts", "../../@fast-crud/fast-crud/src/components/container/fs-page.vue", "../../@fast-crud/fast-crud/src/components/container/fs-page.vue", "../../@fast-crud/src/use/use-merge.ts", "../../@fast-crud/src/use/use-compute.ts", "../../@fast-crud/src/utils/util.constants.ts", "../../@fast-crud/src/use/use-columns.tsx", "../../@fast-crud/src/use/use-form.ts", "../../@fast-crud/src/use/use-expose.ts", "../../@fast-crud/src/lib/fs-export/index.ts", "../../@fast-crud/src/use/use-plugins.ts", "../../@fast-crud/src/use/use-crud.ts", "../../@fast-crud/src/use/use-dict.ts", "../../node_modules/.pnpm/lru-cache@10.0.0/node_modules/lru-cache/dist/mjs/index.js", "../../@fast-crud/src/use/use-dict-define.ts", "../../@fast-crud/src/use/use-types.ts", "../../@fast-crud/src/use/use-drag.ts", "../../@fast-crud/src/use/config.ts", "../../@fast-crud/fast-crud/src/components/container/fs-container.vue", "../../@fast-crud/fast-crud/src/components/container/fs-container.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-default.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-default.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-card.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-card.vue", "../../@fast-crud/src/components/basic/fs-button.tsx", "../../@fast-crud/src/components/basic/fs-icon.tsx", "../../@fast-crud/fast-crud/src/components/basic/fs-iconify.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-iconify.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-icon-svg.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-icon-svg.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-label.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-label.vue", "../../@fast-crud/src/components/basic/fs-loading.tsx", "../../@fast-crud/fast-crud/src/components/basic/fs-box.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-box.vue", "../../@fast-crud/src/components/render/fs-component-render.tsx", "../../@fast-crud/src/components/render/fs-slot-render.tsx", "../../@fast-crud/src/components/render/fs-render.tsx", "../../@fast-crud/fast-crud/src/components/crud/fs-form.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-item.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-item.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-helper.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-helper.vue", "../../@fast-crud/src/components/crud/fs-form-wrapper.tsx", "../../@fast-crud/fast-crud/src/components/crud/fs-form-provider.vue", "../../@fast-crud/fast-crud/src/components/fs-crud.vue", "../../@fast-crud/fast-crud/src/components/fs-crud.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-row-handle.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-row-handle.vue", "../../node_modules/.pnpm/async-validator@4.2.5/node_modules/async-validator/dist-web/index.js", "../../@fast-crud/src/components/crud/editable/validator.ts", "../../@fast-crud/src/components/crud/editable/use-editable.ts", "../../@fast-crud/src/components/crud/use/provider.ts", "../../@fast-crud/src/components/crud/fs-table.tsx", "../../@fast-crud/src/components/crud/fs-cell.tsx", "../../@fast-crud/src/components/crud/editable/fs-editable-cell.tsx", "../../@fast-crud/fast-crud/src/components/crud/editable/fs-editable.vue", "../../@fast-crud/fast-crud/src/components/actionbar/index.vue", "../../@fast-crud/fast-crud/src/components/actionbar/index.vue", "../../@fast-crud/src/d/expose.ts", "../../@fast-crud/src/d/columns-filter.ts", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/index.vue", "../../node_modules/.pnpm/sortablejs@1.14.0/node_modules/sortablejs/modular/sortable.esm.js", "../../node_modules/.pnpm/vuedraggable-es@4.1.1_vue@3.3.4/node_modules/vuedraggable-es/dist/index.es.js", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-table-columns-fixed-controller/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-table-columns-fixed-controller/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-columns-filter-layout-default.vue", "../../@fast-crud/fast-crud/src/components/search/buttons.vue", "../../@fast-crud/fast-crud/src/components/search/buttons.vue", "../../@fast-crud/fast-crud/src/components/search/index.vue", "../../@fast-crud/fast-crud/src/components/search/index.vue", "../../@fast-crud/fast-crud/src/components/search/search_v1.vue", "../../@fast-crud/fast-crud/src/components/search/search_v1.vue", "../../@fast-crud/fast-crud/src/components/search/layout-default.vue", "../../@fast-crud/fast-crud/src/components/search/layout-default.vue", "../../@fast-crud/fast-crud/src/components/search/tabs-filter.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-radio.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-radio.vue", "../../@fast-crud/src/components/extends/fs-dict-select.tsx", "../../@fast-crud/fast-crud/src/components/extends/fs-values-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-values-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-checkbox.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-checkbox.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-switch.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-date-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-tree.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-tree.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-table-select.vue", "../../@fast-crud/src/index.ts"],
  "sourcesContent": [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_advancedFormat=t()}(this,(function(){\"use strict\";return function(e,t){var r=t.prototype,n=r.format;r.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return n.bind(this)(e);var s=this.$utils(),a=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/\\[([^\\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return r.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"GGGG\":return t.isoWeekYear();case\"wo\":return r.ordinal(t.week(),\"W\");case\"w\":case\"ww\":return s.s(t.week(),\"w\"===e?1:2,\"0\");case\"W\":case\"WW\":return s.s(t.isoWeek(),\"W\"===e?1:2,\"0\");case\"k\":case\"kk\":return s.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);case\"x\":return t.$d.getTime();case\"z\":return\"[\"+t.offsetName()+\"]\";case\"zzz\":return\"[\"+t.offsetName(\"long\")+\"]\";default:return e}}));return n.bind(this)(a)}}}));", null, "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekOfYear=t()}(this,(function(){\"use strict\";var e=\"week\",t=\"year\";return function(i,n,r){var f=n.prototype;f.week=function(i){if(void 0===i&&(i=null),null!==i)return this.add(7*(i-this.week()),\"day\");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var f=r(this).startOf(t).add(1,t).date(n),s=r(this).endOf(e);if(f.isBefore(s))return 1}var a=r(this).startOf(t).date(n).startOf(e).subtract(1,\"millisecond\"),o=this.diff(a,e,!0);return o<0?r(this).startOf(\"week\").week():Math.ceil(o)},f.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}));", "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekday=t()}(this,(function(){\"use strict\";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,i=this.$W,n=(i<t?i+7:i)-t;return this.$utils().u(e)?n:this.subtract(n,\"day\").add(e,\"day\")}}}));", "!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(n=\"undefined\"!=typeof globalThis?globalThis:n||self).dayjs_plugin_localeData=e()}(this,(function(){\"use strict\";return function(n,e,t){var r=e.prototype,o=function(n){return n&&(n.indexOf?n:n.s)},u=function(n,e,t,r,u){var i=n.name?n:n.$locale(),a=o(i[e]),s=o(i[t]),f=a||s.map((function(n){return n.slice(0,r)}));if(!u)return f;var d=i.weekStart;return f.map((function(n,e){return f[(e+(d||0))%7]}))},i=function(){return t.Ls[t.locale()]},a=function(n,e){return n.formats[e]||function(n){return n.replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(n,e,t){return e||t.slice(1)}))}(n.formats[e.toUpperCase()])},s=function(){var n=this;return{months:function(e){return e?e.format(\"MMMM\"):u(n,\"months\")},monthsShort:function(e){return e?e.format(\"MMM\"):u(n,\"monthsShort\",\"months\",3)},firstDayOfWeek:function(){return n.$locale().weekStart||0},weekdays:function(e){return e?e.format(\"dddd\"):u(n,\"weekdays\")},weekdaysMin:function(e){return e?e.format(\"dd\"):u(n,\"weekdaysMin\",\"weekdays\",2)},weekdaysShort:function(e){return e?e.format(\"ddd\"):u(n,\"weekdaysShort\",\"weekdays\",3)},longDateFormat:function(e){return a(n.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return s.bind(this)()},t.localeData=function(){var n=i();return{firstDayOfWeek:function(){return n.weekStart||0},weekdays:function(){return t.weekdays()},weekdaysShort:function(){return t.weekdaysShort()},weekdaysMin:function(){return t.weekdaysMin()},months:function(){return t.months()},monthsShort:function(){return t.monthsShort()},longDateFormat:function(e){return a(n,e)},meridiem:n.meridiem,ordinal:n.ordinal}},t.months=function(){return u(i(),\"months\")},t.monthsShort=function(){return u(i(),\"monthsShort\",\"months\",3)},t.weekdays=function(n){return u(i(),\"weekdays\",null,null,n)},t.weekdaysShort=function(n){return u(i(),\"weekdaysShort\",\"weekdays\",3,n)},t.weekdaysMin=function(n){return u(i(),\"weekdaysMin\",\"weekdays\",2,n)}}}));", null, null, null, null, null, null, null, null, "<template>\n  <div ref=\"pageRef\" class=\"fs-page\">\n    <div v-if=\"$slots.header != null\" class=\"fs-page-header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <div class=\"fs-page-content\">\n      <slot></slot>\n    </div>\n    <div v-if=\"$slots.footer != null\" class=\"fs-page-footer\">\n      <slot name=\"footer\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { utils } from \"../../utils\";\nexport default defineComponent({\n  name: \"FsPage\",\n  setup() {\n    const pageRef: Ref = ref();\n    onMounted(() => {\n      const styles = window.getComputedStyle(pageRef.value.parentNode);\n      const positionValue = styles.getPropertyValue(\"position\");\n      if (positionValue !== \"relative\") {\n        utils.logger.warn(\n          \"fs-page父节点的position建议为relative,因为fs-page为相对定位（position:absolute），如果样式没有异常，你可以忽略此警告\"\n        );\n      }\n    });\n    return {\n      pageRef\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-page {\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n\n  .fs-page-header {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #ddd;\n    > .title {\n      flex: 1;\n      justify-self: flex-start;\n      padding: 18px;\n      font-size: 16px;\n      font-weight: bold;\n      color: #444;\n\n      .sub {\n        font-size: 12px;\n        color: gray;\n        margin-left: 20px;\n        font-weight: lighter;\n      }\n    }\n    > .more {\n      justify-self: flex-end;\n      margin-right: 18px;\n      font-size: 14px;\n      display: flex;\n    }\n  }\n  .fs-page-content {\n    flex: 1;\n    overflow: auto;\n  }\n}\n</style>\n", "<template>\n  <div ref=\"pageRef\" class=\"fs-page\">\n    <div v-if=\"$slots.header != null\" class=\"fs-page-header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <div class=\"fs-page-content\">\n      <slot></slot>\n    </div>\n    <div v-if=\"$slots.footer != null\" class=\"fs-page-footer\">\n      <slot name=\"footer\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { utils } from \"../../utils\";\nexport default defineComponent({\n  name: \"FsPage\",\n  setup() {\n    const pageRef: Ref = ref();\n    onMounted(() => {\n      const styles = window.getComputedStyle(pageRef.value.parentNode);\n      const positionValue = styles.getPropertyValue(\"position\");\n      if (positionValue !== \"relative\") {\n        utils.logger.warn(\n          \"fs-page父节点的position建议为relative,因为fs-page为相对定位（position:absolute），如果样式没有异常，你可以忽略此警告\"\n        );\n      }\n    });\n    return {\n      pageRef\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-page {\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n\n  .fs-page-header {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #ddd;\n    > .title {\n      flex: 1;\n      justify-self: flex-start;\n      padding: 18px;\n      font-size: 16px;\n      font-weight: bold;\n      color: #444;\n\n      .sub {\n        font-size: 12px;\n        color: gray;\n        margin-left: 20px;\n        font-weight: lighter;\n      }\n    }\n    > .more {\n      justify-self: flex-end;\n      margin-right: 18px;\n      font-size: 14px;\n      display: flex;\n    }\n  }\n  .fs-page-content {\n    flex: 1;\n    overflow: auto;\n  }\n}\n</style>\n", null, null, null, null, null, null, null, null, null, null, "/**\n * @module LRUCache\n */\nconst perf = typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n    ? performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ? process : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function'\n        ? PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n        ? Uint8Array\n        : max <= Math.pow(2, 16)\n            ? Uint16Array\n            : max <= Math.pow(2, 32)\n                ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER\n                    ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * All properties from the options object (with the exception of\n * {@link OptionsBase.max} and {@link OptionsBase.maxSize}) are added as\n * normal public members. (`max` and `maxBase` are read-only getters.)\n * Changing any of these will alter the defaults for subsequent method calls,\n * but is otherwise safe.\n */\nexport class LRUCache {\n    // properties coming in from the options of these, only max and maxSize\n    // really *need* to be protected. The rest can be modified, as they just\n    // set defaults for various methods.\n    #max;\n    #maxSize;\n    #dispose;\n    #disposeAfter;\n    #fetchMethod;\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, } = options;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (fetchMethod !== undefined &&\n            typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0\n                ? ttlResolution\n                : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the remaining TTL time for a given entry key\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        this.#setItemTTL = (index, ttl, start = perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            if (ttl !== 0 && this.ttlAutopurge) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.delete(this.#keyList[index]);\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (ttl === 0 || start === 0) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            return (ttls[index] !== 0 &&\n                starts[index] !== 0 &&\n                (cachedNow || getNow()) - starts[index] > ttls[index]);\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to Array.find().  fn is called as fn(value, key, cache).\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from\n     * most recently used to least recently used.  fn is called as\n     * fn(value, key, cache).  Does not update age or recenty of use.\n     * Does not iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.delete(this.#keyList[i]);\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to cache.load()\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     * Note that the shape of the resulting cache may be different if the\n     * same options are not used in both caches.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.delete(k);\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0\n                ? this.#tail\n                : this.#free.length !== 0\n                    ? this.#free.pop()\n                    : this.#size === this.#max\n                        ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal)\n                        ? oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined &&\n            (allowStale || !this.#isStale(index))) {\n            const v = this.#valList[index];\n            // either stale and allowed, or forcing a refresh of non-stale value\n            return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n        }\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            if (this.#valList[index] === p) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.delete(k);\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.delete(k);\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort ||\n                    options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.delete(k);\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                deleted = true;\n                if (this.#size === 1) {\n                    this.clear();\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, 'delete');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, 'delete']);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        this.#next[this.#prev[index]] = this.#next[index];\n                        this.#prev[this.#next[index]] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, 'delete');\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, 'delete']);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map", null, null, null, null, "<template>\n  <div class=\"fs-container\">\n    <div class=\"box\">\n      <div class=\"inner\" :style=\"computedInnerStyle\">\n        <div class=\"header\">\n          <!-- header -->\n          <slot name=\"header\"></slot>\n        </div>\n        <div class=\"body\" :style=\"computedBodyStyle\">\n          <!-- body, 高度自适应 -->\n          <slot></slot>\n        </div>\n        <div class=\"footer\">\n          <!-- footer -->\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    </div>\n    <slot name=\"box\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from \"vue\";\nimport { useMerge } from \"../../use\";\n/**\n * crud的容器，根据外部高度自适应\n */\nexport default defineComponent({\n  name: \"FsContainer\",\n  props: {\n    /**\n     * 是否固定高度\n     */\n    fixedHeight: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * body的样式\n     */\n    bodyStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * inner的样式\n     */\n    innerStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const computedInnerStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ position: \"relative\" }, props.innerStyle);\n      }\n      return props.innerStyle;\n    });\n\n    const computedBodyStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ flex: \"unset\" }, props.bodyStyle);\n      }\n      return props.bodyStyle;\n    });\n\n    return {\n      computedInnerStyle,\n      computedBodyStyle\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-container {\n  &.compact {\n    padding: 0;\n  }\n  padding: 0 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .box {\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    .inner {\n      position: absolute;\n      width: 100%;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      .header {\n        flex-shrink: 0;\n      }\n      .body {\n        flex: 1;\n        overflow-y: auto;\n      }\n      .footer {\n        flex-shrink: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-container\">\n    <div class=\"box\">\n      <div class=\"inner\" :style=\"computedInnerStyle\">\n        <div class=\"header\">\n          <!-- header -->\n          <slot name=\"header\"></slot>\n        </div>\n        <div class=\"body\" :style=\"computedBodyStyle\">\n          <!-- body, 高度自适应 -->\n          <slot></slot>\n        </div>\n        <div class=\"footer\">\n          <!-- footer -->\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    </div>\n    <slot name=\"box\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from \"vue\";\nimport { useMerge } from \"../../use\";\n/**\n * crud的容器，根据外部高度自适应\n */\nexport default defineComponent({\n  name: \"FsContainer\",\n  props: {\n    /**\n     * 是否固定高度\n     */\n    fixedHeight: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * body的样式\n     */\n    bodyStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * inner的样式\n     */\n    innerStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const computedInnerStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ position: \"relative\" }, props.innerStyle);\n      }\n      return props.innerStyle;\n    });\n\n    const computedBodyStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ flex: \"unset\" }, props.bodyStyle);\n      }\n      return props.bodyStyle;\n    });\n\n    return {\n      computedInnerStyle,\n      computedBodyStyle\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-container {\n  &.compact {\n    padding: 0;\n  }\n  padding: 0 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .box {\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    .inner {\n      position: absolute;\n      width: 100%;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      .header {\n        flex-shrink: 0;\n      }\n      .body {\n        flex: 1;\n        overflow-y: auto;\n      }\n      .footer {\n        flex-shrink: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-default\">\n    <template #header>\n      <div class=\"fs-crud-header\">\n        <div class=\"fs-header-top\">\n          <slot name=\"header-top\"></slot>\n        </div>\n        <slot name=\"search\"></slot>\n        <div class=\"fs-header-middle\">\n          <slot name=\"header-middle\"></slot>\n        </div>\n        <slot name=\"actionbar\"></slot>\n        <slot name=\"toolbar\"></slot>\n        <div class=\"fs-header-bottom\">\n          <slot name=\"header-bottom\"></slot>\n        </div>\n        <slot name=\"tabs\"></slot>\n      </div>\n    </template>\n\n    <!-- 默认插槽 -->\n    <slot></slot>\n    <!-- table -->\n    <slot name=\"table\"></slot>\n\n    <slot name=\"form\"> </slot>\n\n    <template #footer>\n      <div class=\"fs-crud-footer\">\n        <slot name=\"footer-top\"></slot>\n        <slot name=\"pagination\"></slot>\n        <slot name=\"footer-bottom\"></slot>\n      </div>\n    </template>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n/**\n * 默认布局\n */\nexport default defineComponent({\n  name: \"FsLayoutDefault\"\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-default {\n  .fs-tabs-filter {\n    margin-top: 10px;\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-default\">\n    <template #header>\n      <div class=\"fs-crud-header\">\n        <div class=\"fs-header-top\">\n          <slot name=\"header-top\"></slot>\n        </div>\n        <slot name=\"search\"></slot>\n        <div class=\"fs-header-middle\">\n          <slot name=\"header-middle\"></slot>\n        </div>\n        <slot name=\"actionbar\"></slot>\n        <slot name=\"toolbar\"></slot>\n        <div class=\"fs-header-bottom\">\n          <slot name=\"header-bottom\"></slot>\n        </div>\n        <slot name=\"tabs\"></slot>\n      </div>\n    </template>\n\n    <!-- 默认插槽 -->\n    <slot></slot>\n    <!-- table -->\n    <slot name=\"table\"></slot>\n\n    <slot name=\"form\"> </slot>\n\n    <template #footer>\n      <div class=\"fs-crud-footer\">\n        <slot name=\"footer-top\"></slot>\n        <slot name=\"pagination\"></slot>\n        <slot name=\"footer-bottom\"></slot>\n      </div>\n    </template>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n/**\n * 默认布局\n */\nexport default defineComponent({\n  name: \"FsLayoutDefault\"\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-default {\n  .fs-tabs-filter {\n    margin-top: 10px;\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-card\">\n    <template v-if=\"searchShow\" #header>\n      <div class=\"fs-header-top\">\n        <slot name=\"header-top\"></slot>\n      </div>\n      <component :is=\"cardComponentName\">\n        <slot name=\"search\"></slot>\n      </component>\n      <div class=\"fs-header-bottom\">\n        <slot name=\"header-bottom\"></slot>\n      </div>\n    </template>\n\n    <fs-container>\n      <template #header>\n        <slot name=\"tabs\"></slot>\n      </template>\n      <component :is=\"cardComponentName\" class=\"fs-layout-card-body\">\n        <template #title>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <template #header>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <fs-container>\n          <!-- 默认插槽 -->\n          <slot></slot>\n          <!-- table -->\n          <slot name=\"table\"></slot>\n          <slot name=\"form\"></slot>\n          <template #footer>\n            <div class=\"fs-crud-footer\">\n              <slot name=\"footer-top\"></slot>\n              <slot name=\"pagination\"></slot>\n              <slot name=\"footer-bottom\"></slot>\n            </div>\n          </template>\n        </fs-container>\n      </component>\n    </fs-container>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, ref } from \"vue\";\nimport { useUi } from \"../../use/use-ui\";\n/**\n * card布局\n */\nexport default defineComponent({\n  name: \"FsLayoutCard\",\n  setup() {\n    const getCrudBinding = inject(\"get:crudBinding\");\n    const searchShow = computed(() => {\n      if (getCrudBinding == null) {\n        return true;\n      }\n      // @ts-ignore\n      return getCrudBinding()?.search?.show;\n    });\n\n    const { ui } = useUi();\n\n    const cardComponentName = ref(ui.card.name);\n    return {\n      searchShow,\n      cardComponentName\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-card {\n  & > .box > .inner > .header {\n    margin: 10px 10px 5px 10px;\n  }\n  & > .box > .inner > .body {\n    margin: 5px 10px 10px 10px;\n  }\n  .top-bar {\n    display: flex;\n    justify-content: space-between;\n  }\n  .fs-container {\n    padding: 0;\n    .box {\n      .inner {\n        .header {\n          .ant-card-body {\n            padding: 14px;\n          }\n        }\n      }\n    }\n  }\n  .fs-layout-card-body {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .ant-card-head {\n      min-height: 0;\n      padding: 0px;\n      .ant-card-head-title {\n        padding: 0;\n      }\n    }\n\n    .el-card__header {\n      padding: 0;\n    }\n\n    .n-card-header {\n      padding: 0px;\n      border-bottom: 1px solid #eee;\n    }\n    .n-card__content {\n      padding: 10px;\n    }\n\n    .fs-crud-actionbar {\n      margin: 10px;\n    }\n    .fs-crud-toolbar {\n      margin: 10px;\n    }\n\n    .ant-card-body {\n      flex: 1;\n      padding: 10px;\n    }\n    .el-card__body {\n      flex: 1;\n      padding: 10px;\n    }\n  }\n\n  .fs-tabs-filter {\n    margin-bottom: -1px;\n    .n-tabs .n-tabs-nav.n-tabs-nav--card-type .n-tabs-tab {\n      &.n-tabs-tab--active {\n        background-color: #fff;\n      }\n      background-color: #ffffff60;\n    }\n\n    .el-tabs--card > .el-tabs__header .el-tabs__item {\n      &.is-active {\n        background-color: #fff;\n      }\n      background-color: #ffffff80;\n    }\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-card\">\n    <template v-if=\"searchShow\" #header>\n      <div class=\"fs-header-top\">\n        <slot name=\"header-top\"></slot>\n      </div>\n      <component :is=\"cardComponentName\">\n        <slot name=\"search\"></slot>\n      </component>\n      <div class=\"fs-header-bottom\">\n        <slot name=\"header-bottom\"></slot>\n      </div>\n    </template>\n\n    <fs-container>\n      <template #header>\n        <slot name=\"tabs\"></slot>\n      </template>\n      <component :is=\"cardComponentName\" class=\"fs-layout-card-body\">\n        <template #title>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <template #header>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <fs-container>\n          <!-- 默认插槽 -->\n          <slot></slot>\n          <!-- table -->\n          <slot name=\"table\"></slot>\n          <slot name=\"form\"></slot>\n          <template #footer>\n            <div class=\"fs-crud-footer\">\n              <slot name=\"footer-top\"></slot>\n              <slot name=\"pagination\"></slot>\n              <slot name=\"footer-bottom\"></slot>\n            </div>\n          </template>\n        </fs-container>\n      </component>\n    </fs-container>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, ref } from \"vue\";\nimport { useUi } from \"../../use/use-ui\";\n/**\n * card布局\n */\nexport default defineComponent({\n  name: \"FsLayoutCard\",\n  setup() {\n    const getCrudBinding = inject(\"get:crudBinding\");\n    const searchShow = computed(() => {\n      if (getCrudBinding == null) {\n        return true;\n      }\n      // @ts-ignore\n      return getCrudBinding()?.search?.show;\n    });\n\n    const { ui } = useUi();\n\n    const cardComponentName = ref(ui.card.name);\n    return {\n      searchShow,\n      cardComponentName\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-card {\n  & > .box > .inner > .header {\n    margin: 10px 10px 5px 10px;\n  }\n  & > .box > .inner > .body {\n    margin: 5px 10px 10px 10px;\n  }\n  .top-bar {\n    display: flex;\n    justify-content: space-between;\n  }\n  .fs-container {\n    padding: 0;\n    .box {\n      .inner {\n        .header {\n          .ant-card-body {\n            padding: 14px;\n          }\n        }\n      }\n    }\n  }\n  .fs-layout-card-body {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .ant-card-head {\n      min-height: 0;\n      padding: 0px;\n      .ant-card-head-title {\n        padding: 0;\n      }\n    }\n\n    .el-card__header {\n      padding: 0;\n    }\n\n    .n-card-header {\n      padding: 0px;\n      border-bottom: 1px solid #eee;\n    }\n    .n-card__content {\n      padding: 10px;\n    }\n\n    .fs-crud-actionbar {\n      margin: 10px;\n    }\n    .fs-crud-toolbar {\n      margin: 10px;\n    }\n\n    .ant-card-body {\n      flex: 1;\n      padding: 10px;\n    }\n    .el-card__body {\n      flex: 1;\n      padding: 10px;\n    }\n  }\n\n  .fs-tabs-filter {\n    margin-bottom: -1px;\n    .n-tabs .n-tabs-nav.n-tabs-nav--card-type .n-tabs-tab {\n      &.n-tabs-tab--active {\n        background-color: #fff;\n      }\n      background-color: #ffffff60;\n    }\n\n    .el-tabs--card > .el-tabs__header .el-tabs__item {\n      &.is-active {\n        background-color: #fff;\n      }\n      background-color: #ffffff80;\n    }\n  }\n}\n</style>\n", null, null, "<template>\n  <span ref=\"iconifyRef\" class=\"fs-iconify\" :class=\"{ 'fs-iconify-spin': spin }\"></span>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, nextTick, onMounted, ref, unref, watch } from \"vue\";\n\n/**\n * iconify 按需加载图标组件\n * https://iconify.design/icon-sets/ion/\n */\nexport default defineComponent({\n  name: \"FsIconify\",\n  props: {\n    /**\n     * 图标名称\n     */\n    icon: {\n      type: String\n    },\n    /**\n     * 旋转\n     */\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, ctx) {\n    const iconifyRef = ref(null);\n    const update = async () => {\n      if (!props.icon) return;\n\n      const el: any = unref(iconifyRef);\n      if (!el) return;\n\n      await nextTick();\n      const span: any = document.createElement(\"span\");\n      span.className = \"iconify\";\n      span.dataset.icon = props.icon;\n      el.textContent = \"\";\n      el.appendChild(span);\n    };\n\n    watch(() => props.icon, update, { flush: \"post\" });\n\n    onMounted(update);\n\n    return { iconifyRef };\n  }\n});\n</script>\n<style lang=\"less\">\nspan.fs-iconify {\n  display: inline-flex !important;\n  align-items: center;\n  &-spin {\n    svg {\n      animation: fsLoadingCircle 1s infinite linear;\n    }\n  }\n}\n\n@keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\nspan.iconify {\n  display: block;\n  min-width: 1em;\n  min-height: 1em;\n  // background-color: @iconify-bg-color;\n  border-radius: 100%;\n}\n</style>\n", "<template>\n  <span ref=\"iconifyRef\" class=\"fs-iconify\" :class=\"{ 'fs-iconify-spin': spin }\"></span>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, nextTick, onMounted, ref, unref, watch } from \"vue\";\n\n/**\n * iconify 按需加载图标组件\n * https://iconify.design/icon-sets/ion/\n */\nexport default defineComponent({\n  name: \"FsIconify\",\n  props: {\n    /**\n     * 图标名称\n     */\n    icon: {\n      type: String\n    },\n    /**\n     * 旋转\n     */\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, ctx) {\n    const iconifyRef = ref(null);\n    const update = async () => {\n      if (!props.icon) return;\n\n      const el: any = unref(iconifyRef);\n      if (!el) return;\n\n      await nextTick();\n      const span: any = document.createElement(\"span\");\n      span.className = \"iconify\";\n      span.dataset.icon = props.icon;\n      el.textContent = \"\";\n      el.appendChild(span);\n    };\n\n    watch(() => props.icon, update, { flush: \"post\" });\n\n    onMounted(update);\n\n    return { iconifyRef };\n  }\n});\n</script>\n<style lang=\"less\">\nspan.fs-iconify {\n  display: inline-flex !important;\n  align-items: center;\n  &-spin {\n    svg {\n      animation: fsLoadingCircle 1s infinite linear;\n    }\n  }\n}\n\n@keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\nspan.iconify {\n  display: block;\n  min-width: 1em;\n  min-height: 1em;\n  // background-color: @iconify-bg-color;\n  border-radius: 100%;\n}\n</style>\n", "<template>\n  <span :class=\"['fs-icon-svg', spin && 'fs-icon-spin']\">\n    <svg class=\"fs-icon-svg-content\" aria-hidden=\"true\">\n      <use :xlink:href=\"symbolId\"></use>\n    </svg>\n  </span>\n</template>\n<script lang=\"ts\">\nimport type { CSSProperties } from \"vue\";\nimport { defineComponent, computed } from \"vue\";\n\nexport default defineComponent({\n  name: \"FsSvgIcon\",\n  props: {\n    icon: {\n      type: String,\n      required: true\n    },\n    size: {\n      type: [Number, String],\n      default: 16\n    },\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const symbolId = computed(() => `#${props.icon}`);\n\n    const getStyle = computed((): CSSProperties => {\n      const { size } = props;\n      let s = `${size}`;\n      s = `${s.replace(\"px\", \"\")}px`;\n      return {\n        width: s,\n        height: s\n      };\n    });\n    return { symbolId, getStyle };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-icon-svg {\n  display: inline-block;\n  vertical-align: middle;\n  &.fs-icon-spin {\n    animation: loadingCircle 1s infinite linear;\n  }\n\n  .fs-icon-svg-content {\n    width: 1em;\n    height: 1em;\n    vertical-align: -0.15em;\n    fill: currentColor;\n    overflow: hidden;\n  }\n}\n</style>\n", "<template>\n  <span :class=\"['fs-icon-svg', spin && 'fs-icon-spin']\">\n    <svg class=\"fs-icon-svg-content\" aria-hidden=\"true\">\n      <use :xlink:href=\"symbolId\"></use>\n    </svg>\n  </span>\n</template>\n<script lang=\"ts\">\nimport type { CSSProperties } from \"vue\";\nimport { defineComponent, computed } from \"vue\";\n\nexport default defineComponent({\n  name: \"FsSvgIcon\",\n  props: {\n    icon: {\n      type: String,\n      required: true\n    },\n    size: {\n      type: [Number, String],\n      default: 16\n    },\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const symbolId = computed(() => `#${props.icon}`);\n\n    const getStyle = computed((): CSSProperties => {\n      const { size } = props;\n      let s = `${size}`;\n      s = `${s.replace(\"px\", \"\")}px`;\n      return {\n        width: s,\n        height: s\n      };\n    });\n    return { symbolId, getStyle };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-icon-svg {\n  display: inline-block;\n  vertical-align: middle;\n  &.fs-icon-spin {\n    animation: loadingCircle 1s infinite linear;\n  }\n\n  .fs-icon-svg-content {\n    width: 1em;\n    height: 1em;\n    vertical-align: -0.15em;\n    fill: currentColor;\n    overflow: hidden;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-label\">\n    <div class=\"label\" v-bind=\"labelAttrs\">\n      {{ label }}\n      <slot name=\"label\"></slot>\n    </div>\n    <div class=\"content\" v-bind=\"contentAttrs\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * label组件\n */\nexport default defineComponent({\n  name: \"FsLabel\",\n  props: {\n    label: {\n      type: String,\n      default: \"\"\n    },\n    labelAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    contentAttrs: {\n      type: Object,\n      default: () => ({})\n    }\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-label {\n  display: flex;\n  align-items: center;\n  .label {\n    display: flex;\n    text-align: right;\n    margin-right: 10px;\n    min-width: 100px;\n    justify-content: flex-end;\n  }\n  .content {\n    flex: 1;\n    display: flex;\n    min-width: 100px;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: left;\n    align-items: center;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-label\">\n    <div class=\"label\" v-bind=\"labelAttrs\">\n      {{ label }}\n      <slot name=\"label\"></slot>\n    </div>\n    <div class=\"content\" v-bind=\"contentAttrs\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * label组件\n */\nexport default defineComponent({\n  name: \"FsLabel\",\n  props: {\n    label: {\n      type: String,\n      default: \"\"\n    },\n    labelAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    contentAttrs: {\n      type: Object,\n      default: () => ({})\n    }\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-label {\n  display: flex;\n  align-items: center;\n  .label {\n    display: flex;\n    text-align: right;\n    margin-right: 10px;\n    min-width: 100px;\n    justify-content: flex-end;\n  }\n  .content {\n    flex: 1;\n    display: flex;\n    min-width: 100px;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: left;\n    align-items: center;\n  }\n}\n</style>\n", null, "<template>\n  <div class=\"fs-box\">\n    <slot></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 单纯的包裹一个子组件\n */\nexport default defineComponent({\n  name: \"FsBox\"\n});\n</script>\n", "<template>\n  <div class=\"fs-box\">\n    <slot></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 单纯的包裹一个子组件\n */\nexport default defineComponent({\n  name: \"FsBox\"\n});\n</script>\n", null, null, null, "<template>\n  <component\n    :is=\"ui.form.name\"\n    ref=\"formRef\"\n    class=\"fs-form\"\n    :class=\"{\n      'fs-form-grid': display === 'grid',\n      'fs-form-flex': display === 'flex',\n      'fs-form-invalid': validRef === false\n    }\"\n    :model=\"form\"\n  >\n    <!-- row -->\n    <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n      <!-- col -->\n      <template v-for=\"item in computedDefaultColumns\" :key=\"item?.key\">\n        <component :is=\"ui.col.name\" v-if=\"formItemShow(item)\" class=\"fs-col\" v-bind=\"item.col\">\n          <fs-form-item\n            v-if=\"item.blank !== true\"\n            :ref=\"\n              (el: any) => {\n                if (el) {\n                  formItemRefs[item.key] = el;\n                }\n              }\n            \"\n            :item=\"item\"\n            :helper=\"helper\"\n            :model-value=\"get(form, item.key)\"\n            :form-slot=\"slots['form_' + item.key]\"\n            :get-context-fn=\"getContextFn\"\n            @update:modelValue=\"set(form, item.key, $event)\"\n          />\n        </component>\n      </template>\n    </component>\n    <component\n      :is=\"computedGroup.wrapper.parent\"\n      v-if=\"computedGroup.wrapper\"\n      v-model:[ui.collapse.modelValue]=\"groupActiveKey\"\n      style=\"width: 100%\"\n      v-bind=\"computedGroup\"\n    >\n      <template v-for=\"(groupItem, groupKey) of computedGroup.groups\" :key=\"groupKey\">\n        <component\n          :is=\"computedGroup.wrapper.child\"\n          v-if=\"groupItemShow(groupItem)\"\n          :[ui.collapse.keyName]=\"groupKey\"\n          v-bind=\"groupItem\"\n          :class=\"{ 'fs-form-group-error': errorsRef['group.' + groupKey] }\"\n        >\n          <template v-for=\"(item, slotName) of groupItem.slots\" :key=\"slotName\" #[slotName]=\"scope\">\n            <fs-render :render-func=\"item\" :scope=\"{ ...scope, hasError: errorsRef['group.' + groupKey] }\" />\n          </template>\n          <!-- row -->\n          <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n            <!-- col -->\n            <template v-for=\"key in groupItem.columns\" :key=\"key\">\n              <component\n                :is=\"ui.col.name\"\n                v-if=\"formItemShow(computedColumns[key])\"\n                class=\"fs-col\"\n                v-bind=\"mergeCol(groupItem.col, computedColumns[key]?.col)\"\n              >\n                <fs-form-item\n                  v-if=\"computedColumns[key] && computedColumns[key]?.blank !== true\"\n                  :ref=\"\n                    (el: any) => {\n                      if (el) {\n                        formItemRefs[key] = el;\n                      }\n                    }\n                  \"\n                  :item=\"computedColumns[key]\"\n                  :model-value=\"get(form, key)\"\n                  :form-slot=\"slots['form_' + key]\"\n                  :get-context-fn=\"getContextFn\"\n                  @update:modelValue=\"set(form, key, $event)\"\n                />\n              </component>\n            </template>\n          </component>\n        </component>\n      </template>\n    </component>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  reactive,\n  Ref,\n  ref,\n  toRaw,\n  unref,\n  UnwrapNestedRefs,\n  watch\n} from \"vue\";\nimport _ from \"lodash-es\";\nimport { ComputeValue, useCompute } from \"../../use/use-compute\";\nimport logger from \"../../utils/util.log\";\nimport { useMerge } from \"../../use/use-merge\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { FormScopeContext, SetFormDataOptions, useUi, utils } from \"../../index\";\n\n/**\n * 配置化的表单组件\n * 暴露的方法：\n * ref.submit() = 提交表单\n * ref.reset() = 重置表单\n */\nexport default defineComponent({\n  name: \"FsForm\",\n  props: {\n    /**\n     * 初始表单数据\n     **/\n    initialForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 字段模版\n     * {\n     *   key:{\n     *     title: \"字段名称\",\n     *     component:{\n     *       name:\"组件名称\"\n     *       ...组件参数\n     *     }\n     *   }\n     * }\n     * */\n    columns: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 字段分组\n     * {\n     *   type:'xxx', //分组展示类型\n     *   groups:{ //分组数据\n     *     groupKey:{ title:'xxx',columns:['fieldKey','fieldKey']}\n     *   }\n     * }\n     */\n    group: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 重置表单后的操作\n     */\n    doReset: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮，表单校验前执行操作（async）\n     */\n    beforeValidate: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单校验完完成后，提交前处理（async）\n     */\n    beforeSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮时执行操作（async）\n     */\n    doSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单提交后处理（async）\n     */\n    afterSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 插槽内容\n     */\n    slots: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * 布局方式【flex|grid】\n     */\n    display: {\n      type: String,\n      default: \"flex\" // flex\n    },\n    /**\n     * 序号，编辑时会传入\n     */\n    index: {\n      type: Number,\n      default: undefined\n    },\n    /**\n     * 模式 [add,edit,view,自定义]\n     */\n    mode: {\n      type: String,\n      default: undefined\n    },\n    /**\n     * a-row配置\n     */\n    row: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * el-col|a-col配置，可配置跨列\n     */\n    col: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * formItem的公共配置\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * helper位置：{position:'label'}\n     */\n    helper: {\n      type: Object\n    },\n\n    watch: {\n      type: Function,\n      default: null\n    }\n  },\n  emits: [\"reset\", \"submit\", \"success\", \"validationError\", \"value-change\", \"init\"],\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const { ui } = useUi();\n    const { AsyncComputeValue, doComputed } = useCompute();\n    const formRef = ref();\n    const form: UnwrapNestedRefs<any> = reactive({});\n    const { proxy } = getCurrentInstance();\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"form.value配置不支持Compute/AsyncCompute类型的动态计算\");\n      }\n    });\n    function createInitialForm() {\n      const form = {};\n      // 初始数据赋值\n      _.each(props.columns, (item, key) => {\n        const defValue = unref(item.value);\n        if (defValue !== undefined) {\n          _.set(form, key, defValue);\n        }\n      });\n      merge(form, _.cloneDeep(props.initialForm));\n      return form;\n    }\n\n    const initialForm = createInitialForm();\n    setFormData(initialForm);\n\n    const scope: Ref<FormScopeContext> = computed(() => {\n      return {\n        row: initialForm,\n        form,\n        index: props.index,\n        mode: props.mode || \"add\",\n        attrs: ctx.attrs,\n        getComponentRef\n      } as FormScopeContext;\n    });\n\n    function getContextFn() {\n      return scope.value;\n    }\n\n    const computedColumns = doComputed(() => {\n      return props.columns;\n    }, getContextFn);\n    //form.valueBuilder\n\n    function doValueBuilder(form: any) {\n      if (form == null) {\n        return;\n      }\n      _.each(props.columns, (item, key) => {\n        let value = _.get(form, key);\n        if (item.valueBuilder) {\n          item.valueBuilder({\n            value,\n            key,\n            row: initialForm,\n            form,\n            index: props.index,\n            mode: props.mode\n          });\n        }\n      });\n    }\n\n    function getFormData() {\n      return form;\n    }\n    function setFormData(formData: any, options: SetFormDataOptions = {}) {\n      doValueBuilder(formData);\n\n      if (options.mergeForm === false) {\n        for (const key in form) {\n          delete form[key];\n        }\n      }\n      merge(form, formData);\n      const { valueChange } = options;\n      if (valueChange) {\n        _.forEach(props.columns, (column, key) => {\n          const value = form[key];\n          doValueChange(key, value);\n        });\n      }\n    }\n\n    function mergeCol(...col: any) {\n      return merge({}, props.col, ...col);\n    }\n\n    function buildItemScope(item: any): FormScopeContext {\n      return { key: item.key, ...scope.value };\n    }\n\n    doValueBuilder(form);\n\n    // watch(\n    //   () => props.initialForm,\n    //   () => {\n    //     setFormData(createInitialForm(), { mergeForm: false });\n    //   }\n    // );\n\n    function doValueChange(key: string, value: any) {\n      const event = { key, value, formRef: proxy, ...scope.value, immediate: false };\n      ctx.emit(\"value-change\", event);\n      let valueChange = props.columns[key].valueChange;\n      if (valueChange) {\n        if (valueChange instanceof Function) {\n          valueChange(event);\n        } else if (valueChange.handle) {\n          valueChange.handle(event);\n        }\n      }\n    }\n\n    const formItemRefs: Ref = ref({});\n\n    function getFormItemRef(key: string) {\n      return formItemRefs.value[key];\n    }\n\n    function getComponentRef(key: string, isAsync = false) {\n      return getFormItemRef(key)?.getComponentRef(isAsync);\n    }\n\n    const groupActiveKey = ref([]);\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.forEach(props.group?.groups, (groupItem, key) => {\n      if (groupItem.collapsed !== true) {\n        groupActiveKey.value.push(key);\n      }\n    });\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    if (props.group?.groupType === \"tabs\") {\n      groupActiveKey.value = groupActiveKey.value.length > 0 ? groupActiveKey.value[0] : null;\n    }\n\n    //构建分组数据\n    const computedGroup = doComputed(\n      () => {\n        return props.group;\n      },\n      getContextFn,\n      null,\n      (group) => {\n        if (!group) {\n          return {};\n        }\n        //找出没有添加进分组的字段\n        const groupedKeys: any = {};\n        _.forEach(group?.groups, (groupItem, key) => {\n          _.forEach(groupItem.columns, (item) => {\n            if (computedColumns.value[item] == null) {\n              utils.logger.warn(\"无效的分组字段：\" + item);\n              return;\n            }\n            groupedKeys[item] = key;\n          });\n        });\n\n        const type = group.groupType;\n        let wrapper = {\n          parent: ui.collapse.name,\n          child: ui.collapseItem.name\n        };\n        if (type === \"tabs\") {\n          wrapper.parent = ui.tabs.name;\n          wrapper.child = ui.tabPane.name;\n        }\n        return merge(\n          {\n            wrapper,\n            groupedKeys\n          },\n          group\n        );\n      }\n    );\n\n    const computedDefaultColumns = computed(() => {\n      const columns: any = [];\n      //default columns排序\n      _.forEach(computedColumns.value, (value, key) => {\n        const item = _.cloneDeep(props.formItem || {});\n        value = merge(item, value);\n        value.key = key;\n        if (value.order == null) {\n          value.order = Constants.orderDefault;\n        }\n        if (computedGroup.value?.groupedKeys == null || computedGroup.value?.groupedKeys[key] == null) {\n          columns.push(value);\n        }\n        value.col = mergeCol(value.col);\n      });\n      //排序\n      columns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n\n      return columns;\n    });\n\n    function getFormRef() {\n      return formRef.value;\n    }\n    async function reset() {\n      // ui.form.resetWrap(formRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n\n      if (props.doReset) {\n        await props.doReset(scope.value);\n      }\n      ctx.emit(\"reset\");\n    }\n\n    const validRef: Ref = ref();\n    const errorsRef: Ref = ref({});\n\n    function fillGroupError(fieldErrors: any) {\n      if (!computedGroup.value?.groupedKeys) {\n        return;\n      }\n      for (let key in fieldErrors) {\n        const group = computedGroup.value?.groupedKeys[key];\n        if (group != null) {\n          fieldErrors[\"group.\" + group] = true;\n        }\n      }\n    }\n    async function submit() {\n      const validateScope = { ...scope.value, form };\n      if (props.beforeValidate) {\n        const ret = await props.beforeValidate(validateScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      try {\n        errorsRef.value = {};\n        await ui.form.validateWrap(formRef.value);\n        validRef.value = true;\n      } catch (e: any) {\n        validRef.value = false;\n        const validateErrors = ui.form.transformValidateErrors(e);\n        fillGroupError(validateErrors);\n        errorsRef.value = validateErrors;\n        ctx.emit(\"validationError\", scope.value);\n        throw e;\n      }\n\n      const formData = _.cloneDeep(toRaw(form));\n      const submitScope = { ...scope.value, form: formData };\n      logger.debug(\"form submit\", JSON.stringify(form));\n      _.each(props.columns, (item, key) => {\n        let value = _.get(formData, key);\n        if (item.valueResolve) {\n          item.valueResolve({\n            value,\n            key,\n            ...submitScope\n          });\n        }\n      });\n\n      if (props.beforeSubmit) {\n        const ret = await props.beforeSubmit(submitScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      //移除不允许提交的字段\n      _.each(props.columns, (item, key) => {\n        if (item.submit === false) {\n          _.unset(formData, key);\n        }\n      });\n\n      if (props.doSubmit) {\n        const res = await props.doSubmit(submitScope);\n        submitScope.res = res;\n        if (res === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"submit\", submitScope);\n      if (props.afterSubmit) {\n        const success = await props.afterSubmit(submitScope);\n        if (success === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"success\", submitScope);\n\n      return submitScope;\n    }\n\n    onMounted(() => {\n      // immediate valueChange触发\n      _.forEach(computedColumns.value, (item, key) => {\n        if (item.valueChange == null) {\n          return;\n        }\n        let valueChange = item.valueChange;\n        if (valueChange && valueChange.immediate === true && valueChange.handle) {\n          const event = { key, value: form[key], formRef: proxy, ...scope.value, immediate: true };\n          if (valueChange.handle) {\n            valueChange.handle(event);\n          }\n        }\n      });\n    });\n\n    function formItemShow(item: any) {\n      if (item && item.show !== false) {\n        return true;\n      }\n      return false;\n    }\n    function groupItemShow(groupItem: any) {\n      if (!groupItem.columns) {\n        return false;\n      }\n\n      for (let key of groupItem.columns) {\n        if (computedColumns.value[key] == null) {\n          continue;\n        }\n        const isFieldShow = formItemShow(computedColumns.value[key]);\n        if (isFieldShow) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (props.watch) {\n      watch(\n        () => {\n          return form;\n        },\n        (newVal, oldVal) => {\n          if (props.watch) {\n            props.watch(scope.value);\n          }\n        },\n        {\n          deep: true,\n          immediate: true\n        }\n      );\n    }\n\n    ctx.emit(\"init\", scope.value);\n\n    return {\n      get: (form: any, key: string) => {\n        return _.get(form, key);\n      },\n      set: (form: any, key: string, value: any) => {\n        _.set(form, key, value);\n        doValueChange(key, value);\n      },\n      ui,\n      validRef,\n      errorsRef,\n      formRef,\n      computedColumns,\n      computedDefaultColumns,\n      submit,\n      reset,\n      getFormRef,\n      scope,\n      buildItemScope,\n      groupActiveKey,\n      form,\n      formItemRefs,\n      getFormData,\n      setFormData,\n      getComponentRef,\n      mergeCol,\n      computedGroup,\n      getContextFn,\n      formItemShow,\n      groupItemShow\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form {\n  .el-collapse-item__content {\n    margin-top: 10px;\n    padding-left: 30px;\n    padding-right: 30px;\n  }\n\n  .fs-form-invalid {\n  }\n\n  .fs-form-item-component {\n    .ant-picker,\n    .ant-input-affix-wrapper,\n    .ant-input-number,\n    .el-cascader,\n    .el-date-editor,\n    .el-input-number,\n    .el-input,\n    > .el-select,\n    > .n-select,\n    .n-date-picker,\n    .n-input-number {\n      width: 100%;\n    }\n\n    .el-date-editor .el-range__icon {\n      margin-left: 10px;\n    }\n    .el-date-editor .el-range__close-icon {\n      margin-right: 10px;\n    }\n  }\n\n  //.el-date-editor.el-input__wrapper {\n  //  width: 100%;\n  //}\n}\n.fs-form-grid {\n  .fs-row {\n    display: grid;\n    grid-template-columns: 50% 50%;\n    // gap: 0 20px; //列间距 20px\n    .fs-col {\n      max-width: 100%;\n      width: 100%;\n    }\n\n    // antdv\n    .ant-form-item-label {\n      width: 100px;\n      flex: none;\n      max-width: none;\n    }\n    .ant-form-item-control-wrapper {\n      flex: 1;\n      max-width: none;\n    }\n  }\n\n  // element\n  .el-row::after,\n  .el-row::before {\n    display: none;\n  }\n}\n.fs-form-flex {\n  display: flex;\n  justify-content: flex-start;\n  align-items: baseline;\n  flex-wrap: wrap;\n  .fs-row {\n    width: 100%;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.form.name\"\n    ref=\"formRef\"\n    class=\"fs-form\"\n    :class=\"{\n      'fs-form-grid': display === 'grid',\n      'fs-form-flex': display === 'flex',\n      'fs-form-invalid': validRef === false\n    }\"\n    :model=\"form\"\n  >\n    <!-- row -->\n    <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n      <!-- col -->\n      <template v-for=\"item in computedDefaultColumns\" :key=\"item?.key\">\n        <component :is=\"ui.col.name\" v-if=\"formItemShow(item)\" class=\"fs-col\" v-bind=\"item.col\">\n          <fs-form-item\n            v-if=\"item.blank !== true\"\n            :ref=\"\n              (el: any) => {\n                if (el) {\n                  formItemRefs[item.key] = el;\n                }\n              }\n            \"\n            :item=\"item\"\n            :helper=\"helper\"\n            :model-value=\"get(form, item.key)\"\n            :form-slot=\"slots['form_' + item.key]\"\n            :get-context-fn=\"getContextFn\"\n            @update:modelValue=\"set(form, item.key, $event)\"\n          />\n        </component>\n      </template>\n    </component>\n    <component\n      :is=\"computedGroup.wrapper.parent\"\n      v-if=\"computedGroup.wrapper\"\n      v-model:[ui.collapse.modelValue]=\"groupActiveKey\"\n      style=\"width: 100%\"\n      v-bind=\"computedGroup\"\n    >\n      <template v-for=\"(groupItem, groupKey) of computedGroup.groups\" :key=\"groupKey\">\n        <component\n          :is=\"computedGroup.wrapper.child\"\n          v-if=\"groupItemShow(groupItem)\"\n          :[ui.collapse.keyName]=\"groupKey\"\n          v-bind=\"groupItem\"\n          :class=\"{ 'fs-form-group-error': errorsRef['group.' + groupKey] }\"\n        >\n          <template v-for=\"(item, slotName) of groupItem.slots\" :key=\"slotName\" #[slotName]=\"scope\">\n            <fs-render :render-func=\"item\" :scope=\"{ ...scope, hasError: errorsRef['group.' + groupKey] }\" />\n          </template>\n          <!-- row -->\n          <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n            <!-- col -->\n            <template v-for=\"key in groupItem.columns\" :key=\"key\">\n              <component\n                :is=\"ui.col.name\"\n                v-if=\"formItemShow(computedColumns[key])\"\n                class=\"fs-col\"\n                v-bind=\"mergeCol(groupItem.col, computedColumns[key]?.col)\"\n              >\n                <fs-form-item\n                  v-if=\"computedColumns[key] && computedColumns[key]?.blank !== true\"\n                  :ref=\"\n                    (el: any) => {\n                      if (el) {\n                        formItemRefs[key] = el;\n                      }\n                    }\n                  \"\n                  :item=\"computedColumns[key]\"\n                  :model-value=\"get(form, key)\"\n                  :form-slot=\"slots['form_' + key]\"\n                  :get-context-fn=\"getContextFn\"\n                  @update:modelValue=\"set(form, key, $event)\"\n                />\n              </component>\n            </template>\n          </component>\n        </component>\n      </template>\n    </component>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  reactive,\n  Ref,\n  ref,\n  toRaw,\n  unref,\n  UnwrapNestedRefs,\n  watch\n} from \"vue\";\nimport _ from \"lodash-es\";\nimport { ComputeValue, useCompute } from \"../../use/use-compute\";\nimport logger from \"../../utils/util.log\";\nimport { useMerge } from \"../../use/use-merge\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { FormScopeContext, SetFormDataOptions, useUi, utils } from \"../../index\";\n\n/**\n * 配置化的表单组件\n * 暴露的方法：\n * ref.submit() = 提交表单\n * ref.reset() = 重置表单\n */\nexport default defineComponent({\n  name: \"FsForm\",\n  props: {\n    /**\n     * 初始表单数据\n     **/\n    initialForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 字段模版\n     * {\n     *   key:{\n     *     title: \"字段名称\",\n     *     component:{\n     *       name:\"组件名称\"\n     *       ...组件参数\n     *     }\n     *   }\n     * }\n     * */\n    columns: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 字段分组\n     * {\n     *   type:'xxx', //分组展示类型\n     *   groups:{ //分组数据\n     *     groupKey:{ title:'xxx',columns:['fieldKey','fieldKey']}\n     *   }\n     * }\n     */\n    group: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 重置表单后的操作\n     */\n    doReset: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮，表单校验前执行操作（async）\n     */\n    beforeValidate: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单校验完完成后，提交前处理（async）\n     */\n    beforeSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮时执行操作（async）\n     */\n    doSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单提交后处理（async）\n     */\n    afterSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 插槽内容\n     */\n    slots: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * 布局方式【flex|grid】\n     */\n    display: {\n      type: String,\n      default: \"flex\" // flex\n    },\n    /**\n     * 序号，编辑时会传入\n     */\n    index: {\n      type: Number,\n      default: undefined\n    },\n    /**\n     * 模式 [add,edit,view,自定义]\n     */\n    mode: {\n      type: String,\n      default: undefined\n    },\n    /**\n     * a-row配置\n     */\n    row: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * el-col|a-col配置，可配置跨列\n     */\n    col: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * formItem的公共配置\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * helper位置：{position:'label'}\n     */\n    helper: {\n      type: Object\n    },\n\n    watch: {\n      type: Function,\n      default: null\n    }\n  },\n  emits: [\"reset\", \"submit\", \"success\", \"validationError\", \"value-change\", \"init\"],\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const { ui } = useUi();\n    const { AsyncComputeValue, doComputed } = useCompute();\n    const formRef = ref();\n    const form: UnwrapNestedRefs<any> = reactive({});\n    const { proxy } = getCurrentInstance();\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"form.value配置不支持Compute/AsyncCompute类型的动态计算\");\n      }\n    });\n    function createInitialForm() {\n      const form = {};\n      // 初始数据赋值\n      _.each(props.columns, (item, key) => {\n        const defValue = unref(item.value);\n        if (defValue !== undefined) {\n          _.set(form, key, defValue);\n        }\n      });\n      merge(form, _.cloneDeep(props.initialForm));\n      return form;\n    }\n\n    const initialForm = createInitialForm();\n    setFormData(initialForm);\n\n    const scope: Ref<FormScopeContext> = computed(() => {\n      return {\n        row: initialForm,\n        form,\n        index: props.index,\n        mode: props.mode || \"add\",\n        attrs: ctx.attrs,\n        getComponentRef\n      } as FormScopeContext;\n    });\n\n    function getContextFn() {\n      return scope.value;\n    }\n\n    const computedColumns = doComputed(() => {\n      return props.columns;\n    }, getContextFn);\n    //form.valueBuilder\n\n    function doValueBuilder(form: any) {\n      if (form == null) {\n        return;\n      }\n      _.each(props.columns, (item, key) => {\n        let value = _.get(form, key);\n        if (item.valueBuilder) {\n          item.valueBuilder({\n            value,\n            key,\n            row: initialForm,\n            form,\n            index: props.index,\n            mode: props.mode\n          });\n        }\n      });\n    }\n\n    function getFormData() {\n      return form;\n    }\n    function setFormData(formData: any, options: SetFormDataOptions = {}) {\n      doValueBuilder(formData);\n\n      if (options.mergeForm === false) {\n        for (const key in form) {\n          delete form[key];\n        }\n      }\n      merge(form, formData);\n      const { valueChange } = options;\n      if (valueChange) {\n        _.forEach(props.columns, (column, key) => {\n          const value = form[key];\n          doValueChange(key, value);\n        });\n      }\n    }\n\n    function mergeCol(...col: any) {\n      return merge({}, props.col, ...col);\n    }\n\n    function buildItemScope(item: any): FormScopeContext {\n      return { key: item.key, ...scope.value };\n    }\n\n    doValueBuilder(form);\n\n    // watch(\n    //   () => props.initialForm,\n    //   () => {\n    //     setFormData(createInitialForm(), { mergeForm: false });\n    //   }\n    // );\n\n    function doValueChange(key: string, value: any) {\n      const event = { key, value, formRef: proxy, ...scope.value, immediate: false };\n      ctx.emit(\"value-change\", event);\n      let valueChange = props.columns[key].valueChange;\n      if (valueChange) {\n        if (valueChange instanceof Function) {\n          valueChange(event);\n        } else if (valueChange.handle) {\n          valueChange.handle(event);\n        }\n      }\n    }\n\n    const formItemRefs: Ref = ref({});\n\n    function getFormItemRef(key: string) {\n      return formItemRefs.value[key];\n    }\n\n    function getComponentRef(key: string, isAsync = false) {\n      return getFormItemRef(key)?.getComponentRef(isAsync);\n    }\n\n    const groupActiveKey = ref([]);\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.forEach(props.group?.groups, (groupItem, key) => {\n      if (groupItem.collapsed !== true) {\n        groupActiveKey.value.push(key);\n      }\n    });\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    if (props.group?.groupType === \"tabs\") {\n      groupActiveKey.value = groupActiveKey.value.length > 0 ? groupActiveKey.value[0] : null;\n    }\n\n    //构建分组数据\n    const computedGroup = doComputed(\n      () => {\n        return props.group;\n      },\n      getContextFn,\n      null,\n      (group) => {\n        if (!group) {\n          return {};\n        }\n        //找出没有添加进分组的字段\n        const groupedKeys: any = {};\n        _.forEach(group?.groups, (groupItem, key) => {\n          _.forEach(groupItem.columns, (item) => {\n            if (computedColumns.value[item] == null) {\n              utils.logger.warn(\"无效的分组字段：\" + item);\n              return;\n            }\n            groupedKeys[item] = key;\n          });\n        });\n\n        const type = group.groupType;\n        let wrapper = {\n          parent: ui.collapse.name,\n          child: ui.collapseItem.name\n        };\n        if (type === \"tabs\") {\n          wrapper.parent = ui.tabs.name;\n          wrapper.child = ui.tabPane.name;\n        }\n        return merge(\n          {\n            wrapper,\n            groupedKeys\n          },\n          group\n        );\n      }\n    );\n\n    const computedDefaultColumns = computed(() => {\n      const columns: any = [];\n      //default columns排序\n      _.forEach(computedColumns.value, (value, key) => {\n        const item = _.cloneDeep(props.formItem || {});\n        value = merge(item, value);\n        value.key = key;\n        if (value.order == null) {\n          value.order = Constants.orderDefault;\n        }\n        if (computedGroup.value?.groupedKeys == null || computedGroup.value?.groupedKeys[key] == null) {\n          columns.push(value);\n        }\n        value.col = mergeCol(value.col);\n      });\n      //排序\n      columns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n\n      return columns;\n    });\n\n    function getFormRef() {\n      return formRef.value;\n    }\n    async function reset() {\n      // ui.form.resetWrap(formRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n\n      if (props.doReset) {\n        await props.doReset(scope.value);\n      }\n      ctx.emit(\"reset\");\n    }\n\n    const validRef: Ref = ref();\n    const errorsRef: Ref = ref({});\n\n    function fillGroupError(fieldErrors: any) {\n      if (!computedGroup.value?.groupedKeys) {\n        return;\n      }\n      for (let key in fieldErrors) {\n        const group = computedGroup.value?.groupedKeys[key];\n        if (group != null) {\n          fieldErrors[\"group.\" + group] = true;\n        }\n      }\n    }\n    async function submit() {\n      const validateScope = { ...scope.value, form };\n      if (props.beforeValidate) {\n        const ret = await props.beforeValidate(validateScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      try {\n        errorsRef.value = {};\n        await ui.form.validateWrap(formRef.value);\n        validRef.value = true;\n      } catch (e: any) {\n        validRef.value = false;\n        const validateErrors = ui.form.transformValidateErrors(e);\n        fillGroupError(validateErrors);\n        errorsRef.value = validateErrors;\n        ctx.emit(\"validationError\", scope.value);\n        throw e;\n      }\n\n      const formData = _.cloneDeep(toRaw(form));\n      const submitScope = { ...scope.value, form: formData };\n      logger.debug(\"form submit\", JSON.stringify(form));\n      _.each(props.columns, (item, key) => {\n        let value = _.get(formData, key);\n        if (item.valueResolve) {\n          item.valueResolve({\n            value,\n            key,\n            ...submitScope\n          });\n        }\n      });\n\n      if (props.beforeSubmit) {\n        const ret = await props.beforeSubmit(submitScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      //移除不允许提交的字段\n      _.each(props.columns, (item, key) => {\n        if (item.submit === false) {\n          _.unset(formData, key);\n        }\n      });\n\n      if (props.doSubmit) {\n        const res = await props.doSubmit(submitScope);\n        submitScope.res = res;\n        if (res === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"submit\", submitScope);\n      if (props.afterSubmit) {\n        const success = await props.afterSubmit(submitScope);\n        if (success === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"success\", submitScope);\n\n      return submitScope;\n    }\n\n    onMounted(() => {\n      // immediate valueChange触发\n      _.forEach(computedColumns.value, (item, key) => {\n        if (item.valueChange == null) {\n          return;\n        }\n        let valueChange = item.valueChange;\n        if (valueChange && valueChange.immediate === true && valueChange.handle) {\n          const event = { key, value: form[key], formRef: proxy, ...scope.value, immediate: true };\n          if (valueChange.handle) {\n            valueChange.handle(event);\n          }\n        }\n      });\n    });\n\n    function formItemShow(item: any) {\n      if (item && item.show !== false) {\n        return true;\n      }\n      return false;\n    }\n    function groupItemShow(groupItem: any) {\n      if (!groupItem.columns) {\n        return false;\n      }\n\n      for (let key of groupItem.columns) {\n        if (computedColumns.value[key] == null) {\n          continue;\n        }\n        const isFieldShow = formItemShow(computedColumns.value[key]);\n        if (isFieldShow) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (props.watch) {\n      watch(\n        () => {\n          return form;\n        },\n        (newVal, oldVal) => {\n          if (props.watch) {\n            props.watch(scope.value);\n          }\n        },\n        {\n          deep: true,\n          immediate: true\n        }\n      );\n    }\n\n    ctx.emit(\"init\", scope.value);\n\n    return {\n      get: (form: any, key: string) => {\n        return _.get(form, key);\n      },\n      set: (form: any, key: string, value: any) => {\n        _.set(form, key, value);\n        doValueChange(key, value);\n      },\n      ui,\n      validRef,\n      errorsRef,\n      formRef,\n      computedColumns,\n      computedDefaultColumns,\n      submit,\n      reset,\n      getFormRef,\n      scope,\n      buildItemScope,\n      groupActiveKey,\n      form,\n      formItemRefs,\n      getFormData,\n      setFormData,\n      getComponentRef,\n      mergeCol,\n      computedGroup,\n      getContextFn,\n      formItemShow,\n      groupItemShow\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form {\n  .el-collapse-item__content {\n    margin-top: 10px;\n    padding-left: 30px;\n    padding-right: 30px;\n  }\n\n  .fs-form-invalid {\n  }\n\n  .fs-form-item-component {\n    .ant-picker,\n    .ant-input-affix-wrapper,\n    .ant-input-number,\n    .el-cascader,\n    .el-date-editor,\n    .el-input-number,\n    .el-input,\n    > .el-select,\n    > .n-select,\n    .n-date-picker,\n    .n-input-number {\n      width: 100%;\n    }\n\n    .el-date-editor .el-range__icon {\n      margin-left: 10px;\n    }\n    .el-date-editor .el-range__close-icon {\n      margin-right: 10px;\n    }\n  }\n\n  //.el-date-editor.el-input__wrapper {\n  //  width: 100%;\n  //}\n}\n.fs-form-grid {\n  .fs-row {\n    display: grid;\n    grid-template-columns: 50% 50%;\n    // gap: 0 20px; //列间距 20px\n    .fs-col {\n      max-width: 100%;\n      width: 100%;\n    }\n\n    // antdv\n    .ant-form-item-label {\n      width: 100px;\n      flex: none;\n      max-width: none;\n    }\n    .ant-form-item-control-wrapper {\n      flex: 1;\n      max-width: none;\n    }\n  }\n\n  // element\n  .el-row::after,\n  .el-row::before {\n    display: none;\n  }\n}\n.fs-form-flex {\n  display: flex;\n  justify-content: flex-start;\n  align-items: baseline;\n  flex-wrap: wrap;\n  .fs-row {\n    width: 100%;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.formItem.name\"\n    v-if=\"item\"\n    class=\"fs-form-item\"\n    :[ui.formItem.prop]=\"computedKey\"\n    v-bind=\"item\"\n    :path=\"item.key\"\n    :rule-path=\"item.key\"\n  >\n    <template #label>\n      <span v-if=\"computedLabelIsRender\" class=\"fs-form-item-label-text\">\n        <fs-render :render-func=\"computedLabelRender\"></fs-render>\n      </span>\n      <span v-else class=\"fs-form-item-label-text\" :title=\"computedLabel\">\n        {{ computedLabel }}\n      </span>\n\n      <component\n        :is=\"ui.tooltip.name\"\n        v-if=\"item.helper && computedHelperPosition === 'label'\"\n        v-bind=\"computedHelperTooltip\"\n      >\n        <template #[ui.tooltip.content]>\n          <span class=\"fs-form-helper-tooltip\">\n            <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n          </span>\n        </template>\n        <template #[ui.tooltip.trigger]>\n          <span class=\"fs-form-item-label-icon\">\n            <fs-icon class=\"fs-form-item-label-icon-inner\" :icon=\"ui.icons.question\"></fs-icon>\n          </span>\n        </template>\n      </component>\n    </template>\n    <div class=\"fs-form-item-content\">\n      <fs-render v-if=\"item.topRender\" :render-func=\"item.topRender\" :scope=\"scopeFunc()\" />\n      <div class=\"fs-form-item-render\">\n        <fs-render v-if=\"item.prefixRender\" :render-func=\"item.prefixRender\" :scope=\"scopeFunc()\" />\n        <div class=\"fs-form-item-component\">\n          <fs-slot-render v-if=\"formSlot\" :slots=\"formSlot\" :scope=\"scopeFunc()\" />\n          <template v-else-if=\"item.component?.show !== false\">\n            <fs-render\n              v-if=\"item.conditionalRender && item.conditionalRender.match && item.conditionalRender.match(scopeFunc())\"\n              :render-func=\"item.conditionalRender.render\"\n              :scope=\"scopeFunc()\"\n            />\n            <fs-render v-else-if=\"item.render\" :render-func=\"item.render\" :scope=\"scopeFunc()\" />\n            <fs-component-render\n              v-else\n              ref=\"componentRenderRef\"\n              v-bind=\"item.component\"\n              :model-value=\"modelValue\"\n              :scope=\"scopeFunc()\"\n              @update:modelValue=\"updateModelValue\"\n            />\n          </template>\n        </div>\n        <fs-render v-if=\"item.suffixRender\" :render-func=\"item.suffixRender\" :scope=\"scopeFunc()\" />\n      </div>\n      <fs-render v-if=\"item.bottomRender\" :render-func=\"item.bottomRender\" :scope=\"scopeFunc()\" />\n      <template v-if=\"item.helper && computedHelperPosition !== 'label'\">\n        <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n      </template>\n    </div>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { ref, computed, defineComponent, Ref, PropType } from \"vue\";\nimport FsRender from \"../render/fs-render.js\";\nimport { ScopeContext } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * form-item组件封装\n */\nexport default defineComponent({\n  name: \"FsFormItem\",\n  components: { FsRender },\n  props: {\n    /**\n     * 表单字段值(v-model)\n     */\n    modelValue: {},\n    /**\n     * 字段配置\n     */\n    item: {\n      type: Object as PropType<any>,\n      default: undefined\n    },\n    /**\n     * 字段组件插槽\n     */\n    formSlot: {\n      type: Function,\n      default: undefined\n    },\n    getContextFn: {\n      type: Function,\n      default: undefined\n    },\n    helper: {\n      type: [String, Object]\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const componentRenderRef = ref();\n    // const scopeComputed: Ref<ScopeContext> = computed(() => {});\n\n    const scopeFunc = () => {\n      const scope = props.getContextFn ? props.getContextFn() : {};\n      return { value: props.modelValue, key: props.item.key, ...scope };\n    };\n\n    function updateModelValue(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n    }\n    function getComponentRef(isAsync = false) {\n      if (isAsync) {\n        return componentRenderRef.value?.getTargetRefAsync();\n      }\n      return componentRenderRef.value?.getTargetRef();\n    }\n\n    const computedHelperPosition = computed(() => {\n      return props.item?.helper?.position || (props.helper as any)?.position;\n    });\n    const computedHelperTooltip = computed(() => {\n      return merge({}, props.item.helper?.tooltip, (props.helper as any)?.tooltip);\n    });\n    const computedKey = computed(() => {\n      if (props.item == null) {\n        return;\n      }\n      if (props.item.key.indexOf(\".\") >= 0) {\n        return props.item.key.split(\".\");\n      }\n      return props.item.key;\n    });\n\n    const computedLabel = computed(() => {\n      return props.item.label || props.item.title;\n    });\n    const computedLabelIsRender = computed(() => {\n      return computedLabel.value instanceof Function;\n    });\n\n    const computedLabelRender = () => {\n      return computedLabel.value(scopeFunc());\n    };\n\n    return {\n      ui,\n      updateModelValue,\n      scopeFunc,\n      getComponentRef,\n      componentRenderRef,\n      computedHelperPosition,\n      computedHelperTooltip,\n      computedKey,\n      computedLabelIsRender,\n      computedLabel,\n      computedLabelRender\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form-item {\n  .ant-form-item-label {\n    //line-height: 1;\n    .fs-form-item-label-text {\n      width: 100%;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n  }\n  .el-form-item {\n    .fs-form-item-label-icon {\n      line-height: 1;\n      height: inherit;\n    }\n  }\n  .fs-form-item-label-icon {\n    margin: 0 2px;\n    .fs-form-item-label-icon-inner {\n      line-height: inherit;\n      height: inherit;\n    }\n  }\n  .fs-form-item-content {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    flex: 1;\n    .fs-form-item-render {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      .fs-form-item-component {\n        flex: 1;\n        max-width: 100%;\n      }\n    }\n  }\n}\n.fs-form-helper-tooltip {\n  .fs-form-helper {\n    color: inherit;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.formItem.name\"\n    v-if=\"item\"\n    class=\"fs-form-item\"\n    :[ui.formItem.prop]=\"computedKey\"\n    v-bind=\"item\"\n    :path=\"item.key\"\n    :rule-path=\"item.key\"\n  >\n    <template #label>\n      <span v-if=\"computedLabelIsRender\" class=\"fs-form-item-label-text\">\n        <fs-render :render-func=\"computedLabelRender\"></fs-render>\n      </span>\n      <span v-else class=\"fs-form-item-label-text\" :title=\"computedLabel\">\n        {{ computedLabel }}\n      </span>\n\n      <component\n        :is=\"ui.tooltip.name\"\n        v-if=\"item.helper && computedHelperPosition === 'label'\"\n        v-bind=\"computedHelperTooltip\"\n      >\n        <template #[ui.tooltip.content]>\n          <span class=\"fs-form-helper-tooltip\">\n            <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n          </span>\n        </template>\n        <template #[ui.tooltip.trigger]>\n          <span class=\"fs-form-item-label-icon\">\n            <fs-icon class=\"fs-form-item-label-icon-inner\" :icon=\"ui.icons.question\"></fs-icon>\n          </span>\n        </template>\n      </component>\n    </template>\n    <div class=\"fs-form-item-content\">\n      <fs-render v-if=\"item.topRender\" :render-func=\"item.topRender\" :scope=\"scopeFunc()\" />\n      <div class=\"fs-form-item-render\">\n        <fs-render v-if=\"item.prefixRender\" :render-func=\"item.prefixRender\" :scope=\"scopeFunc()\" />\n        <div class=\"fs-form-item-component\">\n          <fs-slot-render v-if=\"formSlot\" :slots=\"formSlot\" :scope=\"scopeFunc()\" />\n          <template v-else-if=\"item.component?.show !== false\">\n            <fs-render\n              v-if=\"item.conditionalRender && item.conditionalRender.match && item.conditionalRender.match(scopeFunc())\"\n              :render-func=\"item.conditionalRender.render\"\n              :scope=\"scopeFunc()\"\n            />\n            <fs-render v-else-if=\"item.render\" :render-func=\"item.render\" :scope=\"scopeFunc()\" />\n            <fs-component-render\n              v-else\n              ref=\"componentRenderRef\"\n              v-bind=\"item.component\"\n              :model-value=\"modelValue\"\n              :scope=\"scopeFunc()\"\n              @update:modelValue=\"updateModelValue\"\n            />\n          </template>\n        </div>\n        <fs-render v-if=\"item.suffixRender\" :render-func=\"item.suffixRender\" :scope=\"scopeFunc()\" />\n      </div>\n      <fs-render v-if=\"item.bottomRender\" :render-func=\"item.bottomRender\" :scope=\"scopeFunc()\" />\n      <template v-if=\"item.helper && computedHelperPosition !== 'label'\">\n        <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n      </template>\n    </div>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { ref, computed, defineComponent, Ref, PropType } from \"vue\";\nimport FsRender from \"../render/fs-render.js\";\nimport { ScopeContext } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * form-item组件封装\n */\nexport default defineComponent({\n  name: \"FsFormItem\",\n  components: { FsRender },\n  props: {\n    /**\n     * 表单字段值(v-model)\n     */\n    modelValue: {},\n    /**\n     * 字段配置\n     */\n    item: {\n      type: Object as PropType<any>,\n      default: undefined\n    },\n    /**\n     * 字段组件插槽\n     */\n    formSlot: {\n      type: Function,\n      default: undefined\n    },\n    getContextFn: {\n      type: Function,\n      default: undefined\n    },\n    helper: {\n      type: [String, Object]\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const componentRenderRef = ref();\n    // const scopeComputed: Ref<ScopeContext> = computed(() => {});\n\n    const scopeFunc = () => {\n      const scope = props.getContextFn ? props.getContextFn() : {};\n      return { value: props.modelValue, key: props.item.key, ...scope };\n    };\n\n    function updateModelValue(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n    }\n    function getComponentRef(isAsync = false) {\n      if (isAsync) {\n        return componentRenderRef.value?.getTargetRefAsync();\n      }\n      return componentRenderRef.value?.getTargetRef();\n    }\n\n    const computedHelperPosition = computed(() => {\n      return props.item?.helper?.position || (props.helper as any)?.position;\n    });\n    const computedHelperTooltip = computed(() => {\n      return merge({}, props.item.helper?.tooltip, (props.helper as any)?.tooltip);\n    });\n    const computedKey = computed(() => {\n      if (props.item == null) {\n        return;\n      }\n      if (props.item.key.indexOf(\".\") >= 0) {\n        return props.item.key.split(\".\");\n      }\n      return props.item.key;\n    });\n\n    const computedLabel = computed(() => {\n      return props.item.label || props.item.title;\n    });\n    const computedLabelIsRender = computed(() => {\n      return computedLabel.value instanceof Function;\n    });\n\n    const computedLabelRender = () => {\n      return computedLabel.value(scopeFunc());\n    };\n\n    return {\n      ui,\n      updateModelValue,\n      scopeFunc,\n      getComponentRef,\n      componentRenderRef,\n      computedHelperPosition,\n      computedHelperTooltip,\n      computedKey,\n      computedLabelIsRender,\n      computedLabel,\n      computedLabelRender\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form-item {\n  .ant-form-item-label {\n    //line-height: 1;\n    .fs-form-item-label-text {\n      width: 100%;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n  }\n  .el-form-item {\n    .fs-form-item-label-icon {\n      line-height: 1;\n      height: inherit;\n    }\n  }\n  .fs-form-item-label-icon {\n    margin: 0 2px;\n    .fs-form-item-label-icon-inner {\n      line-height: inherit;\n      height: inherit;\n    }\n  }\n  .fs-form-item-content {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    flex: 1;\n    .fs-form-item-render {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      .fs-form-item-component {\n        flex: 1;\n        max-width: 100%;\n      }\n    }\n  }\n}\n.fs-form-helper-tooltip {\n  .fs-form-helper {\n    color: inherit;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-form-helper\">\n    <pre v-if=\"typeof helper === 'string'\">{{ helper }}</pre>\n    <template v-else-if=\"helper.render\">\n      <fs-render :render-func=\"helper.render\" :scope=\"scope\" />\n    </template>\n    <pre v-else-if=\"helper.text\">{{ helper.text }}</pre>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 表单字段帮助说明组件\n */\nexport default defineComponent({\n  name: \"FsFormHelper\",\n  props: {\n    /**\n     * 帮助说明, text: 说明文字, render: function(scope) 自定义渲染\n     */\n    helper: {\n      type: [\n        /**\n         * text: 说明文字,\n         * render: function , 自定义render\n         */\n        Object,\n        /**\n         * 说明文本\n         */\n        String\n      ]\n    },\n    scope: {}\n  },\n  setup(props) {}\n});\n</script>\n<style lang=\"less\">\n.fs-form-helper {\n  color: #7e7e7e;\n  line-height: 1.3;\n  margin-top: 4px;\n  margin-bottom: 6px;\n\n  font-size: 12px;\n  pre {\n    font-family: inherit;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    margin-bottom: 0px;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-form-helper\">\n    <pre v-if=\"typeof helper === 'string'\">{{ helper }}</pre>\n    <template v-else-if=\"helper.render\">\n      <fs-render :render-func=\"helper.render\" :scope=\"scope\" />\n    </template>\n    <pre v-else-if=\"helper.text\">{{ helper.text }}</pre>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 表单字段帮助说明组件\n */\nexport default defineComponent({\n  name: \"FsFormHelper\",\n  props: {\n    /**\n     * 帮助说明, text: 说明文字, render: function(scope) 自定义渲染\n     */\n    helper: {\n      type: [\n        /**\n         * text: 说明文字,\n         * render: function , 自定义render\n         */\n        Object,\n        /**\n         * 说明文本\n         */\n        String\n      ]\n    },\n    scope: {}\n  },\n  setup(props) {}\n});\n</script>\n<style lang=\"less\">\n.fs-form-helper {\n  color: #7e7e7e;\n  line-height: 1.3;\n  margin-top: 4px;\n  margin-bottom: 6px;\n\n  font-size: 12px;\n  pre {\n    font-family: inherit;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    margin-bottom: 0px;\n  }\n}\n</style>\n", null, "<script lang=\"ts\">\nimport { defineComponent as __MACROS_defineComponent } from \"vue\";\nexport default /*#__PURE__*/ __MACROS_defineComponent({\n  name: \"FsFormProvider\"\n});\n</script>\n<template>\n  <slot></slot>\n  <fs-form-wrapper v-for=\"item of formWrapperList\" :key=\"item.id\" v-bind=\"item\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { provide, Ref, ref } from \"vue\";\nimport FsFormWrapper from \"./fs-form-wrapper.js\";\nimport { OpenDialogProps } from \"../../d\";\n\n;\n\nconst formWrapperList: Ref = ref({});\n\nfunction getMaxZIndex(): number {\n  let elements = document.querySelectorAll(\"*\");\n  let maxZindex = 10;\n  for (let i = 0; i < elements.length; i++) {\n    // @ts-ignore\n    maxZindex = Math.max(maxZindex, elements[i].style.zIndex || 0);\n  }\n  return maxZindex;\n}\n\nprovide(\"use:form:wrapper\", () => {\n  return {\n    open(opts: OpenDialogProps) {\n      const id = opts.id || Math.floor(Math.random() * 1000000) + \"\";\n      return new Promise((resolve, reject) => {\n        formWrapperList.value[id] = {\n          id,\n          // zIndex: getMaxZIndex() + 1,\n          async onMounted(instance: any) {\n            await instance.open(opts);\n            resolve(instance);\n          },\n          onClosed() {\n            if (!opts.id) {\n              //如果不是固定id，则关闭后销毁\n              delete formWrapperList.value[id];\n            }\n          }\n        };\n      });\n    }\n  };\n});\n</script>\n", "<template>\n  <component\n    :is=\"container?.is || 'fs-layout-default'\"\n    ref=\"containerRef\"\n    class=\"fs-crud-container\"\n    v-bind=\"container\"\n    :class=\"computedClass\"\n  >\n    <slot></slot>\n\n    <template #header-top>\n      <slot name=\"header-top\"></slot>\n    </template>\n    <template #header-bottom>\n      <slot name=\"header-bottom\"></slot>\n    </template>\n    <template #header-middle>\n      <slot name=\"header-middle\"></slot>\n    </template>\n\n    <template #search>\n      <div class=\"fs-crud-search\">\n        <component :is=\"search.is || 'fs-search'\" ref=\"searchRef\" v-bind=\"search\" :slots=\"computedSearchSlots\" />\n      </div>\n    </template>\n\n    <template #actionbar>\n      <div v-if=\"actionbar && actionbar.show !== false\" class=\"fs-crud-actionbar\">\n        <slot name=\"actionbar-left\"></slot>\n        <fs-actionbar v-bind=\"actionbar\" />\n        <slot name=\"actionbar-right\"></slot>\n      </div>\n    </template>\n\n    <template #toolbar>\n      <div v-if=\"toolbar && toolbar.show !== false\" class=\"fs-crud-toolbar\">\n        <slot name=\"toolbar-left\"></slot>\n        <fs-toolbar ref=\"toolbarRef\" v-bind=\"toolbar\" :slots=\"computedToolbarSlots\" :columns=\"table.columns\" />\n        <slot name=\"toolbar-right\"></slot>\n      </div>\n    </template>\n    <template #tabs>\n      <fs-tabs-filter v-if=\"tabsBinding.show\" ref=\"tabsRef\" class=\"fs-tabs\" v-bind=\"tabsBinding\" />\n    </template>\n    <template #table>\n      <fs-table\n        ref=\"tableRef\"\n        class=\"fs-crud-table\"\n        v-bind=\"computedTable\"\n        :columns=\"table.columns\"\n        :loading=\"table.loading\"\n        :row-handle=\"rowHandle\"\n        :data=\"data\"\n        :cell-slots=\"computedCellSlots\"\n      />\n    </template>\n\n    <template #form>\n      <div ref=\"innerWrapperRef\" class=\"fs-form-wrapper-container\" :class=\"{ 'fs-form-inner-wrapper': isFormInner }\">\n        <fs-form-wrapper\n          ref=\"formWrapperRef\"\n          :slots=\"computedFormSlots\"\n          :inner-wrapper=\"innerWrapperRef\"\n          @inner-change=\"onFormInnerChange\"\n          @value-change=\"$emit('form-value-change', $event)\"\n        />\n        <!-- 编辑对话框 -->\n      </div>\n    </template>\n\n    <template #pagination>\n      <div class=\"fs-crud-pagination\">\n        <div class=\"fs-pagination-left\">\n          <slot name=\"pagination-left\"></slot>\n        </div>\n        <div class=\"fs-pagination\">\n          <component :is=\"ui.pagination.name\" v-if=\"pagination.show !== false\" v-bind=\"pagination\" />\n        </div>\n        <div class=\"fs-pagination-right\">\n          <slot name=\"pagination-right\"></slot>\n        </div>\n      </div>\n    </template>\n\n    <template #footer-top>\n      <slot name=\"footer-top\"></slot>\n    </template>\n    <template #footer-bottom>\n      <slot name=\"footer-bottom\"></slot>\n    </template>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, PropType, provide, ref, SetupContext, toRef } from \"vue\";\nimport _ from \"lodash-es\";\nimport { uiContext } from \"../ui\";\nimport { useMerge } from \"../use/use-merge\";\nimport utilLog from \"../utils/util.log\";\nimport { RowSelectionProps, SetSearchFormDataProps } from \"../d\";\nimport { useUi } from \"../use\";\nimport { utils } from \"../utils\";\nimport logger from \"../utils/util.log\";\n\nconst { merge } = useMerge();\n\nfunction useProviders(props: any, ctx: SetupContext) {\n  provide(\"get:columns\", () => {\n    return props.table.columns;\n  });\n  provide(\"update:columns\", (columns: any) => {\n    ctx.emit(\"update:columns\", columns);\n  });\n\n  provide(\"get:crudBinding\", () => {\n    return props;\n  });\n}\n\nfunction useSearch(props: any, ctx: SetupContext) {\n  const searchRef = ref();\n  const getSearchRef = () => {\n    return searchRef.value;\n  };\n\n  const getSearchFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getForm();\n    }\n    logger.warn(\"请使用expose.getSearchFormData代替\");\n    return {};\n  };\n\n  const getSearchValidatedFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getValidatedForm();\n    }\n    logger.warn(\"请使用expose.getSearchValidatedFormData代替\");\n    return {};\n  };\n\n  /**\n   * 设置form值\n   * @param form form对象\n   * @param opts = {\n   *    isMerge:false 是否与原有form值合并,\n   * }\n   */\n  function setSearchFormData({ form, mergeForm = false }: SetSearchFormDataProps) {\n    if (searchRef.value) {\n      searchRef.value.setForm(form, mergeForm);\n    }\n  }\n\n  return {\n    searchRef,\n    getSearchRef,\n    getSearchFormData,\n    setSearchFormData,\n    getSearchValidatedFormData\n  };\n}\n\nfunction useTabs(searchRet: any, props: any, ctx: SetupContext) {\n  const tabsBinding = computed(() => {\n    if (props.tabs && props.tabs.show && props.tabs.name) {\n      let dict = null;\n      const defaultTabs = { ...props.tabs };\n      if (props.search?.columns && props.search?.columns[props.tabs.name]?.component?.dict) {\n        dict = props.search?.columns[props.tabs.name]?.component?.dict;\n        if (defaultTabs.value == null) {\n          defaultTabs.value = dict.value;\n        }\n        if (defaultTabs.label == null) {\n          defaultTabs.label = dict.label;\n        }\n        if (defaultTabs.options == null) {\n          defaultTabs.options = dict.data || [];\n        }\n      }\n\n      return {\n        ...defaultTabs,\n        modelValue: props.search.validatedForm && props.search.validatedForm[props.tabs.name],\n        \"onUpdate:modelValue\": (value: any) => {\n          ctx.emit(\"tab-change\", { [props.tabs.name]: value });\n        }\n      };\n    }\n    return {\n      show: false\n    };\n  });\n  return {\n    tabsBinding\n  };\n}\n\nfunction slotFilter(ctxSlots: any, keyPrefix: string) {\n  if (!ctxSlots) {\n    return {};\n  }\n  const slots: any = {};\n  _.forEach(ctxSlots, (value, key) => {\n    if (key.startsWith(keyPrefix)) {\n      slots[key] = value;\n    }\n  });\n  return slots;\n}\n\nfunction useFixedHeight(props: any, ctx: SetupContext, { tableRef, containerRef }: any) {\n  const ui = uiContext.get();\n  if (ui.table.hasMaxHeight(props.table)) {\n    return {};\n  }\n  if (!ui.table.fixedHeaderNeedComputeBodyHeight) {\n    return {};\n  }\n  const maxHeightRef = ref(null);\n\n  function computeBodyHeight() {\n    const tableDom = tableRef?.value?.$el;\n    if (tableDom == null || tableDom.querySelector == null) {\n      return;\n    }\n    const headDom = tableDom.querySelector(ui.table.headerDomSelector);\n    if (headDom == null) {\n      return;\n    }\n    const tableHeight = tableDom.getBoundingClientRect().height;\n    const headHeight = headDom.getBoundingClientRect().height;\n    maxHeightRef.value = tableHeight - headHeight - 2 + (props.table.maxHeightAdjust || 0);\n\n    utilLog.debug(\"table max height recomputed \", maxHeightRef.value);\n  }\n\n  function watchBodyHeightChange() {\n    const tableDom = tableRef.value.$el;\n    if (tableDom == null) {\n      return;\n    }\n    const tableWrapperDom = tableDom.parentNode;\n\n    const observer = new ResizeObserver(function (entries) {\n      utilLog.debug(\"table resized\", entries);\n      // 每次被观测的元素尺寸发生改变这里都会执行\n      if (entries.length > 0 && entries[0].contentRect.height > 0) {\n        computeBodyHeight();\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 200);\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 500);\n      }\n    });\n    observer.observe(tableWrapperDom); // 观测DOM元素\n  }\n\n  onMounted(async () => {\n    await nextTick();\n    await nextTick();\n    watchBodyHeightChange();\n  });\n  return { maxHeightRef, computeBodyHeight };\n}\n\nfunction useTable(props: any, ctx: SetupContext) {\n  const ui = uiContext.get();\n  const tableRef = ref();\n  const toolbarRef = ref();\n  const containerRef = ref();\n  const { maxHeightRef, computeBodyHeight } = useFixedHeight(props, ctx, { tableRef, containerRef });\n  const { merge } = useMerge();\n  const tablePropRef = toRef(props, \"table\");\n  const computedTable = computed(() => {\n    // antdv naive 高度自适应， 如果用户有配置scroll，则优先使用用户配置的\n    let fixedHeight = {};\n    if (maxHeightRef?.value != null) {\n      fixedHeight = ui.table.buildMaxHeight(maxHeightRef.value);\n    }\n    const pAttrs = utils.dash.omit(tablePropRef, \"loading\", \"columns\", \"columnsMap\");\n\n    return merge(fixedHeight, { ...ctx.attrs, ...pAttrs });\n  });\n\n  const computedToolbar = toRef(props, \"toolbar\");\n\n  const computedCellSlots = computed(() => {\n    return slotFilter(ctx.slots, \"cell\");\n  });\n\n  const computedFormSlots = computed(() => {\n    return slotFilter(ctx.slots, \"form\");\n  });\n  const computedSearchSlots = computed(() => {\n    return slotFilter(ctx.slots, \"search\");\n  });\n  const computedToolbarSlots = computed(() => {\n    return slotFilter(ctx.slots, \"toolbar\");\n  });\n\n  const formWrapperRef = ref();\n\n  const computedClass = computed(() => {\n    const clazz: any = { compact: props.toolbar.compact !== false };\n    if (props.customClass) {\n      clazz[props.customClass] = true;\n    }\n    return clazz;\n  });\n\n  const innerWrapperRef = ref();\n\n  const isFormInner = ref(false);\n  const onFormInnerChange = (value: any) => {\n    isFormInner.value = value;\n  };\n\n  return {\n    tableRef,\n    containerRef,\n    toolbarRef,\n    computedTable,\n    computedToolbar,\n    computedCellSlots,\n    formWrapperRef,\n    isFormInner,\n    onFormInnerChange,\n    computedFormSlots,\n    computedSearchSlots,\n    computedToolbarSlots,\n    computeBodyHeight,\n    computedClass,\n    innerWrapperRef\n  };\n}\n\n/**\n * fs-crud\n */\nexport default defineComponent({\n  name: \"FsCrud\",\n  inheritAttrs: false,\n  props: {\n    /**\n     * 表格配置，见FsTable\n     */\n    table: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 表格数据\n     */\n    // eslint-disable-next-line vue/require-default-prop\n    data: {\n      type: Array\n    },\n    /**\n     * 操作列配置，见FsRowHandle\n     */\n    rowHandle: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查询框配置，见FsSearch\n     */\n    search: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 工具条配置，见FsToolbar\n     */\n    toolbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 动作条配置，见FsActionbar\n     */\n    actionbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * tabs filter\n     */\n    tabs: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 添加表单对话框配置，见FsFormWrapper\n     */\n    addForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 编辑表单对话框配置，见FsFormWrapper\n     */\n    editForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查看表单对话框配置，见FsFormWrapper\n     */\n    viewForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 翻页配置,支持el-pagination|a-pagination配置\n     */\n    pagination: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 容器配置，见FsContainer\n     */\n    container: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * crud包裹容器的class\n     */\n    customClass: {},\n    /**\n     * 不要传到fs-table去\n     */\n    form: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * 可选择\n     */\n    selection: {\n      type: Object as PropType<RowSelectionProps>,\n      default() {\n        return { show: false };\n      }\n    }\n  },\n  emits: [\"update:search\", \"update:compact\", \"update:columns\", \"form-value-change\", \"update:modelValue\", \"tab-change\"],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    useProviders(props, ctx);\n    const search = useSearch(props, ctx);\n    const tabs = useTabs(search, props, ctx);\n    const table = useTable(props, ctx);\n    return {\n      ui,\n      ...search,\n      ...table,\n      ...tabs\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n//作为数据表格使用的预设样式，隐藏footer，表格高度碎记录数增加而增加\n.fs-crud-as-table {\n  min-height: 0 !important;\n  height: unset;\n\n  .fs-crud-footer {\n    display: none;\n  }\n\n  .box .inner {\n    position: static;\n  }\n}\n\n.fs-crud-container {\n  min-height: 300px;\n\n  &.compact {\n    .el-table--border {\n      border-left: 0;\n    }\n\n    .fs-crud-header {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n\n    .fs-crud-footer {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n  }\n\n  .fs-crud-header {\n    display: flex;\n    padding: 10px 0;\n    flex-wrap: wrap;\n\n    .fs-header-top {\n      width: 100%;\n    }\n\n    .fs-crud-search {\n      width: 100%;\n      grid-column: span 2;\n      padding-bottom: 5px;\n    }\n\n    .fs-header-middle {\n      width: 100%;\n    }\n\n    .fs-header-bottom {\n      width: 100%;\n    }\n\n    .fs-crud-actionbar {\n      // padding-top: 5px;\n      display: flex;\n      flex: 10000;\n      align-items: center;\n      min-width: 1px;\n    }\n\n    .fs-crud-toolbar {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-right: 10px;\n      flex: 1;\n    }\n  }\n\n  .fs-crud-table {\n    height: 100%;\n    width: 100%;\n  }\n\n  .fs-crud-footer {\n    padding: 10px 0;\n\n    .fs-crud-pagination {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n\n      .fs-pagination-left {\n        margin-right: 10px;\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n\n      .fs-pagination {\n        flex: 1;\n\n        .ant-pagination-options {\n          .ant-select {\n            width: auto;\n          }\n        }\n\n        .el-pagination {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"container?.is || 'fs-layout-default'\"\n    ref=\"containerRef\"\n    class=\"fs-crud-container\"\n    v-bind=\"container\"\n    :class=\"computedClass\"\n  >\n    <slot></slot>\n\n    <template #header-top>\n      <slot name=\"header-top\"></slot>\n    </template>\n    <template #header-bottom>\n      <slot name=\"header-bottom\"></slot>\n    </template>\n    <template #header-middle>\n      <slot name=\"header-middle\"></slot>\n    </template>\n\n    <template #search>\n      <div class=\"fs-crud-search\">\n        <component :is=\"search.is || 'fs-search'\" ref=\"searchRef\" v-bind=\"search\" :slots=\"computedSearchSlots\" />\n      </div>\n    </template>\n\n    <template #actionbar>\n      <div v-if=\"actionbar && actionbar.show !== false\" class=\"fs-crud-actionbar\">\n        <slot name=\"actionbar-left\"></slot>\n        <fs-actionbar v-bind=\"actionbar\" />\n        <slot name=\"actionbar-right\"></slot>\n      </div>\n    </template>\n\n    <template #toolbar>\n      <div v-if=\"toolbar && toolbar.show !== false\" class=\"fs-crud-toolbar\">\n        <slot name=\"toolbar-left\"></slot>\n        <fs-toolbar ref=\"toolbarRef\" v-bind=\"toolbar\" :slots=\"computedToolbarSlots\" :columns=\"table.columns\" />\n        <slot name=\"toolbar-right\"></slot>\n      </div>\n    </template>\n    <template #tabs>\n      <fs-tabs-filter v-if=\"tabsBinding.show\" ref=\"tabsRef\" class=\"fs-tabs\" v-bind=\"tabsBinding\" />\n    </template>\n    <template #table>\n      <fs-table\n        ref=\"tableRef\"\n        class=\"fs-crud-table\"\n        v-bind=\"computedTable\"\n        :columns=\"table.columns\"\n        :loading=\"table.loading\"\n        :row-handle=\"rowHandle\"\n        :data=\"data\"\n        :cell-slots=\"computedCellSlots\"\n      />\n    </template>\n\n    <template #form>\n      <div ref=\"innerWrapperRef\" class=\"fs-form-wrapper-container\" :class=\"{ 'fs-form-inner-wrapper': isFormInner }\">\n        <fs-form-wrapper\n          ref=\"formWrapperRef\"\n          :slots=\"computedFormSlots\"\n          :inner-wrapper=\"innerWrapperRef\"\n          @inner-change=\"onFormInnerChange\"\n          @value-change=\"$emit('form-value-change', $event)\"\n        />\n        <!-- 编辑对话框 -->\n      </div>\n    </template>\n\n    <template #pagination>\n      <div class=\"fs-crud-pagination\">\n        <div class=\"fs-pagination-left\">\n          <slot name=\"pagination-left\"></slot>\n        </div>\n        <div class=\"fs-pagination\">\n          <component :is=\"ui.pagination.name\" v-if=\"pagination.show !== false\" v-bind=\"pagination\" />\n        </div>\n        <div class=\"fs-pagination-right\">\n          <slot name=\"pagination-right\"></slot>\n        </div>\n      </div>\n    </template>\n\n    <template #footer-top>\n      <slot name=\"footer-top\"></slot>\n    </template>\n    <template #footer-bottom>\n      <slot name=\"footer-bottom\"></slot>\n    </template>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, PropType, provide, ref, SetupContext, toRef } from \"vue\";\nimport _ from \"lodash-es\";\nimport { uiContext } from \"../ui\";\nimport { useMerge } from \"../use/use-merge\";\nimport utilLog from \"../utils/util.log\";\nimport { RowSelectionProps, SetSearchFormDataProps } from \"../d\";\nimport { useUi } from \"../use\";\nimport { utils } from \"../utils\";\nimport logger from \"../utils/util.log\";\n\nconst { merge } = useMerge();\n\nfunction useProviders(props: any, ctx: SetupContext) {\n  provide(\"get:columns\", () => {\n    return props.table.columns;\n  });\n  provide(\"update:columns\", (columns: any) => {\n    ctx.emit(\"update:columns\", columns);\n  });\n\n  provide(\"get:crudBinding\", () => {\n    return props;\n  });\n}\n\nfunction useSearch(props: any, ctx: SetupContext) {\n  const searchRef = ref();\n  const getSearchRef = () => {\n    return searchRef.value;\n  };\n\n  const getSearchFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getForm();\n    }\n    logger.warn(\"请使用expose.getSearchFormData代替\");\n    return {};\n  };\n\n  const getSearchValidatedFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getValidatedForm();\n    }\n    logger.warn(\"请使用expose.getSearchValidatedFormData代替\");\n    return {};\n  };\n\n  /**\n   * 设置form值\n   * @param form form对象\n   * @param opts = {\n   *    isMerge:false 是否与原有form值合并,\n   * }\n   */\n  function setSearchFormData({ form, mergeForm = false }: SetSearchFormDataProps) {\n    if (searchRef.value) {\n      searchRef.value.setForm(form, mergeForm);\n    }\n  }\n\n  return {\n    searchRef,\n    getSearchRef,\n    getSearchFormData,\n    setSearchFormData,\n    getSearchValidatedFormData\n  };\n}\n\nfunction useTabs(searchRet: any, props: any, ctx: SetupContext) {\n  const tabsBinding = computed(() => {\n    if (props.tabs && props.tabs.show && props.tabs.name) {\n      let dict = null;\n      const defaultTabs = { ...props.tabs };\n      if (props.search?.columns && props.search?.columns[props.tabs.name]?.component?.dict) {\n        dict = props.search?.columns[props.tabs.name]?.component?.dict;\n        if (defaultTabs.value == null) {\n          defaultTabs.value = dict.value;\n        }\n        if (defaultTabs.label == null) {\n          defaultTabs.label = dict.label;\n        }\n        if (defaultTabs.options == null) {\n          defaultTabs.options = dict.data || [];\n        }\n      }\n\n      return {\n        ...defaultTabs,\n        modelValue: props.search.validatedForm && props.search.validatedForm[props.tabs.name],\n        \"onUpdate:modelValue\": (value: any) => {\n          ctx.emit(\"tab-change\", { [props.tabs.name]: value });\n        }\n      };\n    }\n    return {\n      show: false\n    };\n  });\n  return {\n    tabsBinding\n  };\n}\n\nfunction slotFilter(ctxSlots: any, keyPrefix: string) {\n  if (!ctxSlots) {\n    return {};\n  }\n  const slots: any = {};\n  _.forEach(ctxSlots, (value, key) => {\n    if (key.startsWith(keyPrefix)) {\n      slots[key] = value;\n    }\n  });\n  return slots;\n}\n\nfunction useFixedHeight(props: any, ctx: SetupContext, { tableRef, containerRef }: any) {\n  const ui = uiContext.get();\n  if (ui.table.hasMaxHeight(props.table)) {\n    return {};\n  }\n  if (!ui.table.fixedHeaderNeedComputeBodyHeight) {\n    return {};\n  }\n  const maxHeightRef = ref(null);\n\n  function computeBodyHeight() {\n    const tableDom = tableRef?.value?.$el;\n    if (tableDom == null || tableDom.querySelector == null) {\n      return;\n    }\n    const headDom = tableDom.querySelector(ui.table.headerDomSelector);\n    if (headDom == null) {\n      return;\n    }\n    const tableHeight = tableDom.getBoundingClientRect().height;\n    const headHeight = headDom.getBoundingClientRect().height;\n    maxHeightRef.value = tableHeight - headHeight - 2 + (props.table.maxHeightAdjust || 0);\n\n    utilLog.debug(\"table max height recomputed \", maxHeightRef.value);\n  }\n\n  function watchBodyHeightChange() {\n    const tableDom = tableRef.value.$el;\n    if (tableDom == null) {\n      return;\n    }\n    const tableWrapperDom = tableDom.parentNode;\n\n    const observer = new ResizeObserver(function (entries) {\n      utilLog.debug(\"table resized\", entries);\n      // 每次被观测的元素尺寸发生改变这里都会执行\n      if (entries.length > 0 && entries[0].contentRect.height > 0) {\n        computeBodyHeight();\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 200);\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 500);\n      }\n    });\n    observer.observe(tableWrapperDom); // 观测DOM元素\n  }\n\n  onMounted(async () => {\n    await nextTick();\n    await nextTick();\n    watchBodyHeightChange();\n  });\n  return { maxHeightRef, computeBodyHeight };\n}\n\nfunction useTable(props: any, ctx: SetupContext) {\n  const ui = uiContext.get();\n  const tableRef = ref();\n  const toolbarRef = ref();\n  const containerRef = ref();\n  const { maxHeightRef, computeBodyHeight } = useFixedHeight(props, ctx, { tableRef, containerRef });\n  const { merge } = useMerge();\n  const tablePropRef = toRef(props, \"table\");\n  const computedTable = computed(() => {\n    // antdv naive 高度自适应， 如果用户有配置scroll，则优先使用用户配置的\n    let fixedHeight = {};\n    if (maxHeightRef?.value != null) {\n      fixedHeight = ui.table.buildMaxHeight(maxHeightRef.value);\n    }\n    const pAttrs = utils.dash.omit(tablePropRef, \"loading\", \"columns\", \"columnsMap\");\n\n    return merge(fixedHeight, { ...ctx.attrs, ...pAttrs });\n  });\n\n  const computedToolbar = toRef(props, \"toolbar\");\n\n  const computedCellSlots = computed(() => {\n    return slotFilter(ctx.slots, \"cell\");\n  });\n\n  const computedFormSlots = computed(() => {\n    return slotFilter(ctx.slots, \"form\");\n  });\n  const computedSearchSlots = computed(() => {\n    return slotFilter(ctx.slots, \"search\");\n  });\n  const computedToolbarSlots = computed(() => {\n    return slotFilter(ctx.slots, \"toolbar\");\n  });\n\n  const formWrapperRef = ref();\n\n  const computedClass = computed(() => {\n    const clazz: any = { compact: props.toolbar.compact !== false };\n    if (props.customClass) {\n      clazz[props.customClass] = true;\n    }\n    return clazz;\n  });\n\n  const innerWrapperRef = ref();\n\n  const isFormInner = ref(false);\n  const onFormInnerChange = (value: any) => {\n    isFormInner.value = value;\n  };\n\n  return {\n    tableRef,\n    containerRef,\n    toolbarRef,\n    computedTable,\n    computedToolbar,\n    computedCellSlots,\n    formWrapperRef,\n    isFormInner,\n    onFormInnerChange,\n    computedFormSlots,\n    computedSearchSlots,\n    computedToolbarSlots,\n    computeBodyHeight,\n    computedClass,\n    innerWrapperRef\n  };\n}\n\n/**\n * fs-crud\n */\nexport default defineComponent({\n  name: \"FsCrud\",\n  inheritAttrs: false,\n  props: {\n    /**\n     * 表格配置，见FsTable\n     */\n    table: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 表格数据\n     */\n    // eslint-disable-next-line vue/require-default-prop\n    data: {\n      type: Array\n    },\n    /**\n     * 操作列配置，见FsRowHandle\n     */\n    rowHandle: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查询框配置，见FsSearch\n     */\n    search: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 工具条配置，见FsToolbar\n     */\n    toolbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 动作条配置，见FsActionbar\n     */\n    actionbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * tabs filter\n     */\n    tabs: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 添加表单对话框配置，见FsFormWrapper\n     */\n    addForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 编辑表单对话框配置，见FsFormWrapper\n     */\n    editForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查看表单对话框配置，见FsFormWrapper\n     */\n    viewForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 翻页配置,支持el-pagination|a-pagination配置\n     */\n    pagination: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 容器配置，见FsContainer\n     */\n    container: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * crud包裹容器的class\n     */\n    customClass: {},\n    /**\n     * 不要传到fs-table去\n     */\n    form: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * 可选择\n     */\n    selection: {\n      type: Object as PropType<RowSelectionProps>,\n      default() {\n        return { show: false };\n      }\n    }\n  },\n  emits: [\"update:search\", \"update:compact\", \"update:columns\", \"form-value-change\", \"update:modelValue\", \"tab-change\"],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    useProviders(props, ctx);\n    const search = useSearch(props, ctx);\n    const tabs = useTabs(search, props, ctx);\n    const table = useTable(props, ctx);\n    return {\n      ui,\n      ...search,\n      ...table,\n      ...tabs\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n//作为数据表格使用的预设样式，隐藏footer，表格高度碎记录数增加而增加\n.fs-crud-as-table {\n  min-height: 0 !important;\n  height: unset;\n\n  .fs-crud-footer {\n    display: none;\n  }\n\n  .box .inner {\n    position: static;\n  }\n}\n\n.fs-crud-container {\n  min-height: 300px;\n\n  &.compact {\n    .el-table--border {\n      border-left: 0;\n    }\n\n    .fs-crud-header {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n\n    .fs-crud-footer {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n  }\n\n  .fs-crud-header {\n    display: flex;\n    padding: 10px 0;\n    flex-wrap: wrap;\n\n    .fs-header-top {\n      width: 100%;\n    }\n\n    .fs-crud-search {\n      width: 100%;\n      grid-column: span 2;\n      padding-bottom: 5px;\n    }\n\n    .fs-header-middle {\n      width: 100%;\n    }\n\n    .fs-header-bottom {\n      width: 100%;\n    }\n\n    .fs-crud-actionbar {\n      // padding-top: 5px;\n      display: flex;\n      flex: 10000;\n      align-items: center;\n      min-width: 1px;\n    }\n\n    .fs-crud-toolbar {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-right: 10px;\n      flex: 1;\n    }\n  }\n\n  .fs-crud-table {\n    height: 100%;\n    width: 100%;\n  }\n\n  .fs-crud-footer {\n    padding: 10px 0;\n\n    .fs-crud-pagination {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n\n      .fs-pagination-left {\n        margin-right: 10px;\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n\n      .fs-pagination {\n        flex: 1;\n\n        .ant-pagination-options {\n          .ant-select {\n            width: auto;\n          }\n        }\n\n        .el-pagination {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-row-handle\">\n    <slot name=\"cell-rowHandle-left\" v-bind=\"scope\"></slot>\n    <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n      <fs-button\n        v-if=\"item.show !== false && !isDropdownBtn(item, index)\"\n        class=\"row-handle-btn\"\n        v-bind=\"item\"\n        @click.stop=\"doClick(item)\"\n      />\n    </template>\n    <slot name=\"cell-rowHandle-middle\" v-bind=\"scope\"></slot>\n    <!-- 下拉按钮菜单 -->\n    <span v-if=\"hasDropdownBtn\" class=\"row-handle-btn fs-handle-row-dropdown\">\n      <component :is=\"ui.dropdown.name\" v-bind=\"computedDropdownBinding\">\n        <fs-button v-bind=\"dropdown.more\" />\n        <template #[ui.dropdown.slotName]>\n          <component\n            :is=\"ui.dropdownMenu.name\"\n            v-if=\"ui.dropdown.renderMode === 'slot'\"\n            v-bind=\"ui.dropdownMenu.command(doDropdownItemClick)\"\n          >\n            <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n              <component\n                :is=\"ui.dropdownItem.name\"\n                v-if=\"item.show !== false && isDropdownBtn(item, index)\"\n                :[ui.dropdownItem.command]=\"item.key\"\n              >\n                <div class=\"fs-row-handle-dropdown-item\" v-bind=\"item\">\n                  <fs-icon v-if=\"item.icon\" :icon=\"item.icon\" /> {{ item.text || item.title }}\n                </div>\n              </component>\n            </template>\n          </component>\n        </template>\n      </component>\n    </span>\n    <slot name=\"cell-rowHandle-right\" v-bind=\"scope\"></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport _ from \"lodash-es\";\nimport traceUtil from \"../../utils/util.trace\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ScopeContext } from \"../../d\";\nimport { useMerge } from \"../../use\";\n\n/**\n * 操作列配置\n */\nexport default defineComponent({\n  name: \"FsRowHandle\",\n  props: {\n    /**\n     * 按钮折叠配置\n     */\n    dropdown: {\n      type: Object\n    },\n    /**\n     * 按钮配置\n     * {\n     *   view:{...FsButton,click:Function,order:1},\n     *   edit:{...FsButton,click:Function,order:2},\n     *   remove:{...FsButton,click:Function,order:3},\n     *   ...自定义\n     * }\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 按钮分组,上面的buttons为默认分组\n     *  {\n     *    groupKey:{buttonKey:{},buttonKey2:{}}\n     *  }\n     */\n    group: {\n      type: Object\n    },\n    /**\n     * 当前激活分组\n     */\n    active: {\n      type: String,\n      default: \"default\"\n    },\n    /**\n     * scope\n     */\n    scope: {}\n  },\n  emits: [\"handle\"],\n  setup(props: any, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const { t } = useI18n();\n    const doClick = (item: any) => {\n      const index = props.scope[ui.tableColumn.index];\n      const row = props.scope[ui.tableColumn.row];\n      const e: ScopeContext = { key: item.key, row, btn: item, index, ...props.scope };\n      if (item.click) {\n        return item.click(e);\n      }\n      ctx.emit(\"handle\", e);\n    };\n    const { doComputed } = useCompute();\n    const pickedProps = computed(() => {\n      return {\n        dropdown: props.dropdown,\n        buttons: props.buttons,\n        active: props.active,\n        group: props.group\n      };\n    });\n    const computeProps = doComputed(\n      () => {\n        return pickedProps.value;\n      },\n      () => {\n        const index = props.scope[ui.tableColumn.index];\n        const row = props.scope[ui.tableColumn.row];\n        return { ...props.scope, index, row };\n      }\n    );\n\n    //const computeProps = { value: props };\n    const computedHandleBtns = computed(() => {\n      let mergedBtns = null;\n      if (computeProps.value.active == null || computeProps.value.active === \"default\") {\n        const defBtns = {\n          view: {\n            key: \"view\",\n            text: t(\"fs.rowHandle.view.text\"),\n            title: t(\"fs.rowHandle.view.text\")\n          },\n          edit: {\n            key: \"edit\",\n            type: \"primary\",\n            text: t(\"fs.rowHandle.edit.text\"),\n            title: t(\"fs.rowHandle.edit.text\")\n          },\n          remove: {\n            key: \"remove\",\n            ...ui.button.colors(\"danger\"),\n            text: t(\"fs.rowHandle.remove.text\"),\n            title: t(\"fs.rowHandle.remove.text\")\n          }\n        };\n        mergedBtns = merge(defBtns, computeProps.value.buttons);\n      } else {\n        mergedBtns = computeProps.value.group[computeProps.value.active];\n      }\n\n      const btns: ButtonProps[] = [];\n      _.forEach(mergedBtns, (item, key) => {\n        item.key = key;\n        if (item.show === false) {\n          return;\n        }\n        btns.push(item);\n      });\n\n      return _.sortBy(btns, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n    });\n\n    const computedDropdownAtLeast = computed(() => {\n      if (\n        computeProps.value.dropdown == null ||\n        computeProps.value.dropdown.atLeast == null ||\n        computeProps.value.dropdown.atLeast <= 0 ||\n        computedHandleBtns.value.length <= computeProps.value.dropdown.atLeast\n      ) {\n        return 0;\n      }\n      return computeProps.value.dropdown.atLeast || 0;\n    });\n    function isDropdownBtn(item: any, index: number) {\n      if (item.dropdown === true) {\n        return true;\n      }\n      if (computedDropdownAtLeast.value > 0 && computedDropdownAtLeast.value < index) {\n        return true;\n      }\n      return false;\n    }\n    const hasDropdownBtn = computed(() => {\n      let index = 0;\n      for (const item of computedHandleBtns.value) {\n        const is = isDropdownBtn(item, index);\n        if (is) {\n          return true;\n        }\n        index++;\n      }\n      return false;\n    });\n\n    function doDropdownItemClick($event: any) {\n      for (let btn of computedHandleBtns.value) {\n        if ($event === btn.key) {\n          doClick(btn);\n          return;\n        }\n      }\n    }\n\n    const computedDropdownBinding = computed(() => {\n      const binding: any = {};\n      if (ui.dropdown.renderMode !== \"slot\") {\n        // naive 通过options配置来显示子项\n        const btns = computedHandleBtns.value;\n        const opts: ButtonProps[] = [];\n        _.forEach(btns, (value, index) => {\n          if (value.show !== false && isDropdownBtn(value, index)) {\n            opts.push({\n              [ui.dropdown.value]: value.key,\n              [ui.dropdown.label]: value.text,\n              title: value.title\n            });\n          }\n        });\n        binding.options = opts;\n      }\n      return {\n        ..._.omit(props.dropdown, \"more\", \"atLeast\"),\n        ...ui.dropdown.command(doDropdownItemClick),\n        ...binding\n      };\n    });\n\n    return {\n      ui,\n      hasDropdownBtn,\n      computedHandleBtns,\n      doDropdownItemClick,\n      computedDropdownAtLeast,\n      doClick,\n      isDropdownBtn,\n      computedDropdownBinding\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-row-handle {\n  // display: flex ; // 这里不能用flex，否则会破坏align:center配置\n  flex-wrap: wrap;\n  .el-button + .el-button {\n    margin-left: 2px;\n  }\n  & > * {\n    margin: 2px;\n    display: inline-flex;\n    align-items: baseline;\n  }\n  .fs-row-handle-dropdown-item {\n    display: flex;\n  }\n\n  .n-button {\n    align-items: center;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-row-handle\">\n    <slot name=\"cell-rowHandle-left\" v-bind=\"scope\"></slot>\n    <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n      <fs-button\n        v-if=\"item.show !== false && !isDropdownBtn(item, index)\"\n        class=\"row-handle-btn\"\n        v-bind=\"item\"\n        @click.stop=\"doClick(item)\"\n      />\n    </template>\n    <slot name=\"cell-rowHandle-middle\" v-bind=\"scope\"></slot>\n    <!-- 下拉按钮菜单 -->\n    <span v-if=\"hasDropdownBtn\" class=\"row-handle-btn fs-handle-row-dropdown\">\n      <component :is=\"ui.dropdown.name\" v-bind=\"computedDropdownBinding\">\n        <fs-button v-bind=\"dropdown.more\" />\n        <template #[ui.dropdown.slotName]>\n          <component\n            :is=\"ui.dropdownMenu.name\"\n            v-if=\"ui.dropdown.renderMode === 'slot'\"\n            v-bind=\"ui.dropdownMenu.command(doDropdownItemClick)\"\n          >\n            <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n              <component\n                :is=\"ui.dropdownItem.name\"\n                v-if=\"item.show !== false && isDropdownBtn(item, index)\"\n                :[ui.dropdownItem.command]=\"item.key\"\n              >\n                <div class=\"fs-row-handle-dropdown-item\" v-bind=\"item\">\n                  <fs-icon v-if=\"item.icon\" :icon=\"item.icon\" /> {{ item.text || item.title }}\n                </div>\n              </component>\n            </template>\n          </component>\n        </template>\n      </component>\n    </span>\n    <slot name=\"cell-rowHandle-right\" v-bind=\"scope\"></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport _ from \"lodash-es\";\nimport traceUtil from \"../../utils/util.trace\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ScopeContext } from \"../../d\";\nimport { useMerge } from \"../../use\";\n\n/**\n * 操作列配置\n */\nexport default defineComponent({\n  name: \"FsRowHandle\",\n  props: {\n    /**\n     * 按钮折叠配置\n     */\n    dropdown: {\n      type: Object\n    },\n    /**\n     * 按钮配置\n     * {\n     *   view:{...FsButton,click:Function,order:1},\n     *   edit:{...FsButton,click:Function,order:2},\n     *   remove:{...FsButton,click:Function,order:3},\n     *   ...自定义\n     * }\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 按钮分组,上面的buttons为默认分组\n     *  {\n     *    groupKey:{buttonKey:{},buttonKey2:{}}\n     *  }\n     */\n    group: {\n      type: Object\n    },\n    /**\n     * 当前激活分组\n     */\n    active: {\n      type: String,\n      default: \"default\"\n    },\n    /**\n     * scope\n     */\n    scope: {}\n  },\n  emits: [\"handle\"],\n  setup(props: any, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const { t } = useI18n();\n    const doClick = (item: any) => {\n      const index = props.scope[ui.tableColumn.index];\n      const row = props.scope[ui.tableColumn.row];\n      const e: ScopeContext = { key: item.key, row, btn: item, index, ...props.scope };\n      if (item.click) {\n        return item.click(e);\n      }\n      ctx.emit(\"handle\", e);\n    };\n    const { doComputed } = useCompute();\n    const pickedProps = computed(() => {\n      return {\n        dropdown: props.dropdown,\n        buttons: props.buttons,\n        active: props.active,\n        group: props.group\n      };\n    });\n    const computeProps = doComputed(\n      () => {\n        return pickedProps.value;\n      },\n      () => {\n        const index = props.scope[ui.tableColumn.index];\n        const row = props.scope[ui.tableColumn.row];\n        return { ...props.scope, index, row };\n      }\n    );\n\n    //const computeProps = { value: props };\n    const computedHandleBtns = computed(() => {\n      let mergedBtns = null;\n      if (computeProps.value.active == null || computeProps.value.active === \"default\") {\n        const defBtns = {\n          view: {\n            key: \"view\",\n            text: t(\"fs.rowHandle.view.text\"),\n            title: t(\"fs.rowHandle.view.text\")\n          },\n          edit: {\n            key: \"edit\",\n            type: \"primary\",\n            text: t(\"fs.rowHandle.edit.text\"),\n            title: t(\"fs.rowHandle.edit.text\")\n          },\n          remove: {\n            key: \"remove\",\n            ...ui.button.colors(\"danger\"),\n            text: t(\"fs.rowHandle.remove.text\"),\n            title: t(\"fs.rowHandle.remove.text\")\n          }\n        };\n        mergedBtns = merge(defBtns, computeProps.value.buttons);\n      } else {\n        mergedBtns = computeProps.value.group[computeProps.value.active];\n      }\n\n      const btns: ButtonProps[] = [];\n      _.forEach(mergedBtns, (item, key) => {\n        item.key = key;\n        if (item.show === false) {\n          return;\n        }\n        btns.push(item);\n      });\n\n      return _.sortBy(btns, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n    });\n\n    const computedDropdownAtLeast = computed(() => {\n      if (\n        computeProps.value.dropdown == null ||\n        computeProps.value.dropdown.atLeast == null ||\n        computeProps.value.dropdown.atLeast <= 0 ||\n        computedHandleBtns.value.length <= computeProps.value.dropdown.atLeast\n      ) {\n        return 0;\n      }\n      return computeProps.value.dropdown.atLeast || 0;\n    });\n    function isDropdownBtn(item: any, index: number) {\n      if (item.dropdown === true) {\n        return true;\n      }\n      if (computedDropdownAtLeast.value > 0 && computedDropdownAtLeast.value < index) {\n        return true;\n      }\n      return false;\n    }\n    const hasDropdownBtn = computed(() => {\n      let index = 0;\n      for (const item of computedHandleBtns.value) {\n        const is = isDropdownBtn(item, index);\n        if (is) {\n          return true;\n        }\n        index++;\n      }\n      return false;\n    });\n\n    function doDropdownItemClick($event: any) {\n      for (let btn of computedHandleBtns.value) {\n        if ($event === btn.key) {\n          doClick(btn);\n          return;\n        }\n      }\n    }\n\n    const computedDropdownBinding = computed(() => {\n      const binding: any = {};\n      if (ui.dropdown.renderMode !== \"slot\") {\n        // naive 通过options配置来显示子项\n        const btns = computedHandleBtns.value;\n        const opts: ButtonProps[] = [];\n        _.forEach(btns, (value, index) => {\n          if (value.show !== false && isDropdownBtn(value, index)) {\n            opts.push({\n              [ui.dropdown.value]: value.key,\n              [ui.dropdown.label]: value.text,\n              title: value.title\n            });\n          }\n        });\n        binding.options = opts;\n      }\n      return {\n        ..._.omit(props.dropdown, \"more\", \"atLeast\"),\n        ...ui.dropdown.command(doDropdownItemClick),\n        ...binding\n      };\n    });\n\n    return {\n      ui,\n      hasDropdownBtn,\n      computedHandleBtns,\n      doDropdownItemClick,\n      computedDropdownAtLeast,\n      doClick,\n      isDropdownBtn,\n      computedDropdownBinding\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-row-handle {\n  // display: flex ; // 这里不能用flex，否则会破坏align:center配置\n  flex-wrap: wrap;\n  .el-button + .el-button {\n    margin-left: 2px;\n  }\n  & > * {\n    margin: 2px;\n    display: inline-flex;\n    align-items: baseline;\n  }\n  .fs-row-handle-dropdown-item {\n    display: flex;\n  }\n\n  .n-button {\n    align-items: center;\n  }\n}\n</style>\n", "function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\n/* eslint no-console:0 */\nvar formatRegExp = /%[sdj%]/g;\nvar warning = function warning() {}; // don't print warning message when in production env or node runtime\n\nif (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n  warning = function warning(type, errors) {\n    if (typeof console !== 'undefined' && console.warn && typeof ASYNC_VALIDATOR_NO_WARNING === 'undefined') {\n      if (errors.every(function (e) {\n        return typeof e === 'string';\n      })) {\n        console.warn(type, errors);\n      }\n    }\n  };\n}\n\nfunction convertFieldsError(errors) {\n  if (!errors || !errors.length) return null;\n  var fields = {};\n  errors.forEach(function (error) {\n    var field = error.field;\n    fields[field] = fields[field] || [];\n    fields[field].push(error);\n  });\n  return fields;\n}\nfunction format(template) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  var i = 0;\n  var len = args.length;\n\n  if (typeof template === 'function') {\n    return template.apply(null, args);\n  }\n\n  if (typeof template === 'string') {\n    var str = template.replace(formatRegExp, function (x) {\n      if (x === '%%') {\n        return '%';\n      }\n\n      if (i >= len) {\n        return x;\n      }\n\n      switch (x) {\n        case '%s':\n          return String(args[i++]);\n\n        case '%d':\n          return Number(args[i++]);\n\n        case '%j':\n          try {\n            return JSON.stringify(args[i++]);\n          } catch (_) {\n            return '[Circular]';\n          }\n\n          break;\n\n        default:\n          return x;\n      }\n    });\n    return str;\n  }\n\n  return template;\n}\n\nfunction isNativeStringType(type) {\n  return type === 'string' || type === 'url' || type === 'hex' || type === 'email' || type === 'date' || type === 'pattern';\n}\n\nfunction isEmptyValue(value, type) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n\n  if (type === 'array' && Array.isArray(value) && !value.length) {\n    return true;\n  }\n\n  if (isNativeStringType(type) && typeof value === 'string' && !value) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction asyncParallelArray(arr, func, callback) {\n  var results = [];\n  var total = 0;\n  var arrLength = arr.length;\n\n  function count(errors) {\n    results.push.apply(results, errors || []);\n    total++;\n\n    if (total === arrLength) {\n      callback(results);\n    }\n  }\n\n  arr.forEach(function (a) {\n    func(a, count);\n  });\n}\n\nfunction asyncSerialArray(arr, func, callback) {\n  var index = 0;\n  var arrLength = arr.length;\n\n  function next(errors) {\n    if (errors && errors.length) {\n      callback(errors);\n      return;\n    }\n\n    var original = index;\n    index = index + 1;\n\n    if (original < arrLength) {\n      func(arr[original], next);\n    } else {\n      callback([]);\n    }\n  }\n\n  next([]);\n}\n\nfunction flattenObjArr(objArr) {\n  var ret = [];\n  Object.keys(objArr).forEach(function (k) {\n    ret.push.apply(ret, objArr[k] || []);\n  });\n  return ret;\n}\n\nvar AsyncValidationError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(AsyncValidationError, _Error);\n\n  function AsyncValidationError(errors, fields) {\n    var _this;\n\n    _this = _Error.call(this, 'Async Validation Error') || this;\n    _this.errors = errors;\n    _this.fields = fields;\n    return _this;\n  }\n\n  return AsyncValidationError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nfunction asyncMap(objArr, option, func, callback, source) {\n  if (option.first) {\n    var _pending = new Promise(function (resolve, reject) {\n      var next = function next(errors) {\n        callback(errors);\n        return errors.length ? reject(new AsyncValidationError(errors, convertFieldsError(errors))) : resolve(source);\n      };\n\n      var flattenArr = flattenObjArr(objArr);\n      asyncSerialArray(flattenArr, func, next);\n    });\n\n    _pending[\"catch\"](function (e) {\n      return e;\n    });\n\n    return _pending;\n  }\n\n  var firstFields = option.firstFields === true ? Object.keys(objArr) : option.firstFields || [];\n  var objArrKeys = Object.keys(objArr);\n  var objArrLength = objArrKeys.length;\n  var total = 0;\n  var results = [];\n  var pending = new Promise(function (resolve, reject) {\n    var next = function next(errors) {\n      results.push.apply(results, errors);\n      total++;\n\n      if (total === objArrLength) {\n        callback(results);\n        return results.length ? reject(new AsyncValidationError(results, convertFieldsError(results))) : resolve(source);\n      }\n    };\n\n    if (!objArrKeys.length) {\n      callback(results);\n      resolve(source);\n    }\n\n    objArrKeys.forEach(function (key) {\n      var arr = objArr[key];\n\n      if (firstFields.indexOf(key) !== -1) {\n        asyncSerialArray(arr, func, next);\n      } else {\n        asyncParallelArray(arr, func, next);\n      }\n    });\n  });\n  pending[\"catch\"](function (e) {\n    return e;\n  });\n  return pending;\n}\n\nfunction isErrorObj(obj) {\n  return !!(obj && obj.message !== undefined);\n}\n\nfunction getValue(value, path) {\n  var v = value;\n\n  for (var i = 0; i < path.length; i++) {\n    if (v == undefined) {\n      return v;\n    }\n\n    v = v[path[i]];\n  }\n\n  return v;\n}\n\nfunction complementError(rule, source) {\n  return function (oe) {\n    var fieldValue;\n\n    if (rule.fullFields) {\n      fieldValue = getValue(source, rule.fullFields);\n    } else {\n      fieldValue = source[oe.field || rule.fullField];\n    }\n\n    if (isErrorObj(oe)) {\n      oe.field = oe.field || rule.fullField;\n      oe.fieldValue = fieldValue;\n      return oe;\n    }\n\n    return {\n      message: typeof oe === 'function' ? oe() : oe,\n      fieldValue: fieldValue,\n      field: oe.field || rule.fullField\n    };\n  };\n}\nfunction deepMerge(target, source) {\n  if (source) {\n    for (var s in source) {\n      if (source.hasOwnProperty(s)) {\n        var value = source[s];\n\n        if (typeof value === 'object' && typeof target[s] === 'object') {\n          target[s] = _extends({}, target[s], value);\n        } else {\n          target[s] = value;\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nvar required$1 = function required(rule, value, source, errors, options, type) {\n  if (rule.required && (!source.hasOwnProperty(rule.field) || isEmptyValue(value, type || rule.type))) {\n    errors.push(format(options.messages.required, rule.fullField));\n  }\n};\n\n/**\n *  Rule for validating whitespace.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\n\nvar whitespace = function whitespace(rule, value, source, errors, options) {\n  if (/^\\s+$/.test(value) || value === '') {\n    errors.push(format(options.messages.whitespace, rule.fullField));\n  }\n};\n\n// https://github.com/kevva/url-regex/blob/master/index.js\nvar urlReg;\nvar getUrlRegex = (function () {\n  if (urlReg) {\n    return urlReg;\n  }\n\n  var word = '[a-fA-F\\\\d:]';\n\n  var b = function b(options) {\n    return options && options.includeBoundaries ? \"(?:(?<=\\\\s|^)(?=\" + word + \")|(?<=\" + word + \")(?=\\\\s|$))\" : '';\n  };\n\n  var v4 = '(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}';\n  var v6seg = '[a-fA-F\\\\d]{1,4}';\n  var v6 = (\"\\n(?:\\n(?:\" + v6seg + \":){7}(?:\" + v6seg + \"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\\n(?:\" + v6seg + \":){6}(?:\" + v4 + \"|:\" + v6seg + \"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\\n(?:\" + v6seg + \":){5}(?::\" + v4 + \"|(?::\" + v6seg + \"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\\n(?:\" + v6seg + \":){4}(?:(?::\" + v6seg + \"){0,1}:\" + v4 + \"|(?::\" + v6seg + \"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\\n(?:\" + v6seg + \":){3}(?:(?::\" + v6seg + \"){0,2}:\" + v4 + \"|(?::\" + v6seg + \"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\\n(?:\" + v6seg + \":){2}(?:(?::\" + v6seg + \"){0,3}:\" + v4 + \"|(?::\" + v6seg + \"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\\n(?:\" + v6seg + \":){1}(?:(?::\" + v6seg + \"){0,4}:\" + v4 + \"|(?::\" + v6seg + \"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\\n(?::(?:(?::\" + v6seg + \"){0,5}:\" + v4 + \"|(?::\" + v6seg + \"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\\n\").replace(/\\s*\\/\\/.*$/gm, '').replace(/\\n/g, '').trim(); // Pre-compile only the exact regexes because adding a global flag make regexes stateful\n\n  var v46Exact = new RegExp(\"(?:^\" + v4 + \"$)|(?:^\" + v6 + \"$)\");\n  var v4exact = new RegExp(\"^\" + v4 + \"$\");\n  var v6exact = new RegExp(\"^\" + v6 + \"$\");\n\n  var ip = function ip(options) {\n    return options && options.exact ? v46Exact : new RegExp(\"(?:\" + b(options) + v4 + b(options) + \")|(?:\" + b(options) + v6 + b(options) + \")\", 'g');\n  };\n\n  ip.v4 = function (options) {\n    return options && options.exact ? v4exact : new RegExp(\"\" + b(options) + v4 + b(options), 'g');\n  };\n\n  ip.v6 = function (options) {\n    return options && options.exact ? v6exact : new RegExp(\"\" + b(options) + v6 + b(options), 'g');\n  };\n\n  var protocol = \"(?:(?:[a-z]+:)?//)\";\n  var auth = '(?:\\\\S+(?::\\\\S*)?@)?';\n  var ipv4 = ip.v4().source;\n  var ipv6 = ip.v6().source;\n  var host = \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\";\n  var domain = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\";\n  var tld = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\";\n  var port = '(?::\\\\d{2,5})?';\n  var path = '(?:[/?#][^\\\\s\"]*)?';\n  var regex = \"(?:\" + protocol + \"|www\\\\.)\" + auth + \"(?:localhost|\" + ipv4 + \"|\" + ipv6 + \"|\" + host + domain + tld + \")\" + port + path;\n  urlReg = new RegExp(\"(?:^\" + regex + \"$)\", 'i');\n  return urlReg;\n});\n\n/* eslint max-len:0 */\n\nvar pattern$2 = {\n  // http://emailregex.com/\n  email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+\\.)+[a-zA-Z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]{2,}))$/,\n  // url: new RegExp(\n  //   '^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$',\n  //   'i',\n  // ),\n  hex: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/i\n};\nvar types = {\n  integer: function integer(value) {\n    return types.number(value) && parseInt(value, 10) === value;\n  },\n  \"float\": function float(value) {\n    return types.number(value) && !types.integer(value);\n  },\n  array: function array(value) {\n    return Array.isArray(value);\n  },\n  regexp: function regexp(value) {\n    if (value instanceof RegExp) {\n      return true;\n    }\n\n    try {\n      return !!new RegExp(value);\n    } catch (e) {\n      return false;\n    }\n  },\n  date: function date(value) {\n    return typeof value.getTime === 'function' && typeof value.getMonth === 'function' && typeof value.getYear === 'function' && !isNaN(value.getTime());\n  },\n  number: function number(value) {\n    if (isNaN(value)) {\n      return false;\n    }\n\n    return typeof value === 'number';\n  },\n  object: function object(value) {\n    return typeof value === 'object' && !types.array(value);\n  },\n  method: function method(value) {\n    return typeof value === 'function';\n  },\n  email: function email(value) {\n    return typeof value === 'string' && value.length <= 320 && !!value.match(pattern$2.email);\n  },\n  url: function url(value) {\n    return typeof value === 'string' && value.length <= 2048 && !!value.match(getUrlRegex());\n  },\n  hex: function hex(value) {\n    return typeof value === 'string' && !!value.match(pattern$2.hex);\n  }\n};\n\nvar type$1 = function type(rule, value, source, errors, options) {\n  if (rule.required && value === undefined) {\n    required$1(rule, value, source, errors, options);\n    return;\n  }\n\n  var custom = ['integer', 'float', 'array', 'regexp', 'object', 'method', 'email', 'number', 'date', 'url', 'hex'];\n  var ruleType = rule.type;\n\n  if (custom.indexOf(ruleType) > -1) {\n    if (!types[ruleType](value)) {\n      errors.push(format(options.messages.types[ruleType], rule.fullField, rule.type));\n    } // straight typeof check\n\n  } else if (ruleType && typeof value !== rule.type) {\n    errors.push(format(options.messages.types[ruleType], rule.fullField, rule.type));\n  }\n};\n\nvar range = function range(rule, value, source, errors, options) {\n  var len = typeof rule.len === 'number';\n  var min = typeof rule.min === 'number';\n  var max = typeof rule.max === 'number'; // 正则匹配码点范围从U+010000一直到U+10FFFF的文字（补充平面Supplementary Plane）\n\n  var spRegexp = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n  var val = value;\n  var key = null;\n  var num = typeof value === 'number';\n  var str = typeof value === 'string';\n  var arr = Array.isArray(value);\n\n  if (num) {\n    key = 'number';\n  } else if (str) {\n    key = 'string';\n  } else if (arr) {\n    key = 'array';\n  } // if the value is not of a supported type for range validation\n  // the validation rule rule should use the\n  // type property to also test for a particular type\n\n\n  if (!key) {\n    return false;\n  }\n\n  if (arr) {\n    val = value.length;\n  }\n\n  if (str) {\n    // 处理码点大于U+010000的文字length属性不准确的bug，如\"𠮷𠮷𠮷\".lenght !== 3\n    val = value.replace(spRegexp, '_').length;\n  }\n\n  if (len) {\n    if (val !== rule.len) {\n      errors.push(format(options.messages[key].len, rule.fullField, rule.len));\n    }\n  } else if (min && !max && val < rule.min) {\n    errors.push(format(options.messages[key].min, rule.fullField, rule.min));\n  } else if (max && !min && val > rule.max) {\n    errors.push(format(options.messages[key].max, rule.fullField, rule.max));\n  } else if (min && max && (val < rule.min || val > rule.max)) {\n    errors.push(format(options.messages[key].range, rule.fullField, rule.min, rule.max));\n  }\n};\n\nvar ENUM$1 = 'enum';\n\nvar enumerable$1 = function enumerable(rule, value, source, errors, options) {\n  rule[ENUM$1] = Array.isArray(rule[ENUM$1]) ? rule[ENUM$1] : [];\n\n  if (rule[ENUM$1].indexOf(value) === -1) {\n    errors.push(format(options.messages[ENUM$1], rule.fullField, rule[ENUM$1].join(', ')));\n  }\n};\n\nvar pattern$1 = function pattern(rule, value, source, errors, options) {\n  if (rule.pattern) {\n    if (rule.pattern instanceof RegExp) {\n      // if a RegExp instance is passed, reset `lastIndex` in case its `global`\n      // flag is accidentally set to `true`, which in a validation scenario\n      // is not necessary and the result might be misleading\n      rule.pattern.lastIndex = 0;\n\n      if (!rule.pattern.test(value)) {\n        errors.push(format(options.messages.pattern.mismatch, rule.fullField, value, rule.pattern));\n      }\n    } else if (typeof rule.pattern === 'string') {\n      var _pattern = new RegExp(rule.pattern);\n\n      if (!_pattern.test(value)) {\n        errors.push(format(options.messages.pattern.mismatch, rule.fullField, value, rule.pattern));\n      }\n    }\n  }\n};\n\nvar rules = {\n  required: required$1,\n  whitespace: whitespace,\n  type: type$1,\n  range: range,\n  \"enum\": enumerable$1,\n  pattern: pattern$1\n};\n\nvar string = function string(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value, 'string') && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options, 'string');\n\n    if (!isEmptyValue(value, 'string')) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n      rules.pattern(rule, value, source, errors, options);\n\n      if (rule.whitespace === true) {\n        rules.whitespace(rule, value, source, errors, options);\n      }\n    }\n  }\n\n  callback(errors);\n};\n\nvar method = function method(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar number = function number(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (value === '') {\n      value = undefined;\n    }\n\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar _boolean = function _boolean(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar regexp = function regexp(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (!isEmptyValue(value)) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar integer = function integer(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar floatFn = function floatFn(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar array = function array(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if ((value === undefined || value === null) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options, 'array');\n\n    if (value !== undefined && value !== null) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar object = function object(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar ENUM = 'enum';\n\nvar enumerable = function enumerable(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules[ENUM](rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar pattern = function pattern(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value, 'string') && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (!isEmptyValue(value, 'string')) {\n      rules.pattern(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar date = function date(rule, value, callback, source, options) {\n  // console.log('integer rule called %j', rule);\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field); // console.log('validate on %s value', value);\n\n  if (validate) {\n    if (isEmptyValue(value, 'date') && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (!isEmptyValue(value, 'date')) {\n      var dateObject;\n\n      if (value instanceof Date) {\n        dateObject = value;\n      } else {\n        dateObject = new Date(value);\n      }\n\n      rules.type(rule, dateObject, source, errors, options);\n\n      if (dateObject) {\n        rules.range(rule, dateObject.getTime(), source, errors, options);\n      }\n    }\n  }\n\n  callback(errors);\n};\n\nvar required = function required(rule, value, callback, source, options) {\n  var errors = [];\n  var type = Array.isArray(value) ? 'array' : typeof value;\n  rules.required(rule, value, source, errors, options, type);\n  callback(errors);\n};\n\nvar type = function type(rule, value, callback, source, options) {\n  var ruleType = rule.type;\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value, ruleType) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options, ruleType);\n\n    if (!isEmptyValue(value, ruleType)) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar any = function any(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n  }\n\n  callback(errors);\n};\n\nvar validators = {\n  string: string,\n  method: method,\n  number: number,\n  \"boolean\": _boolean,\n  regexp: regexp,\n  integer: integer,\n  \"float\": floatFn,\n  array: array,\n  object: object,\n  \"enum\": enumerable,\n  pattern: pattern,\n  date: date,\n  url: type,\n  hex: type,\n  email: type,\n  required: required,\n  any: any\n};\n\nfunction newMessages() {\n  return {\n    \"default\": 'Validation error on field %s',\n    required: '%s is required',\n    \"enum\": '%s must be one of %s',\n    whitespace: '%s cannot be empty',\n    date: {\n      format: '%s date %s is invalid for format %s',\n      parse: '%s date could not be parsed, %s is invalid ',\n      invalid: '%s date %s is invalid'\n    },\n    types: {\n      string: '%s is not a %s',\n      method: '%s is not a %s (function)',\n      array: '%s is not an %s',\n      object: '%s is not an %s',\n      number: '%s is not a %s',\n      date: '%s is not a %s',\n      \"boolean\": '%s is not a %s',\n      integer: '%s is not an %s',\n      \"float\": '%s is not a %s',\n      regexp: '%s is not a valid %s',\n      email: '%s is not a valid %s',\n      url: '%s is not a valid %s',\n      hex: '%s is not a valid %s'\n    },\n    string: {\n      len: '%s must be exactly %s characters',\n      min: '%s must be at least %s characters',\n      max: '%s cannot be longer than %s characters',\n      range: '%s must be between %s and %s characters'\n    },\n    number: {\n      len: '%s must equal %s',\n      min: '%s cannot be less than %s',\n      max: '%s cannot be greater than %s',\n      range: '%s must be between %s and %s'\n    },\n    array: {\n      len: '%s must be exactly %s in length',\n      min: '%s cannot be less than %s in length',\n      max: '%s cannot be greater than %s in length',\n      range: '%s must be between %s and %s in length'\n    },\n    pattern: {\n      mismatch: '%s value %s does not match pattern %s'\n    },\n    clone: function clone() {\n      var cloned = JSON.parse(JSON.stringify(this));\n      cloned.clone = this.clone;\n      return cloned;\n    }\n  };\n}\nvar messages = newMessages();\n\n/**\n *  Encapsulates a validation schema.\n *\n *  @param descriptor An object declaring validation rules\n *  for this schema.\n */\n\nvar Schema = /*#__PURE__*/function () {\n  // ========================= Static =========================\n  // ======================== Instance ========================\n  function Schema(descriptor) {\n    this.rules = null;\n    this._messages = messages;\n    this.define(descriptor);\n  }\n\n  var _proto = Schema.prototype;\n\n  _proto.define = function define(rules) {\n    var _this = this;\n\n    if (!rules) {\n      throw new Error('Cannot configure a schema with no rules');\n    }\n\n    if (typeof rules !== 'object' || Array.isArray(rules)) {\n      throw new Error('Rules must be an object');\n    }\n\n    this.rules = {};\n    Object.keys(rules).forEach(function (name) {\n      var item = rules[name];\n      _this.rules[name] = Array.isArray(item) ? item : [item];\n    });\n  };\n\n  _proto.messages = function messages(_messages) {\n    if (_messages) {\n      this._messages = deepMerge(newMessages(), _messages);\n    }\n\n    return this._messages;\n  };\n\n  _proto.validate = function validate(source_, o, oc) {\n    var _this2 = this;\n\n    if (o === void 0) {\n      o = {};\n    }\n\n    if (oc === void 0) {\n      oc = function oc() {};\n    }\n\n    var source = source_;\n    var options = o;\n    var callback = oc;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    if (!this.rules || Object.keys(this.rules).length === 0) {\n      if (callback) {\n        callback(null, source);\n      }\n\n      return Promise.resolve(source);\n    }\n\n    function complete(results) {\n      var errors = [];\n      var fields = {};\n\n      function add(e) {\n        if (Array.isArray(e)) {\n          var _errors;\n\n          errors = (_errors = errors).concat.apply(_errors, e);\n        } else {\n          errors.push(e);\n        }\n      }\n\n      for (var i = 0; i < results.length; i++) {\n        add(results[i]);\n      }\n\n      if (!errors.length) {\n        callback(null, source);\n      } else {\n        fields = convertFieldsError(errors);\n        callback(errors, fields);\n      }\n    }\n\n    if (options.messages) {\n      var messages$1 = this.messages();\n\n      if (messages$1 === messages) {\n        messages$1 = newMessages();\n      }\n\n      deepMerge(messages$1, options.messages);\n      options.messages = messages$1;\n    } else {\n      options.messages = this.messages();\n    }\n\n    var series = {};\n    var keys = options.keys || Object.keys(this.rules);\n    keys.forEach(function (z) {\n      var arr = _this2.rules[z];\n      var value = source[z];\n      arr.forEach(function (r) {\n        var rule = r;\n\n        if (typeof rule.transform === 'function') {\n          if (source === source_) {\n            source = _extends({}, source);\n          }\n\n          value = source[z] = rule.transform(value);\n        }\n\n        if (typeof rule === 'function') {\n          rule = {\n            validator: rule\n          };\n        } else {\n          rule = _extends({}, rule);\n        } // Fill validator. Skip if nothing need to validate\n\n\n        rule.validator = _this2.getValidationMethod(rule);\n\n        if (!rule.validator) {\n          return;\n        }\n\n        rule.field = z;\n        rule.fullField = rule.fullField || z;\n        rule.type = _this2.getType(rule);\n        series[z] = series[z] || [];\n        series[z].push({\n          rule: rule,\n          value: value,\n          source: source,\n          field: z\n        });\n      });\n    });\n    var errorFields = {};\n    return asyncMap(series, options, function (data, doIt) {\n      var rule = data.rule;\n      var deep = (rule.type === 'object' || rule.type === 'array') && (typeof rule.fields === 'object' || typeof rule.defaultField === 'object');\n      deep = deep && (rule.required || !rule.required && data.value);\n      rule.field = data.field;\n\n      function addFullField(key, schema) {\n        return _extends({}, schema, {\n          fullField: rule.fullField + \".\" + key,\n          fullFields: rule.fullFields ? [].concat(rule.fullFields, [key]) : [key]\n        });\n      }\n\n      function cb(e) {\n        if (e === void 0) {\n          e = [];\n        }\n\n        var errorList = Array.isArray(e) ? e : [e];\n\n        if (!options.suppressWarning && errorList.length) {\n          Schema.warning('async-validator:', errorList);\n        }\n\n        if (errorList.length && rule.message !== undefined) {\n          errorList = [].concat(rule.message);\n        } // Fill error info\n\n\n        var filledErrors = errorList.map(complementError(rule, source));\n\n        if (options.first && filledErrors.length) {\n          errorFields[rule.field] = 1;\n          return doIt(filledErrors);\n        }\n\n        if (!deep) {\n          doIt(filledErrors);\n        } else {\n          // if rule is required but the target object\n          // does not exist fail at the rule level and don't\n          // go deeper\n          if (rule.required && !data.value) {\n            if (rule.message !== undefined) {\n              filledErrors = [].concat(rule.message).map(complementError(rule, source));\n            } else if (options.error) {\n              filledErrors = [options.error(rule, format(options.messages.required, rule.field))];\n            }\n\n            return doIt(filledErrors);\n          }\n\n          var fieldsSchema = {};\n\n          if (rule.defaultField) {\n            Object.keys(data.value).map(function (key) {\n              fieldsSchema[key] = rule.defaultField;\n            });\n          }\n\n          fieldsSchema = _extends({}, fieldsSchema, data.rule.fields);\n          var paredFieldsSchema = {};\n          Object.keys(fieldsSchema).forEach(function (field) {\n            var fieldSchema = fieldsSchema[field];\n            var fieldSchemaList = Array.isArray(fieldSchema) ? fieldSchema : [fieldSchema];\n            paredFieldsSchema[field] = fieldSchemaList.map(addFullField.bind(null, field));\n          });\n          var schema = new Schema(paredFieldsSchema);\n          schema.messages(options.messages);\n\n          if (data.rule.options) {\n            data.rule.options.messages = options.messages;\n            data.rule.options.error = options.error;\n          }\n\n          schema.validate(data.value, data.rule.options || options, function (errs) {\n            var finalErrors = [];\n\n            if (filledErrors && filledErrors.length) {\n              finalErrors.push.apply(finalErrors, filledErrors);\n            }\n\n            if (errs && errs.length) {\n              finalErrors.push.apply(finalErrors, errs);\n            }\n\n            doIt(finalErrors.length ? finalErrors : null);\n          });\n        }\n      }\n\n      var res;\n\n      if (rule.asyncValidator) {\n        res = rule.asyncValidator(rule, data.value, cb, data.source, options);\n      } else if (rule.validator) {\n        try {\n          res = rule.validator(rule, data.value, cb, data.source, options);\n        } catch (error) {\n          console.error == null ? void 0 : console.error(error); // rethrow to report error\n\n          if (!options.suppressValidatorError) {\n            setTimeout(function () {\n              throw error;\n            }, 0);\n          }\n\n          cb(error.message);\n        }\n\n        if (res === true) {\n          cb();\n        } else if (res === false) {\n          cb(typeof rule.message === 'function' ? rule.message(rule.fullField || rule.field) : rule.message || (rule.fullField || rule.field) + \" fails\");\n        } else if (res instanceof Array) {\n          cb(res);\n        } else if (res instanceof Error) {\n          cb(res.message);\n        }\n      }\n\n      if (res && res.then) {\n        res.then(function () {\n          return cb();\n        }, function (e) {\n          return cb(e);\n        });\n      }\n    }, function (results) {\n      complete(results);\n    }, source);\n  };\n\n  _proto.getType = function getType(rule) {\n    if (rule.type === undefined && rule.pattern instanceof RegExp) {\n      rule.type = 'pattern';\n    }\n\n    if (typeof rule.validator !== 'function' && rule.type && !validators.hasOwnProperty(rule.type)) {\n      throw new Error(format('Unknown rule type %s', rule.type));\n    }\n\n    return rule.type || 'string';\n  };\n\n  _proto.getValidationMethod = function getValidationMethod(rule) {\n    if (typeof rule.validator === 'function') {\n      return rule.validator;\n    }\n\n    var keys = Object.keys(rule);\n    var messageIndex = keys.indexOf('message');\n\n    if (messageIndex !== -1) {\n      keys.splice(messageIndex, 1);\n    }\n\n    if (keys.length === 1 && keys[0] === 'required') {\n      return validators.required;\n    }\n\n    return validators[this.getType(rule)] || undefined;\n  };\n\n  return Schema;\n}();\n\nSchema.register = function register(type, validator) {\n  if (typeof validator !== 'function') {\n    throw new Error('Cannot register a validator by type, validator is not a function');\n  }\n\n  validators[type] = validator;\n};\n\nSchema.warning = warning;\nSchema.messages = messages;\nSchema.validators = validators;\n\nexport { Schema as default };\n//# sourceMappingURL=index.js.map\n", null, null, null, null, null, null, "<template>\n  <div class=\"fs-editable\">\n    <div v-if=\"!editing || disabled\" class=\"fs-editable-inner fs-editable-pointer\" v-bind=\"activeTrigger\">\n      <div class=\"fs-editable-input\">\n        <div v-if=\"dirty\" class=\"fs-editable-dirty\" />\n        <slot></slot>\n      </div>\n      <div v-if=\"trigger && !disabled\" class=\"fs-editable-action fs-editable-icon\">\n        <fs-icon :icon=\"ui.icons.edit\" />\n      </div>\n    </div>\n    <div v-else class=\"fs-editable-inner\" :class=\"{ 'fs-validate-error': hasError() }\">\n      <div class=\"fs-editable-input\">\n        <slot name=\"edit\"></slot>\n      </div>\n      <div class=\"fs-editable-action\">\n        <component :is=\"ui.tooltip.name\">\n          <template #[ui.tooltip.content]>\n            <span class=\"error-icon\">\n              {{ getValidateErrorMessage() }}\n            </span>\n          </template>\n          <template #[ui.tooltip.trigger]>\n            <fs-icon :class=\"{ hidden: !hasError(), 'error-icon': true }\" size=\"mini\" :icon=\"ui.icons.info\" />\n          </template>\n        </component>\n        <template v-if=\"showAction\">\n          <fs-icon v-if=\"loading\" size=\"mini\" :spin=\"true\" :icon=\"ui.icons.refresh\" />\n          <fs-icon v-else size=\"mini\" :icon=\"ui.icons.check\" @click=\"doSubmit\" />\n          <fs-icon :class=\"{ hidden: loading }\" size=\"mini\" :icon=\"ui.icons.close\" @click=\"doCancel\" />\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useUi } from \"@fast-crud/ui-interface\";\nimport { computed } from \"vue\";\n\ntype FsEditableProps = {\n  disabled?: boolean;\n  editing: boolean;\n  dirty?: boolean;\n  trigger?: \"onClick\" | \"onDbClick\" | false;\n  loading?: boolean;\n  showAction?: boolean;\n  validateErrors?: any[];\n};\nconst props = withDefaults(defineProps<FsEditableProps>(), {\n  disabled: false,\n  editing: false,\n  dirty: false,\n  loading: false,\n  showAction: true,\n  trigger: \"onClick\",\n  validateErrors: () => {\n    return [];\n  }\n});\n\nconst { ui } = useUi();\nconst emits = defineEmits([\"update:editing\", \"submit\", \"cancel\"]);\nconst activeTrigger = computed(() => {\n  if (!props.trigger) {\n    return {};\n  }\n  return {\n    [props.trigger]: () => {\n      emits(\"update:editing\", true);\n    }\n  };\n});\nfunction doSubmit() {\n  emits(\"submit\");\n}\nfunction doCancel() {\n  emits(\"cancel\");\n}\nfunction hasError() {\n  return props.validateErrors?.length > 0;\n}\nfunction getValidateErrorMessage() {\n  if (props.validateErrors?.length === 0) {\n    return;\n  }\n  return props.validateErrors?.map((item) => item.message).join(\",\");\n}\n</script>\n\n<style lang=\"less\">\n.fs-editable {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  .fs-editable-pointer {\n    cursor: pointer;\n  }\n  .fs-editable-inner {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    min-height: 23px;\n    .fs-editable-dirty {\n      border-radius: 100px;\n      width: 5px;\n      height: 5px;\n      margin-left: -5px;\n      background: red;\n    }\n    .fs-editable-input {\n      flex: 1;\n    }\n    .fs-editable-action {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-left: 10px;\n      i,\n      .anticon {\n        width: 20px;\n        text-align: center;\n        font-size: 16px;\n        cursor: pointer;\n      }\n      .hidden {\n        visibility: hidden;\n      }\n    }\n\n    .fs-editable-icon {\n      visibility: hidden;\n    }\n    &:hover .fs-editable-icon {\n      visibility: visible;\n    }\n\n    .el-radio {\n      margin-right: 5px;\n      .el-radio__label {\n        padding: 2px;\n      }\n    }\n\n    &.fs-validate-error {\n      .error-icon {\n        color: #ff4d4f;\n      }\n      .ant-input-affix-wrapper {\n        border-color: #ff4d4f;\n        box-shadow: 0 0 0 2px rgb(255 38 5 / 6%);\n      }\n      .el-input__wrapper {\n        border-color: #ff4d4f !important;\n        box-shadow: 0 0 0 1px #ff4d4f inset !important;\n      }\n      .n-input .n-input__state-border {\n        border-color: #ff4d4f !important;\n        box-shadow: 0 0 0 2px rgb(255 38 5 / 6%);\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-actionbar\">\n    <template v-for=\"(value, key) in computedButtons\" :key=\"key\">\n      <fs-button v-if=\"value.show !== false\" v-bind=\"value\" @click=\"onClick(key, value, $event)\" />\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, computed, Ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ActionbarClickEvent, ButtonsProps } from \"../../d\";\n\nexport default defineComponent({\n  name: \"FsActionbar\",\n  props: {\n    /**\n     * 按钮配置\n     * {\n     *  add:{\n     *    ...FsButton,\n     *    show:true\n     *  },\n     *  custom:{...}\n     * }\n     */\n    buttons: {}\n  } as any,\n  emits: [\"action\"],\n  setup(props, ctx: any) {\n    function onClick(key: any, btn: any, $event: any) {\n      const e = { key, btn, $event };\n      if (btn.click) {\n        btn.click(e);\n        return;\n      }\n      if (btn.onClick) {\n        btn.onClick(e);\n        return;\n      }\n      ctx.emit(\"action\", e);\n    }\n    const computedButtons: Ref = computed(() => {\n      let sortArr = [];\n      for (let key in props.buttons) {\n        sortArr.push({\n          ...props.buttons[key],\n          _key: key\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<ActionbarClickEvent> = {};\n\n      sortArr.forEach((item) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    return {\n      onClick,\n      computedButtons\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-actionbar {\n  .fs-button {\n    margin: 0 2px;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-actionbar\">\n    <template v-for=\"(value, key) in computedButtons\" :key=\"key\">\n      <fs-button v-if=\"value.show !== false\" v-bind=\"value\" @click=\"onClick(key, value, $event)\" />\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, computed, Ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ActionbarClickEvent, ButtonsProps } from \"../../d\";\n\nexport default defineComponent({\n  name: \"FsActionbar\",\n  props: {\n    /**\n     * 按钮配置\n     * {\n     *  add:{\n     *    ...FsButton,\n     *    show:true\n     *  },\n     *  custom:{...}\n     * }\n     */\n    buttons: {}\n  } as any,\n  emits: [\"action\"],\n  setup(props, ctx: any) {\n    function onClick(key: any, btn: any, $event: any) {\n      const e = { key, btn, $event };\n      if (btn.click) {\n        btn.click(e);\n        return;\n      }\n      if (btn.onClick) {\n        btn.onClick(e);\n        return;\n      }\n      ctx.emit(\"action\", e);\n    }\n    const computedButtons: Ref = computed(() => {\n      let sortArr = [];\n      for (let key in props.buttons) {\n        sortArr.push({\n          ...props.buttons[key],\n          _key: key\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<ActionbarClickEvent> = {};\n\n      sortArr.forEach((item) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    return {\n      onClick,\n      computedButtons\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-actionbar {\n  .fs-button {\n    margin: 0 2px;\n  }\n}\n</style>\n", null, null, "<template>\n  <!-- 简单模式 -->\n  <template v-if=\"mode === 'simple'\">\n    <component :is=\"ui.row.name\" class=\"fs-table-columns-filter-simple\">\n      <component\n        :is=\"ui.col.name\"\n        v-for=\"(element, key) in currentColumns\"\n        v-show=\"original[element.key]?.__show !== false\"\n        :key=\"key\"\n        :span=\"6\"\n      >\n        <component\n          :is=\"ui.checkbox.name\"\n          v-model:[ui.checkbox.modelValue]=\"element.show\"\n          :disabled=\"original[element.key]?.__disabled === true\"\n          class=\"item-label\"\n          :title=\"buildText(element)\"\n        >\n          {{ buildText(element) }}\n        </component>\n      </component>\n    </component>\n    <component :is=\"ui.divider.name\" />\n    <component :is=\"ui.row.name\">\n      <fs-button\n        style=\"margin-right: 5px\"\n        type=\"primary\"\n        :icon=\"ui.icons.check\"\n        :text=\"_text.confirm\"\n        @click=\"simpleSubmit()\"\n      />\n      <fs-button :icon=\"ui.icons.refresh\" :text=\"_text.reset\" @click=\"simpleReset\" />\n    </component>\n  </template>\n  <!-- 完全模式 -->\n\n  <component :is=\"container?.is || 'fs-columns-filter-layout-default'\" v-else v-bind=\"container\">\n    <template #buttons>\n      <component :is=\"ui.row.name\" class=\"fs-drawer-footer\" :gutter=\"10\">\n        <component :is=\"ui.col.name\" :span=\"12\">\n          <fs-button :icon=\"ui.icons.refresh\" :text=\"_text.reset\" block @click=\"reset\" />\n        </component>\n        <component :is=\"ui.col.name\" :span=\"12\">\n          <fs-button type=\"primary\" :icon=\"ui.icons.check\" :text=\"_text.confirm\" block @click=\"submit(false)\" />\n        </component>\n      </component>\n    </template>\n  </component>\n</template>\n\n<script lang=\"ts\" setup>\n/**\n * FsTableColumnsFilter，列设置组件\n */\nimport _ from \"lodash-es\";\nimport TableStore from \"../../../utils/util.store\";\nimport { useI18n } from \"../../../locale\";\nimport { computed, nextTick, provide, Ref, ref, watch } from \"vue\";\nimport { uiContext } from \"../../../ui\";\nimport { useMerge } from \"../../../use/use-merge\";\nimport { useRoute } from \"vue-router\";\nimport {\n  ColumnProps,\n  ColumnsFilterItem,\n  ColumnsFilterProvideKey,\n  TableColumnsProps,\n  TypeMap,\n  ColumnsFilterComponentProps\n} from \"../../../d\";\n\nconst props = withDefaults(defineProps<ColumnsFilterComponentProps>(), {\n  storage: true,\n  mode: \"default\",\n  container: () => {\n    return { is: \"fs-columns-filter-layout-default\" };\n  }\n});\nconst emit = defineEmits([\"update:columns\", \"update:show\"]);\n\nconst { t } = useI18n();\nconst ui = uiContext.get();\nconst active = ref(false);\nconst start = () => {\n  active.value = true;\n};\n\nconst original: Ref<TypeMap<ColumnsFilterItem>> = computed(() => {\n  return transformColumnsMap(props.originalColumns);\n});\nconst currentColumns: Ref<ColumnsFilterItem[]> = ref([]);\nconst { merge } = useMerge();\n\nconst _text = computed(() => {\n  const def = {\n    title: t(\"fs.toolbar.columnFilter.title\"),\n    fixed: t(\"fs.toolbar.columnFilter.fixed\"),\n    order: t(\"fs.toolbar.columnFilter.order\"),\n    reset: t(\"fs.toolbar.columnFilter.reset\"),\n    confirm: t(\"fs.toolbar.columnFilter.confirm\"),\n    unnamed: t(\"fs.toolbar.columnFilter.unnamed\")\n  };\n  merge(def, props.text);\n  return def;\n});\n\nfunction buildColumnFilterItem(item: ColumnProps) {\n  return {\n    key: item.key,\n    title: item.title,\n    fixed: item.fixed ?? false,\n    show: item.show ?? true,\n    __show: item.columnSetShow !== false,\n    __disabled: item.columnSetDisabled ?? false\n  };\n}\n\nfunction transformToTableColumns(result: ColumnsFilterItem[]) {\n  const columns: TableColumnsProps = {};\n  _.forEach(result, (item) => {\n    columns[item.key] = item;\n  });\n  return columns;\n}\n\nfunction transformColumnsMap(value: TableColumnsProps): TypeMap<ColumnsFilterItem> {\n  const columns: TypeMap<ColumnsFilterItem> = {};\n  _.forEach(value, (item) => {\n    const column = buildColumnFilterItem(item);\n    if (item.children) {\n      const map = transformColumnsMap(item.children);\n      for (let key in map) {\n        columns[key] = map[key];\n      }\n    } else {\n      columns[column.key] = column;\n    }\n  });\n  return columns;\n}\n\nfunction transformColumns(value: TableColumnsProps): ColumnsFilterItem[] {\n  const columns: ColumnsFilterItem[] = [];\n  _.forEach(value, (item) => {\n    const column = buildColumnFilterItem(item);\n    if (item.children) {\n      const list: ColumnsFilterItem[] = transformColumns(item.children);\n      for (let item of list) {\n        columns.push(item);\n      }\n    } else {\n      columns.push(column);\n    }\n  });\n  return columns;\n}\n\nfunction setCurrentValue(value: any) {\n  currentColumns.value = transformColumns(value);\n}\n\n// 还原\nfunction reset() {\n  currentColumns.value = transformColumns(props.originalColumns);\n  submit(true);\n  clearThisStorage();\n}\n// 确认\nfunction submit(noSave = false) {\n  if (!noSave) {\n    saveOptionsToStorage(currentColumns.value);\n  }\n  const result = _.cloneDeep(currentColumns.value);\n\n  //解决naive ui与列设置冲突的问题\n  result.forEach((column) => {\n    if (column) {\n      delete column.__disabled;\n      delete column.__show;\n    }\n  });\n\n  doEmit(result);\n  active.value = false;\n}\n\nprovide(ColumnsFilterProvideKey, { originalColumns: original, currentColumns, text: _text, active, submit, reset });\n\nfunction simpleSubmit() {\n  submit(false);\n  emit(\"update:show\", false);\n}\nfunction simpleReset() {\n  reset();\n  emit(\"update:show\", false);\n}\n\nfunction doEmit(result: ColumnsFilterItem[]) {\n  emit(\"update:columns\", transformToTableColumns(result));\n}\n\nconst storageTableStore = ref();\nfunction getStorageTable() {\n  if (storageTableStore.value == null) {\n    const route = useRoute();\n    storageTableStore.value = new TableStore({\n      $router: route,\n      tableName: \"columnsFilter\",\n      keyType: props.storage\n    });\n  }\n  return storageTableStore.value;\n}\n\nfunction saveOptionsToStorage(value: any) {\n  if (props.storage === false) {\n    return;\n  }\n\n  const storedOptions: any = [];\n  for (let i = 0; i < value.length; i++) {\n    const item = value[i];\n    storedOptions.push(item);\n  }\n  getStorageTable().updateTableValue(storedOptions);\n}\n\nfunction getOptionsFromStorage() {\n  if (props.storage === false) {\n    return;\n  }\n  return getStorageTable().getTableValue();\n}\nfunction clearThisStorage() {\n  getStorageTable().clearTableValue();\n}\n\nfunction getColumnsHash(columns: any) {\n  const keys: any = [];\n  _.forEach(columns, (item) => {\n    const target = _.pick(item, \"key\", \"__show\", \"__disabled\");\n    keys.push(JSON.stringify(target));\n  });\n  keys.sort();\n  let hash = \"\";\n  for (const key of keys) {\n    hash += key;\n  }\n  return hash;\n}\nwatch(\n  () => {\n    return props.columns;\n  },\n  (value) => {\n    setCurrentValue(value);\n  }\n);\n\nconst init = () => {\n  setCurrentValue(props.columns);\n  const storedOptions = getOptionsFromStorage();\n  if (storedOptions) {\n    const storeHash = getColumnsHash(storedOptions);\n    const optionHash = getColumnsHash(original.value);\n    if (optionHash !== storeHash) {\n      // 如果字段列有过修改，则不使用本地设置\n      return;\n    }\n    const curValue: any = [];\n    for (const storedOption of storedOptions) {\n      const found = currentColumns.value.find((item) => item.key === storedOption.key);\n      if (found) {\n        found.fixed = storedOption.fixed;\n        found.show = storedOption.show;\n        curValue.push(found);\n      }\n    }\n    currentColumns.value = curValue;\n    nextTick(() => {\n      submit(true);\n    });\n  }\n};\n\ninit();\ndefineExpose({\n  start,\n  original,\n  columns: currentColumns\n});\n\nfunction buildText(element: any) {\n  return element.label || element.title || element.key || _text.value.unnamed;\n}\n</script>\n<style lang=\"less\">\n.fs-table-columns-filter-simple {\n  min-width: 760px;\n  padding-top: 20px;\n}\n\n.fs-table-columns-filter {\n  :focus {\n    outline: 0;\n  }\n\n  [flex~=\"cross:center\"] {\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  [flex~=\"main:justify\"] {\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n  }\n\n  [flex] {\n    display: -ms-flexbox;\n    display: flex;\n  }\n\n  [flex-box=\"1\"] {\n    flex-grow: 1;\n    flex-shrink: 1;\n  }\n\n  [flex] > * {\n    display: flex;\n  }\n\n  .el-drawer__body {\n    height: 0;\n  }\n\n  .fs-drawer-wrapper {\n    padding: 10px;\n    height: 100%;\n    overflow-y: auto;\n  }\n\n  .fs-drawer-footer {\n    padding: 20px;\n  }\n\n  .component--list {\n    margin: -20px;\n\n    .item-label {\n      flex: 1;\n      min-width: 0;\n\n      .ant-checkbox + span {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n    .item-right {\n      flex-shrink: 1;\n      display: flex;\n    }\n\n    .title {\n      font-size: 14px;\n    }\n\n    .component--list-item {\n      padding: 10px;\n      background-color: #fff;\n      margin-bottom: 1px;\n\n      &.ghost {\n        opacity: 0.5;\n      }\n\n      &:last-child {\n        margin-bottom: 0px;\n      }\n\n      .component--list-item-handle {\n        margin-left: 10px;\n        cursor: move;\n\n        &.disabled {\n          opacity: 0.3;\n          cursor: pointer;\n        }\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-toolbar\">\n    <template v-for=\"(item, key) of computedButtons\" :key=\"key\">\n      <template v-if=\"item.show !== false\">\n        <component\n          :is=\"ui.popover.name\"\n          v-if=\"key === 'columns' && columnsFilter && columnsFilter?.mode === 'simple'\"\n          v-model:[ui.popover.visible]=\"popoverVisible\"\n          display-directive=\"show\"\n          placement=\"bottom\"\n          :width=\"760\"\n          trigger=\"click\"\n        >\n          <template #[ui.popover.triggerSlotName]>\n            <fs-button v-bind=\"item\" @click=\"handleSimpleClick\" />\n          </template>\n          <template #[ui.popover.contentSlotName]>\n            <component\n              :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n              v-if=\"columns\"\n              ref=\"columnsFilterRef\"\n              v-model:show=\"popoverVisible\"\n              mode=\"simple\"\n              v-bind=\"columnsFilter\"\n              :columns=\"columns\"\n              :storage=\"storage\"\n              @update:columns=\"$emit('update:columns', $event)\"\n            />\n          </template>\n        </component>\n        <fs-button v-else v-bind=\"item\" @click=\"item.click()\" />\n      </template>\n    </template>\n    <component\n      :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n      v-if=\"columns && columnsFilter?.mode !== 'simple'\"\n      ref=\"columnsFilterRef\"\n      v-bind=\"columnsFilter\"\n      :columns=\"columns\"\n      :storage=\"storage\"\n      @update:columns=\"$emit('update:columns', $event)\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport FsTableColumnsFilter from \"./fs-table-columns-filter/index.vue\";\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, PropType, ref, Ref } from \"vue\";\nimport { useI18n } from \"../../locale\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ButtonsProps, TableColumnsProps } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * 工具条\n */\nexport default defineComponent({\n  name: \"FsToolbar\",\n  components: { FsTableColumnsFilter },\n  props: {\n    /**\n     * 按钮配置\n     *{\n     *   search:{}, 查询\n     *   refresh:{}, 刷新\n     *   compact:{}, 紧凑模式\n     *   export:{}, 导出\n     *   columns:{} 列设置\n     *}\n     **/\n    buttons: {\n      type: Object\n    },\n    /**\n     * 当前是否紧凑模式\n     */\n    compact: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 列配置\n     */\n    columns: {\n      type: Object as PropType<TableColumnsProps>,\n      default: undefined\n    },\n    /**\n     * 是否保存用户列设置\n     * 传string则表示传入缓存的主key\n     */\n    storage: {\n      type: [String, Boolean],\n      default: true\n    },\n    /**\n     * 插槽\n     */\n    slots: {},\n\n    /**\n     * 列设置配置\n     */\n    columnsFilter: {\n      type: Object as PropType<any>\n    }\n  },\n  emits: [\"update:columns\"],\n  setup(props: any, ctx) {\n    const { t } = useI18n();\n    const columnsFilterRef: Ref = ref();\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const computedButtons = computed(() => {\n      const defaultButtons: ButtonsProps<void> = {\n        columns: {\n          click: () => {\n            columnsFilterRef.value.start();\n          }\n        }\n      };\n\n      merge(defaultButtons, props.buttons);\n      // if (defaultButtons.search) {\n      //   defaultButtons.search.type = props.search ? \"primary\" : \"default\";\n      // }\n      // if (defaultButtons.compact) {\n      //   defaultButtons.compact.type = props.compact ? \"primary\" : \"default\";\n      // }\n\n      let sortArr: ButtonProps[] = [];\n      for (let defaultButtonsKey in defaultButtons) {\n        sortArr.push({\n          ...defaultButtons[defaultButtonsKey],\n          _key: defaultButtonsKey\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<void> = {};\n\n      sortArr.forEach((item) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    const popoverVisible = ref(false);\n    const handleSimpleClick = () => {\n      if (ui.type === \"element\") {\n        return;\n      }\n      popoverVisible.value = !popoverVisible.value;\n    };\n    return {\n      ui,\n      columnsFilterRef,\n      computedButtons,\n      popoverVisible,\n      handleSimpleClick\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-toolbar {\n  display: flex;\n\n  .fs-button {\n    margin-left: 5px;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-toolbar\">\n    <template v-for=\"(item, key) of computedButtons\" :key=\"key\">\n      <template v-if=\"item.show !== false\">\n        <component\n          :is=\"ui.popover.name\"\n          v-if=\"key === 'columns' && columnsFilter && columnsFilter?.mode === 'simple'\"\n          v-model:[ui.popover.visible]=\"popoverVisible\"\n          display-directive=\"show\"\n          placement=\"bottom\"\n          :width=\"760\"\n          trigger=\"click\"\n        >\n          <template #[ui.popover.triggerSlotName]>\n            <fs-button v-bind=\"item\" @click=\"handleSimpleClick\" />\n          </template>\n          <template #[ui.popover.contentSlotName]>\n            <component\n              :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n              v-if=\"columns\"\n              ref=\"columnsFilterRef\"\n              v-model:show=\"popoverVisible\"\n              mode=\"simple\"\n              v-bind=\"columnsFilter\"\n              :columns=\"columns\"\n              :storage=\"storage\"\n              @update:columns=\"$emit('update:columns', $event)\"\n            />\n          </template>\n        </component>\n        <fs-button v-else v-bind=\"item\" @click=\"item.click()\" />\n      </template>\n    </template>\n    <component\n      :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n      v-if=\"columns && columnsFilter?.mode !== 'simple'\"\n      ref=\"columnsFilterRef\"\n      v-bind=\"columnsFilter\"\n      :columns=\"columns\"\n      :storage=\"storage\"\n      @update:columns=\"$emit('update:columns', $event)\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport FsTableColumnsFilter from \"./fs-table-columns-filter/index.vue\";\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, PropType, ref, Ref } from \"vue\";\nimport { useI18n } from \"../../locale\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ButtonsProps, TableColumnsProps } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * 工具条\n */\nexport default defineComponent({\n  name: \"FsToolbar\",\n  components: { FsTableColumnsFilter },\n  props: {\n    /**\n     * 按钮配置\n     *{\n     *   search:{}, 查询\n     *   refresh:{}, 刷新\n     *   compact:{}, 紧凑模式\n     *   export:{}, 导出\n     *   columns:{} 列设置\n     *}\n     **/\n    buttons: {\n      type: Object\n    },\n    /**\n     * 当前是否紧凑模式\n     */\n    compact: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 列配置\n     */\n    columns: {\n      type: Object as PropType<TableColumnsProps>,\n      default: undefined\n    },\n    /**\n     * 是否保存用户列设置\n     * 传string则表示传入缓存的主key\n     */\n    storage: {\n      type: [String, Boolean],\n      default: true\n    },\n    /**\n     * 插槽\n     */\n    slots: {},\n\n    /**\n     * 列设置配置\n     */\n    columnsFilter: {\n      type: Object as PropType<any>\n    }\n  },\n  emits: [\"update:columns\"],\n  setup(props: any, ctx) {\n    const { t } = useI18n();\n    const columnsFilterRef: Ref = ref();\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const computedButtons = computed(() => {\n      const defaultButtons: ButtonsProps<void> = {\n        columns: {\n          click: () => {\n            columnsFilterRef.value.start();\n          }\n        }\n      };\n\n      merge(defaultButtons, props.buttons);\n      // if (defaultButtons.search) {\n      //   defaultButtons.search.type = props.search ? \"primary\" : \"default\";\n      // }\n      // if (defaultButtons.compact) {\n      //   defaultButtons.compact.type = props.compact ? \"primary\" : \"default\";\n      // }\n\n      let sortArr: ButtonProps[] = [];\n      for (let defaultButtonsKey in defaultButtons) {\n        sortArr.push({\n          ...defaultButtons[defaultButtonsKey],\n          _key: defaultButtonsKey\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<void> = {};\n\n      sortArr.forEach((item) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    const popoverVisible = ref(false);\n    const handleSimpleClick = () => {\n      if (ui.type === \"element\") {\n        return;\n      }\n      popoverVisible.value = !popoverVisible.value;\n    };\n    return {\n      ui,\n      columnsFilterRef,\n      computedButtons,\n      popoverVisible,\n      handleSimpleClick\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-toolbar {\n  display: flex;\n\n  .fs-button {\n    margin-left: 5px;\n  }\n}\n</style>\n", "/**!\n * Sortable 1.14.0\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.14.0\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\n\n\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, _excluded);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n * @param  {Number} x      X position\n * @param  {Number} y      Y position\n * @return {HTMLElement}   Element of the first found nearest Sortable\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    var threshold = sortable[expando].options.emptyInsertThreshold;\n    if (!threshold || lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\n * @class  Sortable\n * @param  {HTMLElement}  el\n * @param  {Object}       [options]\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    } // Safari ignores further event handling after mousedown\n\n\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // if there is a last element, it is the target\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          el.appendChild(dragEl);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n\n        target = firstChild;\n        targetRect = getRect(target);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\n   * Serializes the item into an array of string.\n   * @returns {String[]}\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\n   * Sorts the elements according to the array.\n   * @param  {String[]}  order  order of the items\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n\n  /**\n   * Save the current sorting\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n   * @param   {HTMLElement}  el\n   * @param   {String}       [selector]  default: `options.draggable`\n   * @returns {HTMLElement|null}\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\n   * Set/get option\n   * @param   {string} name\n   * @param   {*}      [value]\n   * @returns {*}\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\n   * Destroy\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var rect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var spacer = 10;\n  return vertical ? evt.clientX < rect.left - spacer || evt.clientY < rect.top && evt.clientX < rect.right : evt.clientY < rect.top - spacer || evt.clientY < rect.bottom && evt.clientX < rect.left;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\n * Gets the direction dragEl must be swapped relative to target in order to make it\n * seem that dragEl has been \"inserted\" into that element's position\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n * @return {Number}                   Direction dragEl must be swapped\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\n * Generate id\n * @param   {HTMLElement} el\n * @returns {String}\n * @private\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\n * Get the Sortable instance of an element\n * @param  {HTMLElement} element The element\n * @return {Sortable|undefined}         The instance of Sortable\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\n * Mount a plugin to Sortable\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\n * Create sortable instance\n * @param {HTMLElement}  el\n * @param {Object}      [options]\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed,\n          cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (sortable.options.supportPointer) {\n      on(document, 'pointerup', this._deselectMultiDrag);\n    } else {\n      on(document, 'mouseup', this._deselectMultiDrag);\n      on(document, 'touchend', this._deselectMultiDrag);\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n          cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent,\n          cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl,\n          cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden,\n          cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed,\n          cancel = _ref8.cancel;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = this.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvt: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        folding = false; // Do not \"unfold\" after around dragEl if reverted\n\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvt: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\n       * Selects the provided multi-drag item\n       * @param  {HTMLElement} el    The element to be selected\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\n       * Deselects the provided multi-drag item\n       * @param  {HTMLElement} el    The element to be deselected\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\n * Insert multi-drag clones\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\n * @param  {HTMLElement} rootEl\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n", "var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport Sortable from \"sortablejs\";\nimport { resolveComponent, TransitionGroup, defineComponent, h, nextTick } from \"vue\";\nfunction removeNode(node) {\n  if (node.parentElement !== null) {\n    node.parentElement.removeChild(node);\n  }\n}\nfunction insertNodeAt(fatherNode, node, position) {\n  const refNode = position === 0 ? fatherNode.children[0] : fatherNode.children[position - 1].nextSibling;\n  fatherNode.insertBefore(node, refNode);\n}\nfunction getConsole() {\n  if (typeof window !== \"undefined\") {\n    return window.console;\n  }\n  return global.console;\n}\nconst console$1 = getConsole();\nfunction cached(fn) {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return function cachedFn(str) {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n}\nconst regex = /-(\\w)/g;\nconst camelize = cached((str) => str.replace(regex, (_, c) => c.toUpperCase()));\nconst manageAndEmit$1 = [\"Start\", \"Add\", \"Remove\", \"Update\", \"End\"];\nconst emit$1 = [\"Choose\", \"Unchoose\", \"Sort\", \"Filter\", \"Clone\"];\nconst manage$1 = [\"Move\"];\nconst eventHandlerNames = [manage$1, manageAndEmit$1, emit$1].flatMap((events2) => events2).map((evt) => `on${evt}`);\nconst events = {\n  manage: manage$1,\n  manageAndEmit: manageAndEmit$1,\n  emit: emit$1\n};\nfunction isReadOnly(eventName) {\n  return eventHandlerNames.indexOf(eventName) !== -1;\n}\nconst tags = [\n  \"a\",\n  \"abbr\",\n  \"address\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"bdi\",\n  \"bdo\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"math\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"slot\",\n  \"small\",\n  \"source\",\n  \"span\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"svg\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"template\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\"\n];\nfunction isHtmlTag(name) {\n  return tags.includes(name);\n}\nfunction isTransition(name) {\n  return [\"transition-group\", \"TransitionGroup\"].includes(name);\n}\nfunction isHtmlAttribute(value) {\n  return [\"id\", \"class\", \"role\", \"style\"].includes(value) || value.startsWith(\"data-\") || value.startsWith(\"aria-\") || value.startsWith(\"on\");\n}\nfunction project(entries) {\n  return entries.reduce((res, [key, value]) => {\n    res[key] = value;\n    return res;\n  }, {});\n}\nfunction getComponentAttributes({ $attrs, componentData = {} }) {\n  const attributes = project(Object.entries($attrs).filter(([key, _]) => isHtmlAttribute(key)));\n  return __spreadValues(__spreadValues({}, attributes), componentData);\n}\nfunction createSortableOption({ $attrs, callBackBuilder }) {\n  const options = project(getValidSortableEntries($attrs));\n  Object.entries(callBackBuilder).forEach(([eventType, eventBuilder]) => {\n    events[eventType].forEach((event) => {\n      options[`on${event}`] = eventBuilder(event);\n    });\n  });\n  const draggable = `[data-draggable]${options.draggable || \"\"}`;\n  return __spreadProps(__spreadValues({}, options), {\n    draggable\n  });\n}\nfunction getValidSortableEntries(value) {\n  return Object.entries(value).filter(([key, _]) => !isHtmlAttribute(key)).map(([key, value2]) => [camelize(key), value2]).filter(([key, _]) => !isReadOnly(key));\n}\nconst getHtmlElementFromNode = (node) => {\n  const el = node.el || Array.isArray(node.children) && node.children[0].el.parentNode;\n  if (!el) {\n    console.error(\"\\u4F7F\\u7528 transition-group , \\u9700\\u8981\\u5728slot\\u4E2Dtemplate\\u5185\\u81F3\\u5C112\\u5C42html\\u6807\\u7B7E\");\n  }\n  return el || {};\n};\nconst addContext = (domElement, context) => domElement.__draggable_context = context;\nconst getContext = (domElement) => domElement.__draggable_context;\nclass ComponentStructure {\n  constructor({\n    nodes: { header, default: defaultNodes, footer },\n    root,\n    realList\n  }) {\n    this.defaultNodes = defaultNodes;\n    this.children = [...header, ...defaultNodes, ...footer];\n    this.externalComponent = root.externalComponent;\n    this.rootTransition = root.transition;\n    this.tag = root.tag;\n    this.realList = realList;\n  }\n  get _isRootComponent() {\n    return this.externalComponent || this.rootTransition;\n  }\n  render(h2, attributes) {\n    const { tag, children, _isRootComponent } = this;\n    const option = !_isRootComponent ? children : { default: () => children };\n    return h2(tag, attributes, option);\n  }\n  updated() {\n    const { defaultNodes, realList } = this;\n    defaultNodes.forEach((node, index) => {\n      addContext(getHtmlElementFromNode(node), {\n        element: realList[index],\n        index\n      });\n    });\n  }\n  getUnderlyingVm(domElement) {\n    return getContext(domElement);\n  }\n  getVmIndexFromDomIndex(domIndex, element) {\n    const { defaultNodes } = this;\n    const { length } = defaultNodes;\n    const domChildren = element.children;\n    const domElement = domChildren.item(domIndex);\n    if (domElement === null) {\n      return length;\n    }\n    const context = getContext(domElement);\n    if (context) {\n      return context.index;\n    }\n    if (length === 0) {\n      return 0;\n    }\n    const firstDomListElement = getHtmlElementFromNode(defaultNodes[0]);\n    const indexFirstDomListElement = [...domChildren].findIndex((element2) => element2 === firstDomListElement);\n    return domIndex < indexFirstDomListElement ? 0 : length;\n  }\n}\nfunction getSlot(slots, key) {\n  const slotValue = slots[key];\n  return slotValue ? slotValue() : [];\n}\nfunction computeNodes({ $slots, realList, getKey }) {\n  const normalizedList = realList || [];\n  const [header, footer] = [\"header\", \"footer\"].map((name) => getSlot($slots, name));\n  const { item } = $slots;\n  if (!item) {\n    throw new Error(\"draggable element must have an item slot\");\n  }\n  const defaultNodes = normalizedList.flatMap((element, index) => item({ element, index }).map((node) => {\n    node.key = getKey(element);\n    node.props = __spreadProps(__spreadValues({}, node.props || {}), { \"data-draggable\": true });\n    return node;\n  }));\n  if (defaultNodes.length !== normalizedList.length) {\n    throw new Error(\"Item slot must have only one child\");\n  }\n  return {\n    header,\n    footer,\n    default: defaultNodes\n  };\n}\nfunction getRootInformation(tag) {\n  const transition = isTransition(tag);\n  const externalComponent = !isHtmlTag(tag) && !transition;\n  return {\n    transition,\n    externalComponent,\n    tag: externalComponent ? resolveComponent(tag) : transition ? TransitionGroup : tag\n  };\n}\nfunction computeComponentStructure({ $slots, tag, realList, getKey }) {\n  const nodes = computeNodes({ $slots, realList, getKey });\n  const root = getRootInformation(tag);\n  return new ComponentStructure({ nodes, root, realList });\n}\nfunction emit(evtName, evtData) {\n  nextTick(() => this.$emit(evtName.toLowerCase(), evtData));\n}\nfunction manage(evtName) {\n  return (evtData, originalElement) => {\n    if (this.realList !== null) {\n      return this[`onDrag${evtName}`](evtData, originalElement);\n    }\n  };\n}\nfunction manageAndEmit(evtName) {\n  const delegateCallBack = manage.call(this, evtName);\n  return (evtData, originalElement) => {\n    delegateCallBack.call(this, evtData, originalElement);\n    emit.call(this, evtName, evtData);\n  };\n}\nlet draggingElement = null;\nconst props = {\n  list: {\n    type: Array,\n    required: false,\n    default: null\n  },\n  modelValue: {\n    type: Array,\n    required: false,\n    default: null\n  },\n  itemKey: {\n    type: [String, Function],\n    required: true\n  },\n  clone: {\n    type: Function,\n    default: (original) => {\n      return original;\n    }\n  },\n  tag: {\n    type: String,\n    default: \"div\"\n  },\n  move: {\n    type: Function,\n    default: null\n  },\n  componentData: {\n    type: Object,\n    required: false,\n    default: null\n  }\n};\nconst emits = [\n  \"update:modelValue\",\n  \"change\",\n  ...[...events.manageAndEmit, ...events.emit].map((evt) => evt.toLowerCase())\n];\nconst draggableComponent = defineComponent({\n  name: \"draggable\",\n  inheritAttrs: false,\n  props,\n  emits,\n  data() {\n    return {\n      error: false\n    };\n  },\n  render() {\n    try {\n      this.error = false;\n      const { $slots, $attrs, tag, componentData, realList, getKey } = this;\n      const componentStructure = computeComponentStructure({\n        $slots,\n        tag,\n        realList,\n        getKey\n      });\n      this.componentStructure = componentStructure;\n      const attributes = getComponentAttributes({ $attrs, componentData });\n      return componentStructure.render(h, attributes);\n    } catch (err) {\n      this.error = true;\n      return h(\"pre\", { style: { color: \"red\" } }, err.stack);\n    }\n  },\n  created() {\n    if (this.list !== null && this.modelValue !== null) {\n      console$1.error(\"modelValue and list props are mutually exclusive! Please set one or another.\");\n    }\n  },\n  mounted() {\n    if (this.error) {\n      return;\n    }\n    const { $attrs, $el, componentStructure } = this;\n    componentStructure.updated();\n    const sortableOptions = createSortableOption({\n      $attrs,\n      callBackBuilder: {\n        manageAndEmit: (event) => manageAndEmit.call(this, event),\n        emit: (event) => emit.bind(this, event),\n        manage: (event) => manage.call(this, event)\n      }\n    });\n    const targetDomElement = $el.nodeType === 1 ? $el : $el.parentElement;\n    this._sortable = new Sortable(targetDomElement, sortableOptions);\n    this.targetDomElement = targetDomElement;\n    targetDomElement.__draggable_component__ = this;\n  },\n  updated() {\n    this.componentStructure.updated();\n  },\n  beforeUnmount() {\n    if (this._sortable !== void 0)\n      this._sortable.destroy();\n  },\n  computed: {\n    realList() {\n      const { list } = this;\n      return list ? list : this.modelValue;\n    },\n    getKey() {\n      const { itemKey } = this;\n      if (typeof itemKey === \"function\") {\n        return itemKey;\n      }\n      return (element) => element[itemKey];\n    }\n  },\n  watch: {\n    $attrs: {\n      handler(newOptionValue) {\n        const { _sortable } = this;\n        if (!_sortable)\n          return;\n        getValidSortableEntries(newOptionValue).forEach(([key, value]) => {\n          _sortable.option(key, value);\n        });\n      },\n      deep: true\n    }\n  },\n  methods: {\n    getUnderlyingVm(domElement) {\n      return this.componentStructure.getUnderlyingVm(domElement) || null;\n    },\n    getUnderlyingPotencialDraggableComponent(htmElement) {\n      return htmElement.__draggable_component__;\n    },\n    emitChanges(evt) {\n      nextTick(() => this.$emit(\"change\", evt));\n    },\n    alterList(onList) {\n      if (this.list) {\n        onList(this.list);\n        return;\n      }\n      const newList = [...this.modelValue];\n      onList(newList);\n      this.$emit(\"update:modelValue\", newList);\n    },\n    spliceList() {\n      const spliceList = (list) => list.splice(...arguments);\n      this.alterList(spliceList);\n    },\n    updatePosition(oldIndex, newIndex) {\n      const updatePosition = (list) => list.splice(newIndex, 0, list.splice(oldIndex, 1)[0]);\n      this.alterList(updatePosition);\n    },\n    getRelatedContextFromMoveEvent({ to, related }) {\n      const component = this.getUnderlyingPotencialDraggableComponent(to);\n      if (!component) {\n        return { component };\n      }\n      const list = component.realList;\n      const context = { list, component };\n      if (to !== related && list) {\n        const destination = component.getUnderlyingVm(related) || {};\n        return __spreadValues(__spreadValues({}, destination), context);\n      }\n      return context;\n    },\n    getVmIndexFromDomIndex(domIndex) {\n      return this.componentStructure.getVmIndexFromDomIndex(domIndex, this.targetDomElement);\n    },\n    onDragStart(evt) {\n      this.context = this.getUnderlyingVm(evt.item);\n      evt.item._underlying_vm_ = this.clone(this.context.element);\n      draggingElement = evt.item;\n    },\n    onDragAdd(evt) {\n      const element = evt.item._underlying_vm_;\n      if (element === void 0) {\n        return;\n      }\n      removeNode(evt.item);\n      const newIndex = this.getVmIndexFromDomIndex(evt.newIndex);\n      this.spliceList(newIndex, 0, element);\n      const added = { element, newIndex };\n      this.emitChanges({ added });\n    },\n    onDragRemove(evt) {\n      insertNodeAt(this.$el, evt.item, evt.oldIndex);\n      if (evt.pullMode === \"clone\") {\n        removeNode(evt.clone);\n        return;\n      }\n      const { index: oldIndex, element } = this.context;\n      this.spliceList(oldIndex, 1);\n      const removed = { element, oldIndex };\n      this.emitChanges({ removed });\n    },\n    onDragUpdate(evt) {\n      removeNode(evt.item);\n      insertNodeAt(evt.from, evt.item, evt.oldIndex);\n      const oldIndex = this.context.index;\n      const newIndex = this.getVmIndexFromDomIndex(evt.newIndex);\n      this.updatePosition(oldIndex, newIndex);\n      const moved = { element: this.context.element, oldIndex, newIndex };\n      this.emitChanges({ moved });\n    },\n    computeFutureIndex(relatedContext, evt) {\n      if (!relatedContext.element) {\n        return 0;\n      }\n      const domChildren = [...evt.to.children].filter((el) => el.style[\"display\"] !== \"none\");\n      const currentDomIndex = domChildren.indexOf(evt.related);\n      const currentIndex = relatedContext.component.getVmIndexFromDomIndex(currentDomIndex);\n      const draggedInList = domChildren.indexOf(draggingElement) !== -1;\n      return draggedInList || !evt.willInsertAfter ? currentIndex : currentIndex + 1;\n    },\n    onDragMove(evt, originalEvent) {\n      const { move, realList } = this;\n      if (!move || !realList) {\n        return true;\n      }\n      const relatedContext = this.getRelatedContextFromMoveEvent(evt);\n      const futureIndex = this.computeFutureIndex(relatedContext, evt);\n      const draggedContext = __spreadProps(__spreadValues({}, this.context), {\n        futureIndex\n      });\n      const sendEvent = __spreadProps(__spreadValues({}, evt), {\n        relatedContext,\n        draggedContext\n      });\n      return move(sendEvent, originalEvent);\n    },\n    onDragEnd() {\n      draggingElement = null;\n    }\n  }\n});\nexport { draggableComponent as default };\n", "<template>\n  <component :is=\"ui.buttonGroup.name\" class=\"fs-table-columns-fixed-controller\">\n    <fs-button\n      v-for=\"option of options\"\n      :key=\"option.icon\"\n      :type=\"modelValue === option.value ? 'primary' : 'default'\"\n      :icon=\"option.icon\"\n      size=\"small\"\n      @click=\"submit(option.value)\"\n    />\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { useUi } from \"../../../../use\";\n\nexport default defineComponent({\n  name: \"FsTableColumnsFixedController\",\n  props: {\n    modelValue: {\n      default: false\n    }\n  },\n  emits: [\"update:modelValue\", \"change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const options = ref([\n      {\n        value: \"left\",\n        icon: ui.icons.left // 'el-icon-arrow-left'\n      },\n      {\n        value: false,\n        icon: ui.icons.close // 'el-icon-close'\n      },\n      {\n        value: \"right\",\n        icon: ui.icons.right // 'el-icon-arrow-right'\n      }\n    ]);\n\n    function submit(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n      ctx.emit(\"change\", value);\n    }\n    return {\n      ui,\n      options,\n      submit\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-table-columns-fixed-controller {\n  .fs-button {\n    padding: 2px !important;\n    font-size: 10px;\n    min-height: auto;\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.buttonGroup.name\" class=\"fs-table-columns-fixed-controller\">\n    <fs-button\n      v-for=\"option of options\"\n      :key=\"option.icon\"\n      :type=\"modelValue === option.value ? 'primary' : 'default'\"\n      :icon=\"option.icon\"\n      size=\"small\"\n      @click=\"submit(option.value)\"\n    />\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref } from \"vue\";\nimport { useUi } from \"../../../../use\";\n\nexport default defineComponent({\n  name: \"FsTableColumnsFixedController\",\n  props: {\n    modelValue: {\n      default: false\n    }\n  },\n  emits: [\"update:modelValue\", \"change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const options = ref([\n      {\n        value: \"left\",\n        icon: ui.icons.left // 'el-icon-arrow-left'\n      },\n      {\n        value: false,\n        icon: ui.icons.close // 'el-icon-close'\n      },\n      {\n        value: \"right\",\n        icon: ui.icons.right // 'el-icon-arrow-right'\n      }\n    ]);\n\n    function submit(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n      ctx.emit(\"change\", value);\n    }\n    return {\n      ui,\n      options,\n      submit\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-table-columns-fixed-controller {\n  .fs-button {\n    padding: 2px !important;\n    font-size: 10px;\n    min-height: auto;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.drawer.name\"\n    class=\"fs-columns-filter-layout-default\"\n    :title=\"text.title\"\n    v-bind=\"drawerBind\"\n    append-to-body\n  >\n    <component\n      :is=\"ui.drawer.hasContentWrap || 'div'\"\n      class=\"fs-drawer-wrapper fs-table-columns-filter\"\n      :title=\"text.title\"\n    >\n      <component :is=\"ui.card.name\" shadow=\"never\">\n        <div class=\"component--list\">\n          <div key=\"__first__\" class=\"component--list-item\" flex=\"main:justify cross:center\">\n            <span :span=\"12\">\n              <!-- 全选 反选 -->\n              <component :is=\"ui.checkbox.name\" :indeterminate=\"isIndeterminate\" v-bind=\"checkAllBind\">\n                {{ showLength }} / {{ allLength }}\n              </component>\n            </span>\n            <span class=\"title\">{{ text.fixed }} / {{ text.order }}</span>\n          </div>\n\n          <draggable v-model=\"currentColumns\" item-key=\"key\" :move=\"onDraggableMove\">\n            <template #item=\"{ element, index }\">\n              <div\n                v-show=\"originalColumns[element.key]?.__show !== false\"\n                :title=\"buildText(element)\"\n                class=\"component--list-item\"\n                flex=\"main:justify cross:center\"\n                :i=\"index\"\n              >\n                <component\n                  :is=\"ui.checkbox.name\"\n                  v-model:[ui.checkbox.modelValue]=\"element.show\"\n                  :disabled=\"originalColumns[element.key]?.__disabled === true\"\n                  class=\"item-label\"\n                  :title=\"buildText(element)\"\n                  @change=\"allCheckedUpdate\"\n                >\n                  {{ buildText(element) }}\n                </component>\n                <div class=\"item-right\">\n                  <fs-table-columns-fixed-controller\n                    v-model=\"element.fixed\"\n                    flex-box=\"0\"\n                    class=\"d2-mr-10\"\n                    @change=\"fixedChange(index, $event)\"\n                  />\n                  <div flex-box=\"0\" class=\"component--list-item-handle handle\">\n                    <fs-icon :icon=\"ui.icons.sort\" />\n                  </div>\n                </div>\n              </div>\n            </template>\n          </draggable>\n        </div>\n      </component>\n      <slot name=\"buttons\"></slot>\n    </component>\n  </component>\n</template>\n\n<script lang=\"ts\" setup>\nimport _ from \"lodash-es\";\n//不要删\n//@ts-ignore\nimport draggable from \"vuedraggable-es\";\nimport FsTableColumnsFixedController from \"./fs-table-columns-fixed-controller/index.vue\";\nimport { useUi } from \"../../../use\";\nimport { computed, inject, ref, watch } from \"vue\";\nimport {\n  ColumnsFilterItem,\n  ColumnsFilterProvideKey,\n  ColumnsFilterContext,\n  ColumnsFilterContainerProps\n} from \"../../../d/\";\n\nconst { ui } = useUi();\n\nconst { originalColumns, currentColumns, text, active } = inject<ColumnsFilterContext>(ColumnsFilterProvideKey);\nconst props = defineProps<ColumnsFilterContainerProps>();\nconst drawerBind = computed(() => {\n  return _.merge(\n    {\n      [ui.drawer.visible]: active.value,\n      [\"onUpdate:\" + ui.drawer.visible]: (e: any) => {\n        active.value = e;\n      },\n      [ui.drawer.width]: props.width || \"300px\"\n    },\n    props.drawer\n  );\n});\n\nconst checkAll = ref(false);\n// 全选和反选发生变化时触发\nfunction onCheckAllChange(value: any) {\n  checkAll.value = value;\n  currentColumns.value = currentColumns.value.map((e: any) => {\n    if (!e.__show || e.__disabled) {\n      return e;\n    }\n    e.show = value;\n    return e;\n  });\n}\n\nconst checkAllBind = computed(() => {\n  return {\n    [ui.checkbox.modelValue]: checkAll.value,\n    [\"onUpdate:\" + ui.checkbox.modelValue]: (v: any) => {\n      onCheckAllChange(v);\n    }\n  };\n});\n\nconst showLength = computed(() => {\n  return currentColumns.value.filter((e: any) => e.__show && e.show === true).length;\n});\nconst allLength = computed(() => {\n  return currentColumns.value.filter((e: any) => e.__show).length;\n});\nconst isIndeterminate = computed(() => {\n  return showLength.value > 0 && showLength.value < allLength.value;\n});\n\nwatch(\n  () => {\n    currentColumns.value;\n  },\n  () => {\n    allCheckedUpdate();\n  },\n  { immediate: true }\n);\n\nfunction onDraggableMove(e: any) {\n  const draged = e.draggedContext.element;\n  const target = e.relatedContext.element;\n  const sorted: ColumnsFilterItem[] = [];\n  for (const item of currentColumns.value) {\n    if (item.key === draged.key) {\n      sorted.push(target);\n    } else if (item.key === target.key) {\n      sorted.push(draged);\n    } else {\n      sorted.push(item);\n    }\n  }\n  //看key的排列是否正常\n  let leftIndex = 0;\n  let rightIndex = sorted.length - 1;\n  let minNotIndex = sorted.length - 1;\n  let maxNotIndex = 0;\n  for (let i = 0; i < sorted.length; i++) {\n    const item = sorted[i];\n    if (item.fixed === \"left\") {\n      leftIndex = i;\n    } else if (item.fixed === \"right\") {\n      rightIndex = rightIndex > i ? i : rightIndex;\n    } else {\n      minNotIndex = minNotIndex > i ? i : minNotIndex;\n      maxNotIndex = maxNotIndex < i ? i : maxNotIndex;\n    }\n  }\n\n  if (minNotIndex < leftIndex || maxNotIndex > rightIndex) {\n    //ui.message.error(\"非fixed字段不得越过fixed字段的顺序\");\n    return false;\n  }\n}\n\n// fixed 变化时触发\nfunction fixedChange(index: number, value: any) {\n  if (value) {\n    currentColumns.value[index].show = true;\n  }\n  if (value === \"left\") {\n    currentColumns.value.unshift(currentColumns.value.splice(index, 1)[0]);\n  }\n  if (value === \"right\") {\n    currentColumns.value.push(currentColumns.value.splice(index, 1)[0]);\n  }\n  allCheckedUpdate();\n}\nfunction allCheckedUpdate() {\n  checkAll.value = showLength.value === allLength.value;\n}\n\nfunction buildText(element: any) {\n  return element.label || element.title || element.key || text.value.unnamed;\n}\n</script>\n\n<style lang=\"less\"></style>\n", "<template>\n  <div class=\"fs-search-col fs-search-btns\">\n    <component :is=\"ui.formItem.name\">\n      <template v-for=\"(item, index) in buttons\" :key=\"index\">\n        <fs-button v-if=\"item.show\" v-bind=\"item\" @click=\"item._click()\" />\n      </template>\n    </component>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\nexport default defineComponent({\n  name: \"FsSearchButtons\",\n  inheritAttrs: false,\n  props: {\n    buttons: {\n      type: Object\n    }\n  },\n  setup() {\n    const { ui } = useUi();\n    return { ui };\n  }\n});\n</script>\n", "<template>\n  <div class=\"fs-search-col fs-search-btns\">\n    <component :is=\"ui.formItem.name\">\n      <template v-for=\"(item, index) in buttons\" :key=\"index\">\n        <fs-button v-if=\"item.show\" v-bind=\"item\" @click=\"item._click()\" />\n      </template>\n    </component>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\nexport default defineComponent({\n  name: \"FsSearchButtons\",\n  inheritAttrs: false,\n  props: {\n    buttons: {\n      type: Object\n    }\n  },\n  setup() {\n    const { ui } = useUi();\n    return { ui };\n  }\n});\n</script>\n", "<template>\n  <div class=\"fs-search fs-search-v2\">\n    <component :is=\"ui.collapseTransition.name\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"formData\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <component\n          :is=\"container?.is || 'fs-search-layout-default'\"\n          v-if=\"show !== false\"\n          v-bind=\"container\"\n          :columns=\"computedColumns\"\n          :get-context-fn=\"getContextFn\"\n        >\n          <template #search-buttons>\n            <template v-for=\"(item, index) in computedButtons\" :key=\"index\">\n              <fs-button v-if=\"item.show !== false\" v-bind=\"item\" @click=\"item._click()\" />\n            </template>\n          </template>\n\n          <template v-if=\"slots['search-left']\" #search-left>\n            <fs-slot-render :slots=\"slots['search-left']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-middle']\" #search-middle>\n            <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-right']\" #search-right>\n            <fs-slot-render :slots=\"slots['search-right']\" :scope=\"getContextFn()\" />\n          </template>\n        </component>\n      </component>\n    </component>\n  </div>\n</template>\n\n<script lang=\"tsx\">\nimport { computed, defineComponent, nextTick, reactive, ref, Ref, unref, watch } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonsProps, SearchEventContext, SearchItemProps, TypeMap } from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearch\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 布局容器\n     */\n    container: {\n      type: Object\n    },\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 校验后的查询表单数据\n     */\n    validatedForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * `{search:{...FsButton},reset:{...FsButton}}`\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n\n    /**\n     * 是否任意值变化就触发校验\n     */\n    validateOnChange: {\n      default: true,\n      type: Boolean\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 统一字段的formItem属性\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 重置事件，供用户使用\n     **/\n    \"reset\",\n    /**\n     * 重置事件，此事件供系统调用\n     */\n    \"_reset\",\n    /**\n     * 校验失败事件\n     */\n    \"validate-error\",\n    /**\n     * 校验后的表单数据变化\n     */\n    \"update:validatedForm\"\n  ],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const { doComputed, AsyncComputeValue, ComputeValue } = useCompute();\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"search.value配置不支持ComputeValue/AsyncCompute类型的动态计算\");\n      }\n    });\n\n    function createInitialForm(): any {\n      //默认值\n      const form: any = {};\n\n      _.forEach(props.columns, (column, key) => {\n        if (column.value === undefined) {\n          return;\n        }\n        const defValue = unref(column.value);\n        if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n          //默认值\n          form[key] = defValue;\n        }\n      });\n\n      return _.cloneDeep(merge({}, props.initialForm, form));\n    }\n\n    const formData = reactive(createInitialForm());\n\n    let autoSearch: any = null;\n\n    const computedColumns: Ref<TypeMap<SearchItemProps>> = doComputed(\n      () => {\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (value: any) => {\n        const formItem = _.cloneDeep(props.formItem || {});\n        value = merge(formItem, value);\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(value, (item) => {\n            delete item.rules;\n            delete item.rule;\n          });\n        }\n        // 合并col\n        if (props.col) {\n          _.forEach(value, (v) => {\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //cellRender\n        _.forEach(value, (item) => {\n          item._cellRender = () => {\n            return cellRender(item);\n          };\n        });\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(value, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    function onFormValidated() {\n      const validateForm = _.cloneDeep(formData);\n      ctx.emit(\"update:validatedForm\", validateForm);\n    }\n\n    watch(\n      () => {\n        return props.validatedForm;\n      },\n      (value: any) => {\n        for (const key in formData) {\n          delete formData[key];\n        }\n        merge(formData, value || {});\n      },\n      {\n        deep: true\n      }\n    );\n\n\n\n    const get = (form: any, key: any) => {\n      return _.get(form, key);\n    };\n\n    function splitKey(key: string) {\n      if (key == null) {\n        return;\n      }\n      if (key.indexOf(\".\") >= 0) {\n        return key.split(\".\");\n      }\n      return key;\n    }\n\n    // const debounceValidate = _.debounce(async () => {\n    //   if (await doValidate()) {\n    //     onFormValidated();\n    //   }\n    // }, 500);\n\n    function cellRender(item: any) {\n      const key = item.key;\n\n      async function _onUpdateModelValue($event: any) {\n        // await debounceValidate();\n        onValueChanged($event, item);\n      }\n\n      function _onInput() {\n        onInput(item);\n      }\n\n      function onKeyup(item: any, key: any) {\n        if (key.code === \"Enter\") {\n          if (item.autoSearchTrigger === \"enter\") {\n            doSearch();\n          }\n        }\n      }\n\n      let defaultSlot: any = null;\n      if (props.slots[\"search_\" + key]) {\n        defaultSlot = <fs-slot-render slots={props.slots[\"search_\" + key]} scope={buildFieldContext(key)} />;\n      } else if (item.render) {\n        defaultSlot = <fs-render render-func={item.render} scope={buildFieldContext(key)} />;\n      } else if (item.component && item.component.show !== false) {\n        defaultSlot = (\n          <fs-component-render\n            ref={(value: any) => {\n              componentRenderRefs.value[key] = value;\n            }}\n            model-value={get(formData, key)}\n            onKeyup={($event: any) => {\n              onKeyup(item, $event);\n            }}\n            {...item.component}\n            scope={buildFieldContext(key)}\n            onUpdate:modelValue={_onUpdateModelValue}\n            onInput={_onInput}\n          />\n        );\n      }\n\n      const splitedKey = splitKey(key);\n\n      return ui.formItem.render({\n        prop: key,\n        label: item.title,\n        props: {\n          ...item,\n          label: item.title,\n          [ui.formItem.prop]: splitedKey,\n          path: key,\n          rulePath: key\n        },\n        slots: {\n          default() {\n            return defaultSlot;\n          }\n        }\n      });\n    }\n\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.getTargetRef();\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form: formData, validatedForm: props.validatedForm, getComponentRef };\n    }\n\n    function buildFieldContext(key: string) {\n      return { ...getContextFn(), key, value: _.get(formData, key) };\n    }\n\n    async function doValidate(silent: boolean = false, trigger: string = \"search\"): Promise<boolean> {\n      try {\n        if (props.validate) {\n          await ui.form.validateWrap(searchFormRef.value);\n        }\n        return true;\n      } catch (e: any) {\n        if (!silent) {\n          ctx.emit(\"validate-error\", { ...getContextFn(), error: e, trigger });\n        }\n\n        return false;\n      }\n    }\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        ctx.emit(\"search\", getContextFn());\n      }\n    }\n\n    async function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(formData);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(formData, entry[0]);\n        } else {\n          _.set(formData, entry[0], initialValue);\n        }\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        if (props.reset) {\n          props.reset(getContextFn());\n        }\n        // 表单重置事件\n        ctx.emit(\"_reset\", getContextFn());\n        ctx.emit(\"reset\", getContextFn());\n        if (props.searchAfterReset) {\n          doSearch();\n        }\n      }\n    }\n\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      if (props.debounce !== false) {\n        let wait = props.debounce?.wait || 500;\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return formData;\n    }\n    function getValidatedForm() {\n      return props.validatedForm;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(formData), (item) => {\n          delete formData[item];\n        });\n      }\n      doMerge(formData, newForm);\n      onFormValidated();\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    async function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(formData, key, value);\n\n      const silent = props.validateOnChangeSilent;\n      if (props.validateOnChange && (await doValidate(silent, \"change\"))) {\n        onFormValidated();\n      }\n\n      if (item.valueChange) {\n        const key = item.key;\n        const value = formData[key];\n        const componentRef = getComponentRef(key);\n        const valueChange = item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        valueChange({ key, value, componentRef, ...getContextFn() });\n      }\n\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      if (!props.validate) {\n        return [];\n      }\n      return props.options.rules;\n    });\n\n    onFormValidated();\n    return {\n      get,\n      ui,\n      onValueChanged,\n      doValidate,\n      doSearch,\n      doReset,\n      formData,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      getValidatedForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      buildFieldContext,\n      getContextFn\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  &.fs-search-v2 {\n    //display: flex;\n    //flex-wrap: nowrap;\n    .search-left {\n    }\n\n    .search-right {\n      flex: 1;\n    }\n\n    .ant-form-inline {\n      flex-wrap: wrap;\n    }\n\n    .fs-search-form {\n      display: flex;\n      align-items: center;\n      flex-wrap: wrap;\n\n      .ant-picker,\n      .n-date-picker,\n      .el-select,\n      .el-date-editor {\n        width: 100%;\n      }\n\n      .ant-btn-loading-icon {\n        display: flex;\n        margin-left: 2px;\n        margin-right: 2px;\n      }\n\n      &.el-form--label-top {\n        .el-form-item {\n          display: block;\n        }\n      }\n\n      .el-form-item {\n        margin-bottom: 4px;\n        margin-top: 4px;\n        display: flex;\n        align-items: center;\n      }\n\n      &.el-form--inline {\n        .el-input {\n          width: 100%;\n        }\n      }\n\n      .el-form-item__content {\n        display: flex;\n        align-items: center;\n      }\n    }\n\n    .fs-search-col {\n      position: relative;\n      // antdv\n      .ant-form-item-explain,\n      .el-form-item__error {\n        float: left;\n        position: absolute;\n        bottom: 3px;\n        right: 8px;\n        pointer-events: none;\n        top: auto;\n        left: auto;\n        visibility: hidden;\n      }\n      .el-form-item__error {\n        bottom: 10px;\n      }\n      &:hover {\n        .ant-form-item-explain,\n        .el-form-item__error {\n          visibility: visible;\n        }\n      }\n    }\n  }\n\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-search fs-search-v2\">\n    <component :is=\"ui.collapseTransition.name\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"formData\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <component\n          :is=\"container?.is || 'fs-search-layout-default'\"\n          v-if=\"show !== false\"\n          v-bind=\"container\"\n          :columns=\"computedColumns\"\n          :get-context-fn=\"getContextFn\"\n        >\n          <template #search-buttons>\n            <template v-for=\"(item, index) in computedButtons\" :key=\"index\">\n              <fs-button v-if=\"item.show !== false\" v-bind=\"item\" @click=\"item._click()\" />\n            </template>\n          </template>\n\n          <template v-if=\"slots['search-left']\" #search-left>\n            <fs-slot-render :slots=\"slots['search-left']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-middle']\" #search-middle>\n            <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-right']\" #search-right>\n            <fs-slot-render :slots=\"slots['search-right']\" :scope=\"getContextFn()\" />\n          </template>\n        </component>\n      </component>\n    </component>\n  </div>\n</template>\n\n<script lang=\"tsx\">\nimport { computed, defineComponent, nextTick, reactive, ref, Ref, unref, watch } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonsProps, SearchEventContext, SearchItemProps, TypeMap } from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearch\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 布局容器\n     */\n    container: {\n      type: Object\n    },\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 校验后的查询表单数据\n     */\n    validatedForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * `{search:{...FsButton},reset:{...FsButton}}`\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n\n    /**\n     * 是否任意值变化就触发校验\n     */\n    validateOnChange: {\n      default: true,\n      type: Boolean\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 统一字段的formItem属性\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 重置事件，供用户使用\n     **/\n    \"reset\",\n    /**\n     * 重置事件，此事件供系统调用\n     */\n    \"_reset\",\n    /**\n     * 校验失败事件\n     */\n    \"validate-error\",\n    /**\n     * 校验后的表单数据变化\n     */\n    \"update:validatedForm\"\n  ],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const { doComputed, AsyncComputeValue, ComputeValue } = useCompute();\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"search.value配置不支持ComputeValue/AsyncCompute类型的动态计算\");\n      }\n    });\n\n    function createInitialForm(): any {\n      //默认值\n      const form: any = {};\n\n      _.forEach(props.columns, (column, key) => {\n        if (column.value === undefined) {\n          return;\n        }\n        const defValue = unref(column.value);\n        if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n          //默认值\n          form[key] = defValue;\n        }\n      });\n\n      return _.cloneDeep(merge({}, props.initialForm, form));\n    }\n\n    const formData = reactive(createInitialForm());\n\n    let autoSearch: any = null;\n\n    const computedColumns: Ref<TypeMap<SearchItemProps>> = doComputed(\n      () => {\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (value: any) => {\n        const formItem = _.cloneDeep(props.formItem || {});\n        value = merge(formItem, value);\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(value, (item) => {\n            delete item.rules;\n            delete item.rule;\n          });\n        }\n        // 合并col\n        if (props.col) {\n          _.forEach(value, (v) => {\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //cellRender\n        _.forEach(value, (item) => {\n          item._cellRender = () => {\n            return cellRender(item);\n          };\n        });\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(value, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    function onFormValidated() {\n      const validateForm = _.cloneDeep(formData);\n      ctx.emit(\"update:validatedForm\", validateForm);\n    }\n\n    watch(\n      () => {\n        return props.validatedForm;\n      },\n      (value: any) => {\n        for (const key in formData) {\n          delete formData[key];\n        }\n        merge(formData, value || {});\n      },\n      {\n        deep: true\n      }\n    );\n\n\n\n    const get = (form: any, key: any) => {\n      return _.get(form, key);\n    };\n\n    function splitKey(key: string) {\n      if (key == null) {\n        return;\n      }\n      if (key.indexOf(\".\") >= 0) {\n        return key.split(\".\");\n      }\n      return key;\n    }\n\n    // const debounceValidate = _.debounce(async () => {\n    //   if (await doValidate()) {\n    //     onFormValidated();\n    //   }\n    // }, 500);\n\n    function cellRender(item: any) {\n      const key = item.key;\n\n      async function _onUpdateModelValue($event: any) {\n        // await debounceValidate();\n        onValueChanged($event, item);\n      }\n\n      function _onInput() {\n        onInput(item);\n      }\n\n      function onKeyup(item: any, key: any) {\n        if (key.code === \"Enter\") {\n          if (item.autoSearchTrigger === \"enter\") {\n            doSearch();\n          }\n        }\n      }\n\n      let defaultSlot: any = null;\n      if (props.slots[\"search_\" + key]) {\n        defaultSlot = <fs-slot-render slots={props.slots[\"search_\" + key]} scope={buildFieldContext(key)} />;\n      } else if (item.render) {\n        defaultSlot = <fs-render render-func={item.render} scope={buildFieldContext(key)} />;\n      } else if (item.component && item.component.show !== false) {\n        defaultSlot = (\n          <fs-component-render\n            ref={(value: any) => {\n              componentRenderRefs.value[key] = value;\n            }}\n            model-value={get(formData, key)}\n            onKeyup={($event: any) => {\n              onKeyup(item, $event);\n            }}\n            {...item.component}\n            scope={buildFieldContext(key)}\n            onUpdate:modelValue={_onUpdateModelValue}\n            onInput={_onInput}\n          />\n        );\n      }\n\n      const splitedKey = splitKey(key);\n\n      return ui.formItem.render({\n        prop: key,\n        label: item.title,\n        props: {\n          ...item,\n          label: item.title,\n          [ui.formItem.prop]: splitedKey,\n          path: key,\n          rulePath: key\n        },\n        slots: {\n          default() {\n            return defaultSlot;\n          }\n        }\n      });\n    }\n\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.getTargetRef();\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form: formData, validatedForm: props.validatedForm, getComponentRef };\n    }\n\n    function buildFieldContext(key: string) {\n      return { ...getContextFn(), key, value: _.get(formData, key) };\n    }\n\n    async function doValidate(silent: boolean = false, trigger: string = \"search\"): Promise<boolean> {\n      try {\n        if (props.validate) {\n          await ui.form.validateWrap(searchFormRef.value);\n        }\n        return true;\n      } catch (e: any) {\n        if (!silent) {\n          ctx.emit(\"validate-error\", { ...getContextFn(), error: e, trigger });\n        }\n\n        return false;\n      }\n    }\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        ctx.emit(\"search\", getContextFn());\n      }\n    }\n\n    async function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(formData);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(formData, entry[0]);\n        } else {\n          _.set(formData, entry[0], initialValue);\n        }\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        if (props.reset) {\n          props.reset(getContextFn());\n        }\n        // 表单重置事件\n        ctx.emit(\"_reset\", getContextFn());\n        ctx.emit(\"reset\", getContextFn());\n        if (props.searchAfterReset) {\n          doSearch();\n        }\n      }\n    }\n\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      if (props.debounce !== false) {\n        let wait = props.debounce?.wait || 500;\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return formData;\n    }\n    function getValidatedForm() {\n      return props.validatedForm;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(formData), (item) => {\n          delete formData[item];\n        });\n      }\n      doMerge(formData, newForm);\n      onFormValidated();\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    async function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(formData, key, value);\n\n      const silent = props.validateOnChangeSilent;\n      if (props.validateOnChange && (await doValidate(silent, \"change\"))) {\n        onFormValidated();\n      }\n\n      if (item.valueChange) {\n        const key = item.key;\n        const value = formData[key];\n        const componentRef = getComponentRef(key);\n        const valueChange = item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        valueChange({ key, value, componentRef, ...getContextFn() });\n      }\n\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      if (!props.validate) {\n        return [];\n      }\n      return props.options.rules;\n    });\n\n    onFormValidated();\n    return {\n      get,\n      ui,\n      onValueChanged,\n      doValidate,\n      doSearch,\n      doReset,\n      formData,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      getValidatedForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      buildFieldContext,\n      getContextFn\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  &.fs-search-v2 {\n    //display: flex;\n    //flex-wrap: nowrap;\n    .search-left {\n    }\n\n    .search-right {\n      flex: 1;\n    }\n\n    .ant-form-inline {\n      flex-wrap: wrap;\n    }\n\n    .fs-search-form {\n      display: flex;\n      align-items: center;\n      flex-wrap: wrap;\n\n      .ant-picker,\n      .n-date-picker,\n      .el-select,\n      .el-date-editor {\n        width: 100%;\n      }\n\n      .ant-btn-loading-icon {\n        display: flex;\n        margin-left: 2px;\n        margin-right: 2px;\n      }\n\n      &.el-form--label-top {\n        .el-form-item {\n          display: block;\n        }\n      }\n\n      .el-form-item {\n        margin-bottom: 4px;\n        margin-top: 4px;\n        display: flex;\n        align-items: center;\n      }\n\n      &.el-form--inline {\n        .el-input {\n          width: 100%;\n        }\n      }\n\n      .el-form-item__content {\n        display: flex;\n        align-items: center;\n      }\n    }\n\n    .fs-search-col {\n      position: relative;\n      // antdv\n      .ant-form-item-explain,\n      .el-form-item__error {\n        float: left;\n        position: absolute;\n        bottom: 3px;\n        right: 8px;\n        pointer-events: none;\n        top: auto;\n        left: auto;\n        visibility: hidden;\n      }\n      .el-form-item__error {\n        bottom: 10px;\n      }\n      &:hover {\n        .ant-form-item-explain,\n        .el-form-item__error {\n          visibility: visible;\n        }\n      }\n    }\n  }\n\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.collapseTransition.name\">\n    <div v-if=\"show !== false\" class=\"fs-search\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"form\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <div class=\"fs-search-box\">\n          <div class=\"fs-search-main\">\n            <div\n              class=\"fs-search-columns\"\n              :class=\"{ 'fs-search-collapse': collapse }\"\n              :style=\"{ height: computedColumnBoxHeight }\"\n            >\n              <component :is=\"ui.row.name\" ref=\"columnsRowRef\">\n                <div v-if=\"slots['search-left']\" class=\"fs-search-col\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-left']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <template v-for=\"(item, key) in computedColumns\" :key=\"key\">\n                  <component :is=\"computedColName\" v-if=\"item.show === true\" class=\"fs-search-col\" v-bind=\"item.col\">\n                    <component :is=\"ui.formItem.name\" v-bind=\"item\" :[ui.formItem.prop]=\"key\" :label=\"item.title\">\n                      <template v-if=\"slots['search_' + key]\">\n                        <fs-slot-render :slots=\"slots['search_' + key]\" :scope=\"{ ...searchEventContextRef, key }\" />\n                      </template>\n                      <template v-else>\n                        <fs-component-render\n                          v-if=\"item.component && item.component.show !== false\"\n                          :ref=\"\n                            (el: any) => {\n                              if (el) {\n                                componentRenderRefs[item.key] = el;\n                              }\n                            }\n                          \"\n                          :model-value=\"get(form, key)\"\n                          v-bind=\"item.component\"\n                          :scope=\"searchEventContextRef\"\n                          @update:modelValue=\"onValueChanged($event, item)\"\n                          @input=\"onInput(item)\"\n                        />\n                      </template>\n                    </component>\n                  </component>\n                </template>\n\n                <div v-if=\"slots['search-middle']\" class=\"fs-search-col fs-search-middle\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <fs-search-buttons v-if=\"!computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n                <div v-if=\"slots['search-right']\" class=\"fs-search-col fs-search-right\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-right']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n              </component>\n            </div>\n            <fs-search-buttons v-if=\"computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n          </div>\n\n          <div v-if=\"computedIsMultiLine\" class=\"fs-search-action\">\n            <component :is=\"ui.formItem.name\">\n              <fs-button :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\" @click=\"toggleCollapse\" />\n            </component>\n          </div>\n        </div>\n      </component>\n    </div>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, reactive, ref, Ref, unref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonsProps, SearchEventContext, SearchItemProps } from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearchV1\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * tabs\n     * { show , options,key, default}\n     */\n    tabs: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * {search:{...FsButton},reset:{...FsButton}}\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n    /**\n     * 布局, single-line 单行， multi-line 多行（支持展开收起）\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 是否折叠\n     */\n    collapse: {\n      type: Boolean,\n      default: false\n    }\n  } as any,\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 重置事件\n     **/\n    \"reset\",\n    \"collapse\",\n    \"update:collapse\"\n  ],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    // 异步setup需要放在第一个await之前\n    // onMounted is called when there is no active component instance to be associated with.\n    //为啥会有这个警告\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n        const columnsList = columnsRowRef.value.$el.children;\n        if (columnsList && columnsList.length > 1) {\n          columnsLineHeightRef.value = columnsList[1].offsetHeight + 2;\n        }\n      }\n    });\n\n    let autoSearch: any = null;\n    function createInitialForm() {\n      return _.cloneDeep(props.initialForm || {});\n    }\n    const form = reactive(createInitialForm());\n    const { doComputed, AsyncComputeValue } = useCompute();\n    _.each(props.columns, (item) => {\n      if (item.value != null && item.value instanceof AsyncComputeValue) {\n        logger.warn(\"search.value配置不支持AsyncCompute类型的动态计算\");\n      }\n    });\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const computedColumns = doComputed(\n      () => {\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (value) => {\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(value, (item) => {\n            delete item.rules;\n          });\n        }\n        // 合并col\n        if (props.col) {\n          _.forEach(value, (v) => {\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(value, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    //默认值\n    _.forEach(computedColumns.value, (column, key) => {\n      if (column.value === undefined) {\n        return;\n      }\n      const defValue = unref(column.value);\n      if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n        //默认值\n        form[key] = defValue;\n      }\n    });\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.$refs?.targetRef;\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form, validatedForm: form, getComponentRef };\n    }\n\n    const searchEventContextRef: Ref<SearchEventContext> = ref(getContextFn());\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      const valid = await ui.form.validateWrap(searchFormRef.value);\n      if (valid) {\n        ctx.emit(\"search\", searchEventContextRef.value);\n      } else {\n        ui.message.error({\n          message: t(\"fs.search.error.message\")\n        });\n        return false;\n      }\n    }\n\n    function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n\n      if (props.reset) {\n        props.reset(searchEventContextRef.value);\n      }\n      // 表单重置事件\n      ctx.emit(\"reset\", getContextFn());\n      if (props.searchAfterReset) {\n        nextTick(() => {\n          doSearch();\n        });\n      }\n    }\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      if (props.debounce !== false) {\n        let wait = props.debounce?.wait || 500;\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return form;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(form), (item) => {\n          delete form[item];\n        });\n      }\n      doMerge(form, newForm);\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(form, key, value);\n      if (item.valueChange) {\n        const key = item.key;\n        const value = form[key];\n        const componentRef = getComponentRef(key);\n        const valueChange = item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        valueChange({ key, value, componentRef, ...getContextFn() });\n      }\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      if (!props.validate) {\n        return [];\n      }\n      return props.options.rules;\n    });\n\n    //-----多行模式折叠\n\n    const columnsRowRef = ref();\n    const columnsBoxHeightRef = ref(0);\n    const columnsLineHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      ctx.emit(\"update:collapse\", !props.collapse);\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    const computedColName = computed(() => {\n      if (props.layout === \"multi-line\") {\n        return ui.col.name;\n      }\n      return \"div\";\n    });\n    const computedIsMultiLine = computed(() => {\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value) {\n        return \"auto\";\n      }\n      if (props.collapse) {\n        return columnsLineHeightRef.value ? columnsLineHeightRef.value + \"px\" : \"\";\n      } else {\n        return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n      }\n    });\n\n    return {\n      get: (form: any, key: any) => {\n        return _.get(form, key);\n      },\n      ui,\n      onValueChanged,\n      doSearch,\n      doReset,\n      form,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedColName,\n      computedIsMultiLine,\n      toggleCollapse,\n      searchEventContextRef\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  //display: flex;\n  //flex-wrap: nowrap;\n  .search-left {\n  }\n  .search-right {\n    flex: 1;\n  }\n  .ant-form-inline {\n    flex-wrap: wrap;\n  }\n  .fs-search-form {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    //& > * {\n    //  margin-bottom: 4px;\n    //  margin-top: 4px;\n    //  margin-right: 10px;\n    //}\n\n    .fs-search-box {\n      display: flex;\n      .fs-search-main {\n        display: flex;\n        flex-direction: row;\n      }\n    }\n    .fs-search-col {\n      & > * {\n        margin: 0px 5px;\n      }\n      margin: 1px 0;\n      &:first-child {\n        // margin-left: 0;\n      }\n    }\n\n    .el-form-item {\n      margin-bottom: 4px;\n      margin-top: 4px;\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form--inline {\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form-item__content {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  .fs-search-btns {\n    .fs-button {\n      margin-right: 5px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        .fs-search-columns {\n          height: auto;\n          overflow-y: hidden;\n          // transition: all 0.3s linear;\n          // will-change: height;\n        }\n        .fs-search-btns {\n          width: 100%;\n          text-align: center;\n          margin-top: 4px;\n          .el-form-item__content {\n            justify-content: center;\n          }\n\n          .n-form-item-blank {\n            display: flex;\n            justify-content: center;\n          }\n        }\n      }\n    }\n    .fs-search-action {\n      .ant-form-item {\n        margin-right: 2px;\n      }\n    }\n  }\n}\n\n.fs-search {\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.collapseTransition.name\">\n    <div v-if=\"show !== false\" class=\"fs-search\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"form\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <div class=\"fs-search-box\">\n          <div class=\"fs-search-main\">\n            <div\n              class=\"fs-search-columns\"\n              :class=\"{ 'fs-search-collapse': collapse }\"\n              :style=\"{ height: computedColumnBoxHeight }\"\n            >\n              <component :is=\"ui.row.name\" ref=\"columnsRowRef\">\n                <div v-if=\"slots['search-left']\" class=\"fs-search-col\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-left']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <template v-for=\"(item, key) in computedColumns\" :key=\"key\">\n                  <component :is=\"computedColName\" v-if=\"item.show === true\" class=\"fs-search-col\" v-bind=\"item.col\">\n                    <component :is=\"ui.formItem.name\" v-bind=\"item\" :[ui.formItem.prop]=\"key\" :label=\"item.title\">\n                      <template v-if=\"slots['search_' + key]\">\n                        <fs-slot-render :slots=\"slots['search_' + key]\" :scope=\"{ ...searchEventContextRef, key }\" />\n                      </template>\n                      <template v-else>\n                        <fs-component-render\n                          v-if=\"item.component && item.component.show !== false\"\n                          :ref=\"\n                            (el: any) => {\n                              if (el) {\n                                componentRenderRefs[item.key] = el;\n                              }\n                            }\n                          \"\n                          :model-value=\"get(form, key)\"\n                          v-bind=\"item.component\"\n                          :scope=\"searchEventContextRef\"\n                          @update:modelValue=\"onValueChanged($event, item)\"\n                          @input=\"onInput(item)\"\n                        />\n                      </template>\n                    </component>\n                  </component>\n                </template>\n\n                <div v-if=\"slots['search-middle']\" class=\"fs-search-col fs-search-middle\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <fs-search-buttons v-if=\"!computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n                <div v-if=\"slots['search-right']\" class=\"fs-search-col fs-search-right\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-right']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n              </component>\n            </div>\n            <fs-search-buttons v-if=\"computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n          </div>\n\n          <div v-if=\"computedIsMultiLine\" class=\"fs-search-action\">\n            <component :is=\"ui.formItem.name\">\n              <fs-button :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\" @click=\"toggleCollapse\" />\n            </component>\n          </div>\n        </div>\n      </component>\n    </div>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, reactive, ref, Ref, unref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonsProps, SearchEventContext, SearchItemProps } from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearchV1\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * tabs\n     * { show , options,key, default}\n     */\n    tabs: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * {search:{...FsButton},reset:{...FsButton}}\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n    /**\n     * 布局, single-line 单行， multi-line 多行（支持展开收起）\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 是否折叠\n     */\n    collapse: {\n      type: Boolean,\n      default: false\n    }\n  } as any,\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 重置事件\n     **/\n    \"reset\",\n    \"collapse\",\n    \"update:collapse\"\n  ],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    // 异步setup需要放在第一个await之前\n    // onMounted is called when there is no active component instance to be associated with.\n    //为啥会有这个警告\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n        const columnsList = columnsRowRef.value.$el.children;\n        if (columnsList && columnsList.length > 1) {\n          columnsLineHeightRef.value = columnsList[1].offsetHeight + 2;\n        }\n      }\n    });\n\n    let autoSearch: any = null;\n    function createInitialForm() {\n      return _.cloneDeep(props.initialForm || {});\n    }\n    const form = reactive(createInitialForm());\n    const { doComputed, AsyncComputeValue } = useCompute();\n    _.each(props.columns, (item) => {\n      if (item.value != null && item.value instanceof AsyncComputeValue) {\n        logger.warn(\"search.value配置不支持AsyncCompute类型的动态计算\");\n      }\n    });\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const computedColumns = doComputed(\n      () => {\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (value) => {\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(value, (item) => {\n            delete item.rules;\n          });\n        }\n        // 合并col\n        if (props.col) {\n          _.forEach(value, (v) => {\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(value, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    //默认值\n    _.forEach(computedColumns.value, (column, key) => {\n      if (column.value === undefined) {\n        return;\n      }\n      const defValue = unref(column.value);\n      if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n        //默认值\n        form[key] = defValue;\n      }\n    });\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.$refs?.targetRef;\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form, validatedForm: form, getComponentRef };\n    }\n\n    const searchEventContextRef: Ref<SearchEventContext> = ref(getContextFn());\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      const valid = await ui.form.validateWrap(searchFormRef.value);\n      if (valid) {\n        ctx.emit(\"search\", searchEventContextRef.value);\n      } else {\n        ui.message.error({\n          message: t(\"fs.search.error.message\")\n        });\n        return false;\n      }\n    }\n\n    function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n\n      if (props.reset) {\n        props.reset(searchEventContextRef.value);\n      }\n      // 表单重置事件\n      ctx.emit(\"reset\", getContextFn());\n      if (props.searchAfterReset) {\n        nextTick(() => {\n          doSearch();\n        });\n      }\n    }\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      if (props.debounce !== false) {\n        let wait = props.debounce?.wait || 500;\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return form;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(form), (item) => {\n          delete form[item];\n        });\n      }\n      doMerge(form, newForm);\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(form, key, value);\n      if (item.valueChange) {\n        const key = item.key;\n        const value = form[key];\n        const componentRef = getComponentRef(key);\n        const valueChange = item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        valueChange({ key, value, componentRef, ...getContextFn() });\n      }\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      if (!props.validate) {\n        return [];\n      }\n      return props.options.rules;\n    });\n\n    //-----多行模式折叠\n\n    const columnsRowRef = ref();\n    const columnsBoxHeightRef = ref(0);\n    const columnsLineHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      ctx.emit(\"update:collapse\", !props.collapse);\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    const computedColName = computed(() => {\n      if (props.layout === \"multi-line\") {\n        return ui.col.name;\n      }\n      return \"div\";\n    });\n    const computedIsMultiLine = computed(() => {\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value) {\n        return \"auto\";\n      }\n      if (props.collapse) {\n        return columnsLineHeightRef.value ? columnsLineHeightRef.value + \"px\" : \"\";\n      } else {\n        return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n      }\n    });\n\n    return {\n      get: (form: any, key: any) => {\n        return _.get(form, key);\n      },\n      ui,\n      onValueChanged,\n      doSearch,\n      doReset,\n      form,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedColName,\n      computedIsMultiLine,\n      toggleCollapse,\n      searchEventContextRef\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  //display: flex;\n  //flex-wrap: nowrap;\n  .search-left {\n  }\n  .search-right {\n    flex: 1;\n  }\n  .ant-form-inline {\n    flex-wrap: wrap;\n  }\n  .fs-search-form {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    //& > * {\n    //  margin-bottom: 4px;\n    //  margin-top: 4px;\n    //  margin-right: 10px;\n    //}\n\n    .fs-search-box {\n      display: flex;\n      .fs-search-main {\n        display: flex;\n        flex-direction: row;\n      }\n    }\n    .fs-search-col {\n      & > * {\n        margin: 0px 5px;\n      }\n      margin: 1px 0;\n      &:first-child {\n        // margin-left: 0;\n      }\n    }\n\n    .el-form-item {\n      margin-bottom: 4px;\n      margin-top: 4px;\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form--inline {\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form-item__content {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  .fs-search-btns {\n    .fs-button {\n      margin-right: 5px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        .fs-search-columns {\n          height: auto;\n          overflow-y: hidden;\n          // transition: all 0.3s linear;\n          // will-change: height;\n        }\n        .fs-search-btns {\n          width: 100%;\n          text-align: center;\n          margin-top: 4px;\n          .el-form-item__content {\n            justify-content: center;\n          }\n\n          .n-form-item-blank {\n            display: flex;\n            justify-content: center;\n          }\n        }\n      }\n    }\n    .fs-search-action {\n      .ant-form-item {\n        margin-right: 2px;\n      }\n    }\n  }\n}\n\n.fs-search {\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-search-layout-default\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n    <div class=\"fs-search-box\">\n      <div\n        class=\"fs-search-main\"\n        :class=\"{ 'fs-search-collapse': collapse }\"\n        :style=\"{ maxHeight: computedColumnBoxHeight }\"\n      >\n        <component :is=\"ui.row.name\" ref=\"columnsRowRef\" class=\"fs-search-columns\">\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-left\"></slot>\n          </span>\n          <!-- 查询字段render，需要定义props.columns -->\n          <template v-for=\"(item, key) of columns\" :key=\"key\">\n            <component :is=\"ui.col.name\" v-if=\"item.show\" class=\"fs-search-col\" v-bind=\"mergeCol(item.col)\">\n              <fs-render :render-func=\"item._cellRender\" :scope=\"getContextFn()\" />\n            </component>\n          </template>\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-middle\"></slot>\n          </span>\n          <component\n            :is=\"ui.col.name\"\n            v-if=\"!computedIsMultiLine\"\n            class=\"fs-search-col fs-search-buttons-group\"\n            v-bind=\"mergeCol(action?.col)\"\n          >\n            <component :is=\"ui.formItem.name\" :[ui.formItem.label]=\"action?.label\">\n              <!-- 查询按钮插槽-->\n              <slot name=\"search-buttons\" v-bind=\"getContextFn()\"></slot>\n              <slot name=\"search-right\" v-bind=\"getContextFn()\"></slot>\n            </component>\n          </component>\n        </component>\n      </div>\n      <div v-if=\"computedIsMultiLine\" class=\"fs-search-buttons-group fs-search-multi-line-buttons\">\n        <!-- 多行模式时的查询按钮-->\n        <slot name=\"search-buttons\"></slot>\n        <fs-button\n          v-if=\"collapseButton?.show !== false\"\n          :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\"\n          :text=\"\n            collapse\n              ? t('fs.search.container.collapseButton.text.expand')\n              : t('fs.search.container.collapseButton.text.collapse')\n          \"\n          v-bind=\"collapseButton\"\n          @click=\"toggleCollapse\"\n        />\n        <slot name=\"search-right\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { useUi } from \"../../use\";\nimport { computed, defineComponent, onMounted, ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useI18n } from \"../../locale\";\n\nexport default defineComponent({\n  name: \"FsSearchLayoutDefault\",\n  props: {\n    /**\n     * 是否收缩\n     */\n    collapse: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 展开按钮\n     */\n    collapseButton: {\n      type: Object\n    },\n\n    action: {\n      type: Object\n    },\n    /**\n     * 布局模式\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 查询字段列表，可以精细化自定义查询字段布局\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 默认的col配置\n     */\n    col: {\n      type: Object\n    },\n\n    /**\n     * 获取查询上下文\n     */\n    getContextFn: {\n      type: Function\n    }\n  },\n  emits: [\"update:collapse\", \"collapse\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { t } = useI18n();\n    const columnsRowRef = ref();\n    const computedIsMultiLine = computed(() => {\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n      }\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value || !props.collapse) {\n        return \"auto\";\n      }\n      return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n    });\n\n    const columnsBoxHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      ctx.emit(\"update:collapse\", !props.collapse);\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    function mergeCol(col: any) {\n      return _.merge({}, props.col, col);\n    }\n\n    return {\n      ui,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedIsMultiLine,\n      toggleCollapse,\n      mergeCol,\n      t\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search-layout-default {\n  width: 100%;\n\n  .fs-search-box {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n\n    .fs-search-main {\n      width: 100%;\n      display: flex;\n      height: auto;\n\n      .fs-search-columns {\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        height: auto;\n        padding: 4px 0 4px 0;\n\n        .fs-search-col {\n          min-width: 180px;\n          &.fs-search-slot {\n            min-width: 0;\n          }\n          & > * {\n            margin: 0px 4px;\n          }\n\n          margin: 4px 0;\n\n          &:first-child {\n            // margin-left: 0;\n          }\n\n          .ant-input-number,\n          .ant-picker,\n          .el-input-number,\n          .el-cascader,\n          .el-date-editor,\n          .n-select,\n          .n-date-picker,\n          .n-input-number {\n            width: 100%;\n          }\n          .el-date-editor .el-range__icon {\n            margin-left: 10px;\n          }\n          .el-date-editor .el-range__close-icon {\n            margin-right: 10px;\n          }\n        }\n      }\n    }\n  }\n\n  .fs-search-buttons-group {\n    display: flex;\n    align-items: center;\n\n    .fs-button {\n      margin: 0 2px 0 2px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        overflow: hidden;\n        height: auto;\n        transition: max-height 0.2s ease;\n\n        &.fs-search-collapse {\n          max-height: 42px !important;\n        }\n      }\n    }\n\n    .ant-form-item {\n      display: flex;\n\n      .ant-form-item-control {\n        flex: 1;\n        overflow: hidden;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-search-layout-default\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n    <div class=\"fs-search-box\">\n      <div\n        class=\"fs-search-main\"\n        :class=\"{ 'fs-search-collapse': collapse }\"\n        :style=\"{ maxHeight: computedColumnBoxHeight }\"\n      >\n        <component :is=\"ui.row.name\" ref=\"columnsRowRef\" class=\"fs-search-columns\">\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-left\"></slot>\n          </span>\n          <!-- 查询字段render，需要定义props.columns -->\n          <template v-for=\"(item, key) of columns\" :key=\"key\">\n            <component :is=\"ui.col.name\" v-if=\"item.show\" class=\"fs-search-col\" v-bind=\"mergeCol(item.col)\">\n              <fs-render :render-func=\"item._cellRender\" :scope=\"getContextFn()\" />\n            </component>\n          </template>\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-middle\"></slot>\n          </span>\n          <component\n            :is=\"ui.col.name\"\n            v-if=\"!computedIsMultiLine\"\n            class=\"fs-search-col fs-search-buttons-group\"\n            v-bind=\"mergeCol(action?.col)\"\n          >\n            <component :is=\"ui.formItem.name\" :[ui.formItem.label]=\"action?.label\">\n              <!-- 查询按钮插槽-->\n              <slot name=\"search-buttons\" v-bind=\"getContextFn()\"></slot>\n              <slot name=\"search-right\" v-bind=\"getContextFn()\"></slot>\n            </component>\n          </component>\n        </component>\n      </div>\n      <div v-if=\"computedIsMultiLine\" class=\"fs-search-buttons-group fs-search-multi-line-buttons\">\n        <!-- 多行模式时的查询按钮-->\n        <slot name=\"search-buttons\"></slot>\n        <fs-button\n          v-if=\"collapseButton?.show !== false\"\n          :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\"\n          :text=\"\n            collapse\n              ? t('fs.search.container.collapseButton.text.expand')\n              : t('fs.search.container.collapseButton.text.collapse')\n          \"\n          v-bind=\"collapseButton\"\n          @click=\"toggleCollapse\"\n        />\n        <slot name=\"search-right\"></slot>\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { useUi } from \"../../use\";\nimport { computed, defineComponent, onMounted, ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useI18n } from \"../../locale\";\n\nexport default defineComponent({\n  name: \"FsSearchLayoutDefault\",\n  props: {\n    /**\n     * 是否收缩\n     */\n    collapse: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 展开按钮\n     */\n    collapseButton: {\n      type: Object\n    },\n\n    action: {\n      type: Object\n    },\n    /**\n     * 布局模式\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 查询字段列表，可以精细化自定义查询字段布局\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 默认的col配置\n     */\n    col: {\n      type: Object\n    },\n\n    /**\n     * 获取查询上下文\n     */\n    getContextFn: {\n      type: Function\n    }\n  },\n  emits: [\"update:collapse\", \"collapse\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { t } = useI18n();\n    const columnsRowRef = ref();\n    const computedIsMultiLine = computed(() => {\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n      }\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value || !props.collapse) {\n        return \"auto\";\n      }\n      return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n    });\n\n    const columnsBoxHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      ctx.emit(\"update:collapse\", !props.collapse);\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    function mergeCol(col: any) {\n      return _.merge({}, props.col, col);\n    }\n\n    return {\n      ui,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedIsMultiLine,\n      toggleCollapse,\n      mergeCol,\n      t\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search-layout-default {\n  width: 100%;\n\n  .fs-search-box {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n\n    .fs-search-main {\n      width: 100%;\n      display: flex;\n      height: auto;\n\n      .fs-search-columns {\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        height: auto;\n        padding: 4px 0 4px 0;\n\n        .fs-search-col {\n          min-width: 180px;\n          &.fs-search-slot {\n            min-width: 0;\n          }\n          & > * {\n            margin: 0px 4px;\n          }\n\n          margin: 4px 0;\n\n          &:first-child {\n            // margin-left: 0;\n          }\n\n          .ant-input-number,\n          .ant-picker,\n          .el-input-number,\n          .el-cascader,\n          .el-date-editor,\n          .n-select,\n          .n-date-picker,\n          .n-input-number {\n            width: 100%;\n          }\n          .el-date-editor .el-range__icon {\n            margin-left: 10px;\n          }\n          .el-date-editor .el-range__close-icon {\n            margin-right: 10px;\n          }\n        }\n      }\n    }\n  }\n\n  .fs-search-buttons-group {\n    display: flex;\n    align-items: center;\n\n    .fs-button {\n      margin: 0 2px 0 2px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        overflow: hidden;\n        height: auto;\n        transition: max-height 0.2s ease;\n\n        &.fs-search-collapse {\n          max-height: 42px !important;\n        }\n      }\n    }\n\n    .ant-form-item {\n      display: flex;\n\n      .ant-form-item-control {\n        flex: 1;\n        overflow: hidden;\n      }\n    }\n  }\n}\n</style>\n", "<script lang=\"ts\">\nimport { defineComponent as __MACROS_defineComponent } from \"vue\";\nexport default /*#__PURE__*/ __MACROS_defineComponent({\n  name: \"FsTabsFilter\",\n  inheritAttrs: false\n});\n</script>\n<template>\n  <div class=\"fs-tabs-filter\">\n    <component :is=\"ui.tabs.name\" v-bind=\"binding\">\n      <component\n        :is=\"ui.tabPane.name\"\n        v-if=\"defaultOption.show\"\n        :[ui.tabPane.key]=\"__DEFAULT__\"\n        :[ui.tabPane.tab]=\"defaultOption.label\"\n      />\n      <component\n        :is=\"ui.tabPane.name\"\n        v-for=\"(item, index) of options\"\n        :key=\"index\"\n        :[ui.tabPane.key]=\"getValue(item)\"\n        :[ui.tabPane.tab]=\"getLabel(item)\"\n      />\n    </component>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { computed, useAttrs } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useMerge, useUi } from \"../../use\";\n;\n\ntype TabsFilterDefaultOption = { show?: boolean; value?: any; label?: string };\ntype TabsFilterOption = { value: any; label: string; [key: string]: any };\ninterface TabsFilterProps {\n  name: string; //查询字段的key,search参数key\n  show?: boolean;\n  defaultOption?: TabsFilterDefaultOption;\n  options: TabsFilterOption[];\n  modelValue: any;\n  value?: string;\n  label?: string;\n}\n\nconst attrs = useAttrs();\nconst { merge } = useMerge();\nconst props = withDefaults(defineProps<TabsFilterProps>(), {\n  show: false,\n  value: \"value\",\n  label: \"label\",\n  defaultOption: undefined,\n  options: () => {\n    return [];\n  }\n});\n\nconst defaultOption = computed(() => {\n  const def = {\n    show: true,\n    value: null,\n    label: \"全部\"\n  } as TabsFilterDefaultOption;\n  return merge(def, props.defaultOption || {});\n});\n\nconst __DEFAULT__ = \"_default_key_\";\nconst binding = computed(() => {\n  const value =\n    props.modelValue == null || props.modelValue === defaultOption.value.value ? __DEFAULT__ : props.modelValue;\n  return {\n    type: \"card\",\n    ...attrs,\n    [ui.tabs.modelValue]: value,\n    [\"onUpdate:\" + ui.tabs.modelValue]: onUpdateActiveKey\n  };\n});\n\nconst emit = defineEmits([\"update:modelValue\", \"change\"]);\n\nfunction onUpdateActiveKey(value: any) {\n  if (__DEFAULT__ === value) {\n    value = defaultOption.value.value;\n  }\n  const oldValue = props.modelValue;\n  emit(\"update:modelValue\", value);\n  if (oldValue !== value) {\n    emit(\"change\", value);\n  }\n}\n\nfunction getValue(option: TabsFilterOption) {\n  return option[props.value];\n}\nfunction getLabel(option: TabsFilterOption) {\n  return option[props.label];\n}\n\nconst { ui } = useUi();\n</script>\n\n<style lang=\"less\">\n.fs-tabs-filter {\n  margin: 0;\n  width: 100%;\n  //width: 100%;\n  .ant-tabs > .ant-tabs-nav,\n  .ant-tabs > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  .el-tabs--card > .el-tabs__header {\n    margin-bottom: 0;\n  }\n\n  .n-tab-pane {\n    padding: 0 !important;\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.radioGroup.name\">\n    <component\n      :is=\"computedRadioName\"\n      v-for=\"item of computedOptions\"\n      :key=\"getValue(item)\"\n      :[ui.radio.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n    >\n      {{ getLabel(item) }}\n    </component>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { uiContext } from \"../../ui\";\nimport { ref, computed, defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n/**\n * 字典单选框\n * 支持el-radio-group|a-radio-group的参数\n *\n */\nexport default defineComponent({\n  name: \"FsDictRadio\",\n  props: {\n    /**\n     * 数据字典配置\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n\n    /**\n     * radio组件名称\n     * antdv使用button样式的时候有用\n     * 即将废弃,请使用optionName\n     */\n    radioName: {},\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\"dict-change\"],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n\n    if (props.radioName) {\n      console.warn(\"参数radioName即将废弃，请改成optionName\");\n    }\n    const computedRadioName = computed(() => {\n      return props.optionName ?? props.radioName ?? ui.radio.name;\n    });\n\n    let usedDict = useDict(props, ctx, ui.radioGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      computedRadioName,\n      ...usedDict,\n      computedOptions\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.radioGroup.name\">\n    <component\n      :is=\"computedRadioName\"\n      v-for=\"item of computedOptions\"\n      :key=\"getValue(item)\"\n      :[ui.radio.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n    >\n      {{ getLabel(item) }}\n    </component>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { uiContext } from \"../../ui\";\nimport { ref, computed, defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n/**\n * 字典单选框\n * 支持el-radio-group|a-radio-group的参数\n *\n */\nexport default defineComponent({\n  name: \"FsDictRadio\",\n  props: {\n    /**\n     * 数据字典配置\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n\n    /**\n     * radio组件名称\n     * antdv使用button样式的时候有用\n     * 即将废弃,请使用optionName\n     */\n    radioName: {},\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\"dict-change\"],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n\n    if (props.radioName) {\n      console.warn(\"参数radioName即将废弃，请改成optionName\");\n    }\n    const computedRadioName = computed(() => {\n      return props.optionName ?? props.radioName ?? ui.radio.name;\n    });\n\n    let usedDict = useDict(props, ctx, ui.radioGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      computedRadioName,\n      ...usedDict,\n      computedOptions\n    };\n  }\n});\n</script>\n", null, "<template>\n  <span class=\"fs-values-format\">\n    <template v-if=\"itemRender\">\n      <fs-render v-for=\"item in computedValueItems\" :key=\"getValue(item)\" :render-func=\"itemRender\" :scope=\"item\" />\n    </template>\n    <template v-else-if=\"type === 'text'\">\n      <span v-for=\"item in computedValueItems\" :key=\"getValue(item)\" @click=\"doClick(item)\">{{ getLabel(item) }}</span>\n    </template>\n    <template v-else>\n      <template v-for=\"(item, index) in computedValueItems\" :key=\"getValue(item)\">\n        <component\n          :is=\"ui.tag.name\"\n          class=\"fs-tag\"\n          size=\"small\"\n          :closable=\"closable\"\n          v-bind=\"item\"\n          :icon=\"null\"\n          :name=\"null\"\n          @close=\"doClose(index, item)\"\n          @click=\"doClick(item)\"\n        >\n          <template v-if=\"item.icon\">\n            <fs-icon :icon=\"item.icon\" class=\"fs-tag-icon\" />\n          </template>\n          {{ getLabel(item) }}\n        </component>\n      </template>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, Ref } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nfunction getHashCode(str: string) {\n  if (str == null) {\n    return 0;\n  }\n  if (typeof str !== \"string\") {\n    str = JSON.stringify(str);\n  }\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n  if (str.length === 0) return hash;\n  for (i = 0, len = str.length; i < len; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction buildArrayValue(props: any) {\n  let valueArr = [];\n  if (typeof props.modelValue === \"string\" && props.multiple && props.separator != null && props.separator !== \"\") {\n    valueArr = props.modelValue.split(props.separator);\n  } else if (props.modelValue instanceof Array) {\n    // 本来就是数组的\n    valueArr = props.modelValue;\n  } else {\n    valueArr = [props.modelValue];\n  }\n  return valueArr;\n}\n\n/**\n * value格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsValuesFormat\",\n  props: {\n    /**\n     * 值\n     */\n    modelValue: {},\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 是否多选\n     */\n    multiple: { default: true },\n    /**\n     * 分隔符<br/>\n     * 多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     * 传入空字符串，表示不分割<br/>\n     */\n    separator: { default: \",\" },\n\n    /**\n     * 颜色\n     * element=【auto, primary, success, warning, danger ,info】\n     * antdv=【auto, primary, success, blue,red,...】\n     * 配置auto，则自动根据value值hashcode分配颜色值\n     */\n    color: {},\n    /**\n     * 效果（仅element）\n     **/\n    effect: {},\n    /**\n     * 自动染色颜色值列表\n     */\n    autoColors: {\n      type: Array\n    },\n    /**\n     * 自动主题列表（仅element）\n     * 【 light, plain 】\n     */\n    autoEffects: {\n      type: Array\n    },\n    /**\n     * 显示类型：【text, tag】\n     */\n    type: {\n      default: \"tag\"\n    },\n    /**\n     * 值的类型，【 value | object】\n     */\n    valueType: {\n      type: String\n    },\n    /**\n     * 当value值不在字典中时默认显示的文本\n     */\n    defaultLabel: {},\n\n    /**\n     * label自定义render\n     */\n    labelFormatter: {\n      type: Function\n    },\n    /**\n     * 自定义选项render\n     */\n    itemRender: {\n      type: Function\n    },\n\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"click\", \"dict-change\", \"close\", \"update:modelValue\"],\n  setup(props: any, ctx: any) {\n    // trace.trace(\"values-format\");\n    // console.log(\"values-format init\", props.modelValue);\n    //const dict = useDict(props, ctx);\n    const { ui } = useUi();\n    const COLOR_LIST = ui.tag.colors;\n    const EFFECT_LIST = [\"plain\", \"light\"];\n\n    const usedDict = useDict(props, ctx);\n    const { getColor, getValue, removePropValue } = usedDict;\n    usedDict.watchValue();\n    function setColor(props: any, item: any) {\n      if (!item.effect && props.effect) {\n        item.effect = props.effect;\n      }\n      const typeKey = ui.tag.type;\n      const color = getColor(item);\n      if (color != null) {\n        //如果已经配置了color\n        if (typeof color != \"string\") {\n          return;\n        }\n        //将原有的color字段删掉，避免naive color报错\n        removePropValue(item, \"color\");\n        item[typeKey] = color;\n        return;\n      }\n      if (props.color === \"auto\") {\n        const hashcode = getHashCode(getValue(item));\n        const colors = props.autoColors ? props.autoColors : COLOR_LIST;\n        item[typeKey] = colors[hashcode % colors.length];\n        const effects = props.autoEffects ? props.autoEffects : EFFECT_LIST;\n        item.effect = effects[Math.floor(hashcode / colors.length) % effects.length];\n      } else {\n        item[typeKey] = props.color;\n      }\n    }\n\n    const computedValueItems: Ref<any[]> = computed(() => {\n      if (props.valueType === \"object\") {\n        if (props.modelValue && !Array.isArray(props.modelValue)) {\n          return [props.modelValue];\n        }\n        return props.modelValue;\n      }\n\n      const dict = usedDict.getDict();\n      if (props.modelValue == null || props.modelValue === \"\") {\n        return [];\n      }\n      const valueArr = buildArrayValue(props);\n\n      let options = [];\n\n      const valueProp = props.dict?.value || \"value\";\n      const labelProp = props.dict?.label || \"label\";\n\n      if (dict) {\n        options = dict.getNodesFromDataMap(valueArr);\n        //设置默认label\n        _.forEach(options, (item) => {\n          if (item[labelProp] == null) {\n            item[labelProp] = props.defaultLabel || item[valueProp];\n          }\n        });\n      } else {\n        options = [];\n        _.forEach(valueArr, (item) => {\n          if (item instanceof Object) {\n            options.push(item);\n          } else {\n            options.push({\n              [valueProp]: item,\n              [labelProp]: item\n            });\n          }\n        });\n      }\n\n      const colorfulOptions: any = [];\n      _.forEach(options, (item) => {\n        colorfulOptions.push(_.omit(item, \"children\"));\n      });\n      _.forEach(colorfulOptions, (item) => {\n        setColor(props, item);\n      });\n      return colorfulOptions;\n    });\n\n    function doClick(item: any) {\n      ctx.emit(\"click\", { item: item });\n    }\n    function doClose(index: number, item: any) {\n      ctx.emit(\"close\", { item, index });\n      const newValues: any[] = [];\n      for (let i = 0; i < computedValueItems.value.length; i++) {\n        if (i !== index) {\n          newValues.push(getValue(computedValueItems.value[i]));\n        }\n      }\n      ctx.emit(\"update:modelValue\", newValues);\n    }\n\n    return {\n      ui,\n      ...usedDict,\n      doClick,\n      computedValueItems,\n      doClose\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-values-format .fs-tag {\n  margin: 2px;\n  cursor: pointer;\n  .fs-tag-icon {\n  }\n}\n</style>\n", "<template>\n  <span class=\"fs-values-format\">\n    <template v-if=\"itemRender\">\n      <fs-render v-for=\"item in computedValueItems\" :key=\"getValue(item)\" :render-func=\"itemRender\" :scope=\"item\" />\n    </template>\n    <template v-else-if=\"type === 'text'\">\n      <span v-for=\"item in computedValueItems\" :key=\"getValue(item)\" @click=\"doClick(item)\">{{ getLabel(item) }}</span>\n    </template>\n    <template v-else>\n      <template v-for=\"(item, index) in computedValueItems\" :key=\"getValue(item)\">\n        <component\n          :is=\"ui.tag.name\"\n          class=\"fs-tag\"\n          size=\"small\"\n          :closable=\"closable\"\n          v-bind=\"item\"\n          :icon=\"null\"\n          :name=\"null\"\n          @close=\"doClose(index, item)\"\n          @click=\"doClick(item)\"\n        >\n          <template v-if=\"item.icon\">\n            <fs-icon :icon=\"item.icon\" class=\"fs-tag-icon\" />\n          </template>\n          {{ getLabel(item) }}\n        </component>\n      </template>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, Ref } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nfunction getHashCode(str: string) {\n  if (str == null) {\n    return 0;\n  }\n  if (typeof str !== \"string\") {\n    str = JSON.stringify(str);\n  }\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n  if (str.length === 0) return hash;\n  for (i = 0, len = str.length; i < len; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction buildArrayValue(props: any) {\n  let valueArr = [];\n  if (typeof props.modelValue === \"string\" && props.multiple && props.separator != null && props.separator !== \"\") {\n    valueArr = props.modelValue.split(props.separator);\n  } else if (props.modelValue instanceof Array) {\n    // 本来就是数组的\n    valueArr = props.modelValue;\n  } else {\n    valueArr = [props.modelValue];\n  }\n  return valueArr;\n}\n\n/**\n * value格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsValuesFormat\",\n  props: {\n    /**\n     * 值\n     */\n    modelValue: {},\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 是否多选\n     */\n    multiple: { default: true },\n    /**\n     * 分隔符<br/>\n     * 多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     * 传入空字符串，表示不分割<br/>\n     */\n    separator: { default: \",\" },\n\n    /**\n     * 颜色\n     * element=【auto, primary, success, warning, danger ,info】\n     * antdv=【auto, primary, success, blue,red,...】\n     * 配置auto，则自动根据value值hashcode分配颜色值\n     */\n    color: {},\n    /**\n     * 效果（仅element）\n     **/\n    effect: {},\n    /**\n     * 自动染色颜色值列表\n     */\n    autoColors: {\n      type: Array\n    },\n    /**\n     * 自动主题列表（仅element）\n     * 【 light, plain 】\n     */\n    autoEffects: {\n      type: Array\n    },\n    /**\n     * 显示类型：【text, tag】\n     */\n    type: {\n      default: \"tag\"\n    },\n    /**\n     * 值的类型，【 value | object】\n     */\n    valueType: {\n      type: String\n    },\n    /**\n     * 当value值不在字典中时默认显示的文本\n     */\n    defaultLabel: {},\n\n    /**\n     * label自定义render\n     */\n    labelFormatter: {\n      type: Function\n    },\n    /**\n     * 自定义选项render\n     */\n    itemRender: {\n      type: Function\n    },\n\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"click\", \"dict-change\", \"close\", \"update:modelValue\"],\n  setup(props: any, ctx: any) {\n    // trace.trace(\"values-format\");\n    // console.log(\"values-format init\", props.modelValue);\n    //const dict = useDict(props, ctx);\n    const { ui } = useUi();\n    const COLOR_LIST = ui.tag.colors;\n    const EFFECT_LIST = [\"plain\", \"light\"];\n\n    const usedDict = useDict(props, ctx);\n    const { getColor, getValue, removePropValue } = usedDict;\n    usedDict.watchValue();\n    function setColor(props: any, item: any) {\n      if (!item.effect && props.effect) {\n        item.effect = props.effect;\n      }\n      const typeKey = ui.tag.type;\n      const color = getColor(item);\n      if (color != null) {\n        //如果已经配置了color\n        if (typeof color != \"string\") {\n          return;\n        }\n        //将原有的color字段删掉，避免naive color报错\n        removePropValue(item, \"color\");\n        item[typeKey] = color;\n        return;\n      }\n      if (props.color === \"auto\") {\n        const hashcode = getHashCode(getValue(item));\n        const colors = props.autoColors ? props.autoColors : COLOR_LIST;\n        item[typeKey] = colors[hashcode % colors.length];\n        const effects = props.autoEffects ? props.autoEffects : EFFECT_LIST;\n        item.effect = effects[Math.floor(hashcode / colors.length) % effects.length];\n      } else {\n        item[typeKey] = props.color;\n      }\n    }\n\n    const computedValueItems: Ref<any[]> = computed(() => {\n      if (props.valueType === \"object\") {\n        if (props.modelValue && !Array.isArray(props.modelValue)) {\n          return [props.modelValue];\n        }\n        return props.modelValue;\n      }\n\n      const dict = usedDict.getDict();\n      if (props.modelValue == null || props.modelValue === \"\") {\n        return [];\n      }\n      const valueArr = buildArrayValue(props);\n\n      let options = [];\n\n      const valueProp = props.dict?.value || \"value\";\n      const labelProp = props.dict?.label || \"label\";\n\n      if (dict) {\n        options = dict.getNodesFromDataMap(valueArr);\n        //设置默认label\n        _.forEach(options, (item) => {\n          if (item[labelProp] == null) {\n            item[labelProp] = props.defaultLabel || item[valueProp];\n          }\n        });\n      } else {\n        options = [];\n        _.forEach(valueArr, (item) => {\n          if (item instanceof Object) {\n            options.push(item);\n          } else {\n            options.push({\n              [valueProp]: item,\n              [labelProp]: item\n            });\n          }\n        });\n      }\n\n      const colorfulOptions: any = [];\n      _.forEach(options, (item) => {\n        colorfulOptions.push(_.omit(item, \"children\"));\n      });\n      _.forEach(colorfulOptions, (item) => {\n        setColor(props, item);\n      });\n      return colorfulOptions;\n    });\n\n    function doClick(item: any) {\n      ctx.emit(\"click\", { item: item });\n    }\n    function doClose(index: number, item: any) {\n      ctx.emit(\"close\", { item, index });\n      const newValues: any[] = [];\n      for (let i = 0; i < computedValueItems.value.length; i++) {\n        if (i !== index) {\n          newValues.push(getValue(computedValueItems.value[i]));\n        }\n      }\n      ctx.emit(\"update:modelValue\", newValues);\n    }\n\n    return {\n      ui,\n      ...usedDict,\n      doClick,\n      computedValueItems,\n      doClose\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-values-format .fs-tag {\n  margin: 2px;\n  cursor: pointer;\n  .fs-tag-icon {\n  }\n}\n</style>\n", "<template>\n  <span>\n    <template v-if=\"multiple\">\n      <div v-for=\"(Labels, Index) in multipleLabels\" :key=\"Index\">\n        <span v-for=\"(item, index) in Labels\" :key=\"index\">\n          <span v-if=\"index !== 0\"> / </span>\n          <span>{{ getLabel(item) }}</span>\n        </span>\n      </div>\n    </template>\n    <template v-else>\n      <span v-for=\"(item, index) in labels\" :key=\"index\">\n        <span v-if=\"index !== 0\"> / </span>\n        <span>{{ getLabel(item) }}</span>\n      </span>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { defineComponent } from \"vue\";\n/**\n * 级联数据格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsDictCascaderFormat\",\n  props: {\n    /**\n     *   值<br/>\n     *   单选时 '1,2,3' 或 [1,2,3]<br/>\n     *   多选[[1,2,3],[4,5,6]]<br/>\n     */\n    modelValue: {\n      type: [String, Array],\n      default: undefined,\n      require: true\n    },\n    /**\n     *  value的分隔符<br/>\n     *  多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     *  传入空字符串，表示不分割<br/>\n     */\n    separator: { type: String, default: \",\", require: false },\n    /**\n     * 是否多选\n     */\n    multiple: { type: Boolean, default: false },\n    /**\n     * 数据字典\n     */\n    dict: {\n      type: Object,\n      default: undefined,\n      require: false\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const dict = useDict(props, ctx);\n    if (props.dict?.getNodesByValues) {\n      dict.watchValue();\n    }\n\n    return {\n      ...dict\n    };\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    labels() {\n      if (this.modelValue == null) {\n        return [];\n      }\n      return this.buildValueItem(this.modelValue);\n    },\n    multipleLabels() {\n      if (this.modelValue == null) {\n        return [];\n      }\n      const arr = [];\n      for (const item of this.modelValue) {\n        arr.push(this.buildValueItem(item));\n      }\n      return arr;\n    }\n  },\n  methods: {\n    getValueArr(values: any) {\n      if (values == null) {\n        if (this.multiple) {\n          values = [];\n          for (const item of this.modelValue) {\n            for (const sub of item) {\n              values.push(sub);\n            }\n          }\n        } else {\n          values = this.modelValue;\n        }\n      }\n      if (values == null) {\n        return [];\n      }\n      let arr = null;\n      if (typeof values === \"string\" && !this.multiple && this.separator != null && this.separator !== \"\") {\n        arr = values.split(this.separator);\n      } else if (values instanceof Array) {\n        arr = values;\n      } else {\n        arr = [values];\n      }\n      return arr;\n    },\n    buildValueItem(values: any) {\n      const arr = this.getValueArr(values);\n\n      const dict = this.getDict();\n      if (dict) {\n        return dict.getNodesFromDataMap(arr);\n      }\n    }\n  }\n});\n</script>\n", "<template>\n  <span>\n    <template v-if=\"multiple\">\n      <div v-for=\"(Labels, Index) in multipleLabels\" :key=\"Index\">\n        <span v-for=\"(item, index) in Labels\" :key=\"index\">\n          <span v-if=\"index !== 0\"> / </span>\n          <span>{{ getLabel(item) }}</span>\n        </span>\n      </div>\n    </template>\n    <template v-else>\n      <span v-for=\"(item, index) in labels\" :key=\"index\">\n        <span v-if=\"index !== 0\"> / </span>\n        <span>{{ getLabel(item) }}</span>\n      </span>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { defineComponent } from \"vue\";\n/**\n * 级联数据格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsDictCascaderFormat\",\n  props: {\n    /**\n     *   值<br/>\n     *   单选时 '1,2,3' 或 [1,2,3]<br/>\n     *   多选[[1,2,3],[4,5,6]]<br/>\n     */\n    modelValue: {\n      type: [String, Array],\n      default: undefined,\n      require: true\n    },\n    /**\n     *  value的分隔符<br/>\n     *  多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     *  传入空字符串，表示不分割<br/>\n     */\n    separator: { type: String, default: \",\", require: false },\n    /**\n     * 是否多选\n     */\n    multiple: { type: Boolean, default: false },\n    /**\n     * 数据字典\n     */\n    dict: {\n      type: Object,\n      default: undefined,\n      require: false\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const dict = useDict(props, ctx);\n    if (props.dict?.getNodesByValues) {\n      dict.watchValue();\n    }\n\n    return {\n      ...dict\n    };\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    labels() {\n      if (this.modelValue == null) {\n        return [];\n      }\n      return this.buildValueItem(this.modelValue);\n    },\n    multipleLabels() {\n      if (this.modelValue == null) {\n        return [];\n      }\n      const arr = [];\n      for (const item of this.modelValue) {\n        arr.push(this.buildValueItem(item));\n      }\n      return arr;\n    }\n  },\n  methods: {\n    getValueArr(values: any) {\n      if (values == null) {\n        if (this.multiple) {\n          values = [];\n          for (const item of this.modelValue) {\n            for (const sub of item) {\n              values.push(sub);\n            }\n          }\n        } else {\n          values = this.modelValue;\n        }\n      }\n      if (values == null) {\n        return [];\n      }\n      let arr = null;\n      if (typeof values === \"string\" && !this.multiple && this.separator != null && this.separator !== \"\") {\n        arr = values.split(this.separator);\n      } else if (values instanceof Array) {\n        arr = values;\n      } else {\n        arr = [values];\n      }\n      return arr;\n    },\n    buildValueItem(values: any) {\n      const arr = this.getValueArr(values);\n\n      const dict = this.getDict();\n      if (dict) {\n        return dict.getNodesFromDataMap(arr);\n      }\n    }\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.cascader.name\" :options=\"computedOptions\" v-bind=\"fieldNamesBinder\" />\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nimport { defineComponent, ref } from \"vue\";\n/**\n * 字典级联组件\n * 支持el-cascader|a-cascader组件的参数\n */\nexport default defineComponent({\n  name: \"FsDictCascader\",\n  props: {\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const dictUseRet = useDict(props, ctx);\n    const { ui } = useUi();\n    const fieldNamesBinder = ref();\n    if (props.dict) {\n      fieldNamesBinder.value = ui.cascader.fieldNames({\n        value: props.dict.value,\n        label: props.dict.label,\n        children: props.dict.children\n      });\n    }\n    const computedOptions = dictUseRet.createComputedOptions();\n    return {\n      ui,\n      ...dictUseRet,\n      fieldNamesBinder,\n      computedOptions\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.checkboxGroup.name\">\n    <component\n      :is=\"optionName || ui.checkbox.name\"\n      v-for=\"item of computedOptions\"\n      :key=\"getValue(item)\"\n      :[ui.checkbox.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n      >{{ getLabel(item) }}</component\n    >\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典checkbox\n * 支持el-checkbox|a-checkbox参数\n */\nexport default defineComponent({\n  name: \"FsDictCheckbox\",\n  props: {\n    /**\n     * 字典\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array, default: undefined, require: false },\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    let usedDict = useDict(props, ctx, ui.checkboxGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      ...usedDict,\n      computedOptions\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.checkboxGroup.name\">\n    <component\n      :is=\"optionName || ui.checkbox.name\"\n      v-for=\"item of computedOptions\"\n      :key=\"getValue(item)\"\n      :[ui.checkbox.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n      >{{ getLabel(item) }}</component\n    >\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典checkbox\n * 支持el-checkbox|a-checkbox参数\n */\nexport default defineComponent({\n  name: \"FsDictCheckbox\",\n  props: {\n    /**\n     * 字典\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array, default: undefined, require: false },\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    let usedDict = useDict(props, ctx, ui.checkboxGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      ...usedDict,\n      computedOptions\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.switch.name\" v-bind=\"binding\" />\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { uiContext } from \"../../ui\";\nimport { defineComponent, PropType } from \"vue\";\nimport { DictOptions, useUi } from \"../../use\";\n\n/**\n * 字典开关\n * 支持el-switch|a-switch的属性\n */\nexport default defineComponent({\n  name: \"FsDictSwitch\",\n  props: {\n    /**\n     * 字典第一个为开启\n     * 第二个为关闭\n     */\n    dict: {\n      type: Object as PropType<DictOptions<any>>\n    },\n    options: {},\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    let usedDict = useDict(props, ctx, ui.switch.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      ...usedDict,\n      computedOptions\n    };\n  },\n  computed: {\n    _active() {\n      if (this.computedOptions.length > 0) {\n        return this.computedOptions[0];\n      }\n      return {};\n    },\n    _inActive() {\n      if (this.computedOptions.length > 1) {\n        return this.computedOptions[1];\n      }\n      return {};\n    },\n    binding() {\n      const ui = uiContext.get();\n      return {\n        [ui.switch.activeText]: this._active[this.dict?.label || \"label\"],\n        [ui.switch.inactiveText]: this._inActive[this.dict?.label || \"label\"],\n        [ui.switch.activeColor]: this._active[this.dict?.color || \"color\"],\n        [ui.switch.inactiveColor]: this._inActive[this.dict?.color || \"color\"],\n        [ui.switch.activeValue]: this._active[this.dict?.value || \"value\"],\n        [ui.switch.inactiveValue]: this._inActive[this.dict?.value || \"value\"]\n      };\n    }\n  }\n});\n</script>\n", "<template>\n  <span>{{ doFormat }}</span>\n</template>\n\n<script lang=\"ts\">\nimport dayjs from \"dayjs\";\nimport { defineComponent } from \"vue\";\n/**\n * 日期格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsDateFormat\",\n  props: {\n    /**\n     * 日期时间值，支持long,string,date等，由dayjs转化\n     */\n    modelValue: { required: false },\n    /**\n     *  输入格式化，不传则由dayjs自动转化\n     */\n    valueFormat: { type: String, default: undefined, required: false },\n    /**\n     *  输出格式化\n     */\n    format: { type: String, default: \"YYYY-MM-DD HH:mm:ss\", required: false }\n  },\n  data() {\n    return {\n      item: {}\n    };\n  },\n  computed: {\n    doFormat() {\n      if (this.modelValue == null || this.modelValue === \"\") {\n        return \"\";\n      }\n      let date = null;\n      if (this.valueFormat != null) {\n        date = dayjs(this.modelValue, this.valueFormat);\n      } else {\n        date = dayjs(this.modelValue);\n      }\n      return date.format(this.format);\n    }\n  } as any,\n  created() {},\n  methods: {}\n});\n</script>\n", "<template>\n  <component :is=\"ui.treeSelect.name\" :[ui.treeSelect.options]=\"computedOptions\" :placeholder=\"computedPlaceholder\" />\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典树选择组件\n * 支持 a-tree-select 参数\n */\nexport default defineComponent({\n  name: \"FsDictTree\",\n  props: {\n    /**\n     * 数据字典\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * placeholder\n     */\n    placeholder: { type: String },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\"dict-change\"],\n  // render () {\n  //   return this.renderFunc({ data: this.data, dataMap: this.dataMap, scope: this.scope, attrs: this.$attrs })\n  // },\n  setup(props, ctx) {\n    const { t } = useI18n();\n    const { ui } = useUi();\n    const computedPlaceholder = computed(() => {\n      return props.placeholder || t(\"fs.component.select.placeholder\");\n    });\n\n    let usedDict = useDict(props, ctx);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      computedPlaceholder,\n      ...usedDict,\n      computedOptions\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.treeSelect.name\" :[ui.treeSelect.options]=\"computedOptions\" :placeholder=\"computedPlaceholder\" />\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典树选择组件\n * 支持 a-tree-select 参数\n */\nexport default defineComponent({\n  name: \"FsDictTree\",\n  props: {\n    /**\n     * 数据字典\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * placeholder\n     */\n    placeholder: { type: String },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\"dict-change\"],\n  // render () {\n  //   return this.renderFunc({ data: this.data, dataMap: this.dataMap, scope: this.scope, attrs: this.$attrs })\n  // },\n  setup(props, ctx) {\n    const { t } = useI18n();\n    const { ui } = useUi();\n    const computedPlaceholder = computed(() => {\n      return props.placeholder || t(\"fs.component.select.placeholder\");\n    });\n\n    let usedDict = useDict(props, ctx);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      computedPlaceholder,\n      ...usedDict,\n      computedOptions\n    };\n  }\n});\n</script>\n", "<template>\n  <div class=\"fs-table-select\">\n    <template v-if=\"!slots?.default\">\n      <fs-dict-select\n        ref=\"dictSelectRef\"\n        :dict=\"dict\"\n        :disabled=\"disabled\"\n        :readonly=\"readonly\"\n        v-bind=\"computedSelect\"\n        :open=\"false\"\n        @click=\"openTableSelect\"\n      />\n    </template>\n    <slot v-bind=\"scopeRef\"></slot>\n    <component :is=\"ui.formItem.skipValidationWrapper\">\n      <component :is=\"ui.dialog.name\" v-model:[ui.dialog.visible]=\"dialogOpen\" v-bind=\"computedDialogBinding\">\n        <div :style=\"{ width: '100%', height: height || '60vh' }\">\n          <fs-crud ref=\"crudRef\" v-bind=\"crudBinding\">\n            <template #header-top>\n              <div class=\"fs-table-select-current\">\n                当前选中：\n                <fs-values-format\n                  ref=\"valuesFormatRef\"\n                  v-model=\"selectedRowKeys\"\n                  :dict=\"dict\"\n                  :closable=\"true\"\n                  v-bind=\"computedValuesFormat\"\n                ></fs-values-format>\n              </div>\n            </template>\n          </fs-crud>\n        </div>\n        <template #[ui.dialog.footerSlotName]>\n          <component :is=\"ui.button.name\" @click=\"dialogOpen = false\">取消</component>\n          <component :is=\"ui.button.name\" type=\"primary\" @click=\"onOk\">确认</component>\n        </template>\n      </component>\n    </component>\n  </div>\n</template>\n<script lang=\"tsx\" setup>\nimport { Dict, useFs, useMerge, useUi } from \"../../use\";\nimport { computed, nextTick, ref, Ref, watch } from \"vue\";\nimport { CreateCrudOptions, DynamicallyCrudOptions } from \"../../d\";\nimport _ from \"lodash-es\";\n// defineOptions({\n//   name: \"FsTableSelect\"\n// });\ntype FsTableSelectProps = {\n  /**\n   * modelValue\n   */\n  modelValue: any;\n  /**\n   * crudOptions创建方法\n   */\n  createCrudOptions: CreateCrudOptions;\n  /**\n   * crudOptions 覆盖配置\n   */\n  crudOptionsOverride?: DynamicallyCrudOptions;\n  /**\n   * 数据字典\n   * 必須配置`getNodesByValues`参数,你需要实现：根据id列表向后台请求多行数据并返回\n   * `dict.value必须与table.rowKey一致`\n   */\n  dict: Dict;\n  /**\n   * 选择框 fs-dict-select配置\n   */\n  select?: any;\n\n  /**\n   * 是否显示选择框\n   */\n  showSelect?: boolean;\n  /**\n   * 对话框配置\n   */\n  dialog?: any;\n\n  /**\n   * 当前选中值 fs-values-format组件 配置\n   */\n  valuesFormat?: any;\n\n  /**\n   * crud高度\n   */\n  height?: string;\n  /**\n   * 是否多选\n   */\n  multiple?: boolean; //单选还是多选\n  /**\n   * 跨页选中\n   */\n  crossPage?: boolean; //跨页选中\n\n  /**\n   * 可选,element-plus必传\n   */\n  rowKey?: string;\n\n  disabled?: boolean;\n\n  readonly?: boolean;\n\n  /**\n   * 值类型\n   */\n  valueType?: \"value\" | \"object\";\n};\nconst props = withDefaults(defineProps<FsTableSelectProps>(), {\n  crossPage: true,\n  rowKey: undefined,\n  disabled: false,\n  readonly: false,\n  height: undefined,\n  valuesFormat: undefined,\n  dialog: undefined,\n  select: undefined,\n  crudOptionsOverride: undefined,\n  valueType: \"value\",\n  showSelect: true\n});\n\nconst slots = defineSlots<{\n  /**`\n   * 默认插槽\n   * ```js\n   * scope = {\n   *  //是否已打开\n   *  opened:boolean,\n   *  //打开方法\n   *  open:()=>void\n   * }\n   * ```\n   */\n  default: any;\n}>();\n\nconst emits = defineEmits([\"change\", \"update:modelValue\"]);\nconst { ui } = useUi();\nconst dictSelectRef = ref();\nconst valuesFormatRef = ref();\nconst dialogOpen = ref(false);\n\nfunction initSelectedKeys(modelValue: any) {\n  if (modelValue == null || (Array.isArray(modelValue) && modelValue.length == 0)) {\n    selectedRowKeys.value = [];\n  } else {\n    if (props.multiple) {\n      selectedRowKeys.value = modelValue || [];\n    } else {\n      selectedRowKeys.value = [modelValue];\n    }\n    if (props.valueType === \"object\") {\n      selectedRowKeys.value = selectedRowKeys.value.map((item) => {\n        return props.dict.getValue(item);\n      });\n    }\n  }\n}\n\nconst openTableSelect = async () => {\n  if (props.disabled || props.readonly || props.select?.disabled || props.select?.readonly) {\n    return;\n  }\n  if (props.dict == null) {\n    throw new Error(\"必须配置dict，且必须配置dict.getNodesByValues\");\n  }\n  dialogOpen.value = true;\n  initSelectedKeys(props.modelValue);\n  await crudExpose.doRefresh();\n};\n\nconst computedValuesFormat = computed(() => {\n  return {\n    ...props.valuesFormat\n  };\n});\n\nconst computedSelect = computed(() => {\n  const updateKey = `onUpdate:${ui.select.modelValue}`;\n\n  let value = props.modelValue;\n  if (props.valueType === \"object\" && props.modelValue) {\n    if (props.multiple) {\n      value = props.modelValue.map((item: any) => {\n        return props.dict.getValue(item);\n      });\n    } else {\n      value = props.dict.getValue(props.modelValue);\n    }\n  }\n  return {\n    [ui.select.modelValue]: value,\n    [updateKey]: (value: any) => {\n      emits(\"update:modelValue\", value);\n    },\n    [ui.select.clearable]: true,\n    ...ui.select.buildMultiBinding(props.multiple),\n    show: false,\n    ...props.select\n  };\n});\n\nconst computedDialogBinding = computed(() => {\n  const base = ui.dialog.buildProps({\n    title: \"选择\",\n    width: \"80%\"\n  });\n  return merge(base, props.dialog);\n});\n\nwatch(\n  () => {\n    return props.modelValue;\n  },\n  async (value) => {\n    if (value === selectedRowKeys.value) {\n      return;\n    }\n    initSelectedKeys(value);\n    await nextTick();\n    await props.dict.appendByValues(selectedRowKeys.value);\n    // dictSelectRef.value.reloadDict();\n  }\n);\nconst selectedRowKeys: Ref<any[]> = ref([]);\n\nfunction getRowKey() {\n  return props.rowKey || crudBinding.value.table.rowKey || \"id\";\n}\nconst refreshing = ref(false);\n\nconst override: DynamicallyCrudOptions = computed(() => {\n  let selectionOptions = ui.table.buildSelectionCrudOptions({\n    crossPage: props.crossPage,\n    getRowKey,\n    getPageData() {\n      return crudBinding.value.data;\n    },\n    multiple: props.multiple,\n    selectedRowKeys,\n    onSelectedKeysChanged: async (changed) => {\n      selectedRowKeys.value = [...changed];\n      await nextTick();\n      await props.dict.appendByValues(selectedRowKeys.value);\n      // if (valuesFormatRef.value) {\n      //   valuesFormatRef.value.reloadDict();\n      // }\n    }\n  });\n  const crudOptions = {\n    table: {\n      async onRefreshed() {\n        if (ui.table.setSelectedRows) {\n          refreshing.value = true;\n          await nextTick();\n          await nextTick();\n          ui.table.setSelectedRows({\n            getRowKey,\n            multiple: props.multiple,\n            tableRef: crudExpose.getBaseTableRef(),\n            selectedRowKeys\n          });\n          refreshing.value = false;\n        }\n      }\n    }\n  };\n  return merge(crudOptions, selectionOptions, props.crudOptionsOverride);\n});\n\nconst { merge } = useMerge();\n// eslint-disable-next-line vue/no-setup-props-destructure\nconst { crudBinding, crudRef, crudExpose, context, appendCrudOptions, crudOptions } = useFs({\n  createCrudOptions: props.createCrudOptions,\n  crudOptionsOverride: override.value\n});\n\nwatch(\n  () => {\n    return props.crudOptionsOverride;\n  },\n  async (value, oldValue) => {\n    if (JSON.stringify(value) === JSON.stringify(oldValue)) {\n      return;\n    }\n    const cur = crudBinding.value?.pagination[ui.pagination.currentPage];\n    appendCrudOptions(value);\n    if (crudRef.value) {\n      crudBinding.value.pagination[ui.pagination.currentPage] = cur;\n      await crudExpose.doRefresh({ goFirstPage: false });\n    }\n  }\n);\n\nfunction onOk() {\n  if (props.dict.loading) {\n    return;\n  }\n  let value = null;\n  if (selectedRowKeys.value?.length > 0) {\n    value = [...selectedRowKeys.value];\n\n    if (props.valueType === \"object\") {\n      value = value.map((item) => {\n        return props.dict.getDictMap()[item];\n      });\n    }\n\n    if (props.multiple !== true) {\n      value = value[0];\n    }\n  }\n\n  emits(\"update:modelValue\", value);\n  emits(\"change\", value);\n  dialogOpen.value = false;\n}\n\nconst getScopeContext = () => {\n  return {\n    opened: dialogOpen,\n    open: openTableSelect\n  };\n};\n\nconst scopeRef = ref(getScopeContext());\ndefineExpose(scopeRef.value);\n</script>\n\n<style lang=\"less\">\n.fs-table-select {\n  width: 100%;\n  .el-dialog__body {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n}\n.fs-table-select-current {\n  //border: 1px solid #eee;\n  //border-radius: 3px;\n  padding: 10px 0;\n}\n</style>\n", null],
  "mappings": "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AkB,CAAC,SAAS,OAAO,UAAU,UAAU,KAAK;AAFlE,IAGMC,KAAS,CAAC,UAAU,YAAY,QAAQ,UAAU,OAAO;AAH/D,IAIMC,KAAW,CAAC,MAAM;AAJxB,IAKMC,KAAoB,CAACD,IAAUF,IAAiBC,EAAM,EAAE,QAAQ,CAACG,MAAYA,CAAO,EAAE,IAAI,CAACzO,MAAQ,KAAKA,CAAG,EAAE;AALnH,IAMMhqB,KAAS;EACb,QAAQu4B;EACR,eAAeF;EACf,MAAMC;AACR;AACA,SAASI,GAAW34B,GAAW;AAC7B,SAAOy4B,GAAkB,QAAQz4B,CAAS,MAAM;AAClD;AACA,IAAM44B,KAAO;EACX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF;AACA,SAASC,GAAUvlD,GAAM;AACvB,SAAOslD,GAAK,SAAStlD,CAAI;AAC3B;AACA,SAASwlD,GAAaxlD,GAAM;AAC1B,SAAO,CAAC,oBAAoB,iBAAiB,EAAE,SAASA,CAAI;AAC9D;AACA,SAASylD,GAAgB/lD,GAAO;AAC9B,SAAO,CAAC,MAAM,SAAS,QAAQ,OAAO,EAAE,SAASA,CAAK,KAAKA,EAAM,WAAW,OAAO,KAAKA,EAAM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",
  "names": ["defaultCrudOptions", "ctx", "opts", "ui", "uiContext", "trigger", "total", "getCallerInfo", "_a", "blank", "args", "logInfo", "logWarn", "logError", "error", "warn", "info", "debug", "callerInfo", "log", "caller", "logger", "setLogger", "level", "isEmpty", "value", "isAllEmpty", "values", "hasEmpty", "StringUtils", "trace", "name", "createAsyncComponent", "es", "defineAsyncComponent", "retry", "fail", "attempts", "installAsyncComponent", "app", "options", "asyncComponent", "installAsyncComponents", "modules", "excludes", "pickNameExp", "transform", "imports", "transformFromGlob", "_", "item", "key", "installSyncComponents", "components", "result", "loadAsyncComponentFromGlob", "map", "loadComponentFromGlob", "vite", "TableStore", "__publicField", "$router", "tableName", "keyType", "prefix", "saved", "table", "$route", "rxArrIndex", "rxVarName", "rxQuot", "joinPaths", "paths", "acc", "p", "getPathToString", "pathToString", "path", "prefixes", "type", "has", "isObject", "getIterate", "iterate", "obj", "callback", "broken", "breakIt", "describeValue", "parent", "cp", "i", "children", "contextReader", "ContextReader", "err", "scp", "getElements", "getOwnChildren", "childrenPath", "strChildrenPath", "strChildPathPrefix", "res", "val", "strChildPath", "pathFormatString", "childKey", "afterIterate", "curParent", "isObjectEmpty", "ownPropertiesOnly", "getEachDeep", "eachDeep", "forEachDeep", "deepdash", "dash", "ref", "skips", "keys", "pAttrs", "utils", "strings", "store", "antdvColspan", "labelSpan", "assist", "useUi", "button", "cascader", "zhCN", "en", "t", "arg", "index", "I18n", "instance", "locales", "message", "fsClone", "i18n", "useI18n", "e", "module", "this", "r", "n", "s", "a", "dayjs", "advancedFormat", "doFormat", "date", "format", "dateFormatter", "daterangeFormatter", "datetimerangeFormatter", "f", "o", "u", "d", "weekday", "localeData", "weekOfYear", "date$1", "buildDateValue", "scope", "row", "el", "number$1", "phone", "column", "ret", "select", "text", "tree", "typeList", "defaultTypeCreators", "defaultTypes", "getTypes", "getType", "addTypes", "newTypes", "types$1", "creator", "_sfc_main$x", "defineComponent", "pageRef", "onMounted", "_hoisted_1", "_hoisted_2", "_hoisted_4", "_sfc_render", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_createCommentVNode", "_createElementVNode", "_hoisted_3", "_renderSlot", "isUnMergeable", "srcValue", "UnMergeable", "isRef", "isUnCloneable", "merge", "target", "sources", "customizer", "objValue", "found", "cloneDeep", "UnMergeable$1", "cloneable", "useMerge", "isAsyncCompute", "AsyncComputeValue", "isSyncCompute", "ComputeValue", "findComputeValues", "isAsync", "foundMap", "checkFunc", "context", "exclude", "isShallow", "doAsyncCompute", "dependAsyncValues", "getContextFn", "asyncValueMap", "setAsyncComputeValue", "asyncValuesMap", "valueRef", "doComputed", "getTargetFunc", "userComputedFn", "dependValues", "computed", "asyncCount", "syncCount", "computeFn", "compute", "asyncFn", "defaultValue", "asyncRef", "computedValue", "watch", "asyncCompute", "useCompute", "Constants", "mergeColumnPlugins", "registerMergeColumnPlugin", "plugin", "remove", "push", "sort", "b", "order", "mergeColumnDict", "dict", "component", "form", "mergeColumnType", "typeChain", "Array", "base", "typeOptions", "types", "mergeColumnPlugin", "handle", "dictPlugin", "viewFormUseCellComponentPlugin", "columnProps", "crudOptions", "settings", "viewFormUseCellComponent", "viewFormColumn", "render", "_createVNode", "viewForm", "setupOptionsColumns", "columns", "userOptions", "initedColumns", "forEach", "buildOptionsColumnsFlatMap", "buildTableColumnsFlatMap", "buildTableColumn", "colTemplate", "tableColumn", "title", "buildTableColumns", "reactive", "tableColumns", "doColumnsSort", "doArraySort", "arr", "sortBy", "orderDefault", "list", "size", "columnsArr", "columnsMap", "buildFormColumns", "columnsFlatMap", "formType", "formColumns", "formColumn", "buildForm", "baseOptions", "onComplete", "buildSearchForm", "searchColumns", "formColumnsForSearch", "copyProps", "searchCopyFormProps", "copyFromCompositionColumn", "field", "includes", "common", "def", "pick", "search", "buildFormOptions", "defaultOptions", "commonOptions", "crudExpose", "buildColumns", "toolbar", "columnsFilter", "originalColumns", "addForm", "editForm", "disabled", "editable", "forEachTableColumns", "forEachColumns", "useColumns", "seed", "FsFormWrapperList", "createFormWrapper", "id", "container", "resolve", "reject", "vNode", "createVNode", "FsFormWrapper", "vm", "useFormWrapper", "pd", "inject", "openDialog", "doMerge", "useEditable", "props", "crudBinding", "_c", "_b", "onEnabled", "editableOpts", "editableId", "editableRow", "isAdd", "setData", "rowData", "data", "useExpose", "crudRef", "formWrapperProvider", "checkCrudRef", "checkCrudBindingRef", "formWrapperRef", "formRef", "records", "toRaw", "valueBuilderColumns", "col", "isArray", "pageQuery", "page", "searchFormData", "query", "userPageQuery", "userPageRes", "pageRes", "currentPage", "pageSize", "no", "tableRef", "rowKey", "removeBinding", "isLocal", "formOpts", "mode", "xxForm", "loadFsExportUtil", "loadFsImportUtil", "defaultDataFormatter", "originalRow", "nodes", "label", "node", "exportTable", "unref", "exportCol", "exportUtil", "originalData", "searchParams", "clone", "mapping", "expOpts", "importTable", "importData", "isEditable", "crudOptionsPlugins", "registerCrudOptionsPlugin", "getCrudOptionsPlugin", "selection", "getRowKey", "changed", "nextTick", "useCrud", "expose", "doRefresh", "doValueResolve", "usePagination", "current", "useFormSubmit", "useRowHandle", "useSearch", "baseTableRef", "useTabs", "formData", "useToolbar", "exporting", "original", "useTable", "sortChange", "isServerSort", "prop", "asc", "oldSort", "useActionbar", "afterUseCrud", "bindings", "rebuildCrudBindings", "plugins", "before", "pluginOptions", "resetCrudOptions", "appendCrudOptions", "overOptions", "newOptions", "appendCrudBinding", "useFsImpl", "createCrudOptions", "crudExposeRef", "createCrudOptionsRet", "initCrud", "useCrudProps", "useCrudRet", "useFs", "useFsAsync", "useDict", "vModel", "shallowReactive", "createComputedOptions", "option", "getValue", "getLabel", "getDict", "getScope", "getCurrentScope", "proxy", "getCurrentInstance", "loadDict", "reload", "reloadDict", "clearDict", "watchValue", "getDictData", "getPropValue", "attr", "removePropValue", "getChildren", "perf", "warned", "PROCESS", "emitWarning", "msg", "code", "fn", "AC", "AS", "warnACPolyfill", "reason", "printACPolyfillWarning", "shouldWarn", "isPosInt", "getUintArray", "max", "ZeroArray", "_Stack", "HeapCls", "__privateGet", "_constructing", "__privateSet", "__privateAdd", "Stack", "_LRUCache", "_initializeTTLTracking", "_initializeSizeTracking", "_indexes", "_rindexes", "_isValidIndex", "_evict", "_backgroundFetch", "_isBackgroundFetch", "_connect", "_moveToTail", "_max", "_maxSize", "_dispose", "_disposeAfter", "_fetchMethod", "_size", "_calculatedSize", "_keyMap", "_keyList", "_valList", "_next", "_prev", "_head", "_tail", "_free", "_disposed", "_sizes", "_starts", "_ttls", "_hasDispose", "_hasFetchMethod", "_hasDisposeAfter", "_updateItemAge", "_statusTTL", "_setItemTTL", "_isStale", "_removeItemSize", "_i", "_addItemSize", "_s", "_st", "_requireSize", "_k", "_v", "sizeCalculation", "ttl", "ttlResolution", "ttlAutopurge", "updateAgeOnGet", "updateAgeOnHas", "allowStale", "dispose", "disposeAfter", "noDisposeOnSet", "noUpdateTTL", "maxSize", "maxEntrySize", "fetchMethod", "noDeleteOnFetchRejection", "noDeleteOnStaleGet", "allowStaleOnFetchRejection", "allowStaleOnFetchAbort", "ignoreFetchAbort", "UintArray", "__privateMethod", "initializeSizeTracking_fn", "initializeTTLTracking_fn", "c", "isBackgroundFetch_fn", "k", "backgroundFetch_fn", "moveToTail_fn", "indexes_fn", "rindexes_fn", "getOptions", "v", "thisp", "deleted", "entry", "age", "setOptions", "start", "status", "evict_fn", "__privateWrapper", "oldVal", "oldValue", "dt", "task", "hasOptions", "peekOptions", "fetchOptions", "forceRefresh", "signal", "stale", "isStale", "staleVal", "fetching", "_d", "ttls", "starts", "cachedNow", "getNow", "sizes", "isValidIndex_fn", "free", "head", "ac", "fetchOpts", "cb", "updateCache", "aborted", "ignoreAbort", "fetchFail", "bf", "eb", "er", "allowStaleAborted", "noDelete", "pcall", "rej", "fmp", "connect_fn", "LRUCache", "DictGlobalCache", "setDictRequest", "request", "dictRequest", "Dict", "cacheKey", "cached", "call", "notify", "toFetchValues", "getFromRemote", "url", "dictData", "config", "useDictDefine", "useTypes", "dragModalForAntdv", "dialogEl", "dialogHeaderEl", "dragDom", "sty", "X", "Y", "styL", "styT", "l", "dragModalForNaive", "dragModal", "useDrag", "GlobalConfig", "_sfc_main$w", "computedInnerStyle", "computedBodyStyle", "_normalizeStyle", "_sfc_main$v", "_component_fs_container", "_resolveComponent", "_createBlock", "_withCtx", "_hoisted_5", "_sfc_main$u", "getCrudBinding", "searchShow", "cardComponentName", "_createSlots", "_resolveDynamicComponent", "_isSlot", "Object", "prototype", "toString", "_isVNode", "inheritAttrs", "String", "default", "required", "icon", "Function", "iconRight", "circle", "Boolean", "tooltip", "undefined", "buttonProps", "setup", "iconRender", "iconClass", "_mergeProps", "renderBtn", "isIconSlot", "isIconProp", "iconProp", "slots", "isCircle", "buttonComp", "resolveDynamicComponent", "btnProps", "class", "attrs", "h", "tooltipComp", "computeTooltipProps", "omit", "triggerSlotName", "require", "computedRenderFunc", "indexOf", "startsWith", "IconComp", "replace", "isComponent", "_sfc_main$t", "iconifyRef", "update", "span", "_sfc_main$s", "symbolId", "getStyle", "_normalizeClass", "_sfc_main$r", "_createTextVNode", "_toDisplayString", "loading", "icons", "refresh", "_sfc_main$q", "mergeEventHandles", "eventName", "events", "$event", "event", "htmlTags", "modelValue", "on", "undefineToNull", "emits", "provide", "emit", "targetRef", "allAttrs", "trim", "number", "tmp", "Number", "isNaN", "handler", "camelCase", "childrenRender", "createChildren", "computedInputComp", "isAsyncComponent", "input", "inputComp", "resolveComponent", "childrenRendered", "getTargetRef", "getTargetRefAsync", "getTargetRefSync", "Promise", "getTargetRefDelay", "count", "setTimeout", "Error", "_slot", "merged", "mergeProps", "markRaw", "functional", "renderFunc", "_sfc_main$p", "createInitialForm", "defValue", "initialForm", "setFormData", "getComponentRef", "computedColumns", "doValueBuilder", "getFormData", "valueChange", "doValueChange", "mergeCol", "buildItemScope", "formItemRefs", "getFormItemRef", "groupActiveKey", "groupItem", "computedGroup", "group", "groupedKeys", "wrapper", "computedDefaultColumns", "getFormRef", "reset", "entries", "initialValue", "validRef", "errorsRef", "fillGroupError", "fieldErrors", "submit", "validateScope", "validateErrors", "submitScope", "formItemShow", "groupItemShow", "newVal", "_Fragment", "_renderList", "_component_fs_form_item", "groupKey", "slotName", "_component_fs_render", "_sfc_main$o", "FsRender", "componentRenderRef", "scopeFunc", "updateModelValue", "computedHelperPosition", "computedHelperTooltip", "computedKey", "computedLabel", "computedLabelIsRender", "_component_fs_component_render", "_normalizeProps", "_component_fs_form_helper", "_component_fs_icon", "_hoisted_6", "_hoisted_7", "_component_fs_slot_render", "_sfc_main$n", "inner", "innerWrapper", "zIndex", "formWrapperOpen", "formWrapperIs", "formOptions", "formWrapperBind", "formWrapperOpts", "emitOnClosed", "emitOnOpened", "formWrapperId", "Math", "floor", "random", "formWrapperIdClass", "formWrapperSlots", "buildEvent", "wrapperBindRef", "formOptionsRef", "close", "toggleFullscreen", "open", "onOpen", "is", "customClassKey", "formWrapper", "customClass", "onClosed", "onOpened", "fullscreen", "draggable", "getModal", "document", "querySelector", "onValueChange", "computedButtons", "defBtns", "cancel", "onClick", "ok", "buttons", "buttonsArr", "click", "exposed", "fullscreenEnabled", "endsWith", "get", "innerBind", "buildInnerBind", "getInnerWrapper", "useSlots", "_slots", "slotsRender", "_self", "titleSlotName", "fullScreenIcon", "fullScreen", "unFullScreen", "show", "hasContentWrap", "contentWrap", "subChildren", "contentWrapComp", "visible", "vClosed", "buildOnClosedBind", "vCustomClass", "vFullScreen", "vStyle", "formWrapperComp", "__default__", "__MACROS_defineComponent", "formWrapperList", "useProviders", "searchRef", "getSearchRef", "getSearchFormData", "getSearchValidatedFormData", "setSearchFormData", "mergeForm", "searchRet", "defaultTabs", "_g", "_f", "_e", "slotFilter", "ctxSlots", "keyPrefix", "useFixedHeight", "containerRef", "maxHeightRef", "computeBodyHeight", "tableDom", "headDom", "tableHeight", "headHeight", "utilLog", "watchBodyHeightChange", "tableWrapperDom", "toolbarRef", "tablePropRef", "toRef", "computedTable", "fixedHeight", "computedToolbar", "computedCellSlots", "computedFormSlots", "computedSearchSlots", "computedToolbarSlots", "computedClass", "clazz", "innerWrapperRef", "isFormInner", "_sfc_main$l", "tabs", "_component_fs_actionbar", "_guardReactiveProps", "_component_fs_toolbar", "_component_fs_tabs_filter", "_component_fs_table", "_component_fs_form_wrapper", "_sfc_main$k", "doClick", "pickedProps", "computeProps", "computedHandleBtns", "mergedBtns", "btns", "computedDropdownAtLeast", "isDropdownBtn", "hasDropdownBtn", "doDropdownItemClick", "btn", "computedDropdownBinding", "binding", "_component_fs_button", "_extends", "source", "_inheritsLoose", "subClass", "superClass", "_setPrototypeOf", "_getPrototypeOf", "_isNativeReflectConstruct", "_construct", "Parent", "Class", "Constructor", "_isNativeFunction", "_wrapNativeSuper", "Wrapper", "formatRegExp", "warning", "errors", "convertFieldsError", "fields", "template", "_len", "_key", "len", "str", "x", "isNativeStringType", "isEmptyValue", "asyncParallelArray", "func", "results", "arrLength", "asyncSerialArray", "next", "flattenObjArr", "objArr", "AsyncValidationError", "_Error", "_this", "asyncMap", "_pending", "flattenArr", "firstFields", "objArrKeys", "objArrLength", "pending", "isErrorObj", "complementError", "rule", "oe", "fieldValue", "deepMerge", "required$1", "whitespace", "urlReg", "getUrlRegex", "word", "v4", "v6seg", "v6", "v46Exact", "v4exact", "v6exact", "ip", "protocol", "auth", "ipv4", "ipv6", "host", "domain", "tld", "port", "regex", "pattern$2", "type$1", "custom", "ruleType", "range", "min", "spRegexp", "num", "ENUM$1", "enumerable$1", "pattern$1", "_pattern", "rules", "string", "validate", "method", "_boolean", "regexp", "integer", "floatFn", "array", "object", "ENUM", "enumerable", "pattern", "dateObject", "any", "validators", "newMessages", "cloned", "messages", "Schema", "descriptor", "_proto", "_messages", "source_", "oc", "_this2", "complete", "add", "_errors", "messages$1", "series", "z", "errorFields", "doIt", "deep", "addFullField", "schema", "errorList", "filledErrors", "fieldsSchema", "paredFieldsSchema", "fieldSchema", "fieldSchemaList", "errs", "finalErrors", "messageIndex", "validator", "createValidator", "editableCells", "curDesc", "eachTree", "useTableData", "getData", "tableData", "editableRows", "getIdFromRow", "getEditableIdFromRow", "editableEachRows", "cells", "editableEachCells", "cell", "createEditableCell", "tableRow", "setValue", "updateCell", "enabled", "formItem", "setDefaultValue", "createEditableRow", "doSave", "newRow", "saveRow", "p3", "child", "nextEditableId", "editableIdGen", "setupEditable", "buildThinData", "thinData", "thinRow", "oldThinData", "getEditableCell", "active", "inactive", "saveEach", "cancelAll", "persist", "resume", "hasDirty", "dirty", "addIndex", "setDefaultForm", "formColumnConfigs", "addRow", "removeTableRowByEditableId", "removeRow", "activeCols", "cols", "getEditableRow", "hasError", "removeDataEditableId", "getCleanTableData", "useComponentRefProvider", "componentsRef", "getter", "setter", "buildTableSlots", "sortedColumns", "renderRowHandle", "renderCellComponent", "tableColumnComp", "tableColumnGroupComp", "tableColumnGroup", "tableSlots", "buildColumn", "cellSlots", "cellSlotName", "currentTableColumnComp", "subColumns", "subColumn", "newItem", "rowHandle", "rowHandleSlots", "dataIndex", "childOptions", "customRender", "renderMethod", "newCol", "rebuildRenderScope", "cellRender", "conditionalRender", "componentRefs", "length", "cellRef", "currentRef", "scrollTo", "top", "fsTableRef", "tableComp", "tableColumnCI", "editableWrap", "onRowHandle", "onChange", "onSortChange", "sorter", "onFilterChange", "filters", "onPagination", "bubbleUp", "rowHandleSlotsName", "newScope", "set", "setRef", "rowRefs", "editableCell", "readonly", "renderMode", "dataSource", "computedBinding", "computedTableSlots", "tableRender", "vLoading", "resolveDirective", "withDirectives", "computedComponent", "computedPropsComponent", "computedTitle", "showTitle", "computedCellContentRender", "slot", "cellContentRender", "match", "formatter", "console", "columnKey", "computedForm", "getFormRefFunc", "getForm", "computedIsEditable", "editingUpdate", "onSubmit", "save", "onCancel", "showAction", "isDirty", "isChanged", "edit", "inputComponent", "isEditing", "activeTrigger", "methods", "$refs", "targetInputRef", "doSubmit", "doCancel", "getValidateErrorMessage", "_sfc_main$i", "sortArr", "sortedButtons", "SetFormDataOptions", "ColumnsFilterProvideKey", "transformColumnsMap", "currentColumns", "_text", "buildColumnFilterItem", "transformToTableColumns", "transformColumns", "setCurrentValue", "clearThisStorage", "noSave", "saveOptionsToStorage", "doEmit", "simpleSubmit", "simpleReset", "storageTableStore", "getStorageTable", "route", "useRoute", "storedOptions", "getOptionsFromStorage", "getColumnsHash", "hash", "storeHash", "curValue", "storedOption", "__expose", "buildText", "element", "_sfc_main$g", "FsTableColumnsFilter", "columnsFilterRef", "defaultButtons", "defaultButtonsKey", "popoverVisible", "ownKeys", "enumerableOnly", "symbols", "sym", "_objectSpread2", "_defineProperty", "_typeof", "_objectWithoutPropertiesLoose", "excluded", "sourceKeys", "_objectWithoutProperties", "sourceSymbolKeys", "version", "userAgent", "IE11OrLess", "Edge", "FireFox", "Safari", "IOS", "ChromeForAndroid", "captureMode", "off", "matches", "selector", "getParentOrHost", "closest", "includeCTX", "R_SPACE", "toggleClass", "state", "className", "css", "style", "matrix", "selfOnly", "appliedTransforms", "matrixFn", "find", "tagName", "iterator", "getWindowScrollingElement", "scrollingElement", "getRect", "relativeToContainingBlock", "relativeToNonStaticParent", "undoScale", "elRect", "left", "bottom", "right", "height", "width", "containerRect", "elMatrix", "scaleX", "scaleY", "isScrolledPast", "elSide", "parentSide", "getParentAutoScrollElement", "elSideVal", "parentSideVal", "getChild", "childNum", "includeDragEl", "currentChild", "Sortable", "lastChild", "last", "getRelativeScrollOffset", "offsetLeft", "offsetTop", "winScroller", "indexOfObject", "includeSelf", "elem", "gotSelf", "elemCSS", "extend", "dst", "src", "isRectEqual", "rect1", "rect2", "_throttleTimeout", "throttle", "ms", "cancelThrottle", "scrollBy", "y", "Polymer", "$", "expando", "AnimationStateManager", "animationStates", "animationCallbackId", "fromRect", "childMatrix", "animating", "animationTime", "time", "toRect", "prevFromRect", "prevToRect", "animatingRect", "targetMatrix", "calculateRealTime", "currentRect", "duration", "translateX", "translateY", "repaint", "defaults", "PluginManager", "sortable", "evt", "eventNameGlobal", "pluginName", "initialized", "modified", "eventProperties", "modifiedValue", "dispatchEvent", "_ref", "rootEl", "targetEl", "cloneEl", "toEl", "fromEl", "oldIndex", "newIndex", "oldDraggableIndex", "newDraggableIndex", "originalEvent", "putSortable", "extraEventProperties", "onName", "allEventProperties", "_excluded", "pluginEvent", "dragEl", "parentEl", "ghostEl", "nextEl", "lastDownEl", "cloneHidden", "moved", "_hideGhostForTarget", "_unhideGhostForTarget", "_dispatchEvent", "activeGroup", "awaitingDragStarted", "ignoreNextClick", "sortables", "tapEvt", "touchEvt", "lastDx", "lastDy", "tapDistanceLeft", "tapDistanceTop", "lastTarget", "lastDirection", "pastFirstInvertThresh", "isCircumstantialInvert", "targetMoveDistance", "ghostRelativeParent", "ghostRelativeParentInitialScroll", "_silent", "savedInputChecked", "documentExists", "PositionGhostAbsolutely", "CSSFloatProperty", "supportDraggable", "supportCssPointerEvents", "_detectDirection", "elCSS", "elWidth", "child1", "child2", "firstChildCSS", "secondChildCSS", "firstChildWidth", "secondChildWidth", "touchingSideChild2", "_dragElInRowColumn", "dragRect", "targetRect", "vertical", "dragElS1Opp", "dragElS2Opp", "dragElOppLength", "targetS1Opp", "targetS2Opp", "targetOppLength", "_detectNearestEmptySortable", "threshold", "rect", "insideHorizontally", "insideVertically", "_prepareGroup", "toFn", "pull", "to", "from", "sameGroup", "otherGroup", "originalGroup", "nearestEmptyInsertDetectEvent", "nearest", "_checkOutsideTargetEl", "dataTransfer", "preventOnFilter", "touch", "originalTarget", "filter", "_saveInputCheckedState", "criteria", "ownerDocument", "dragStartFn", "_disableDraggable", "_nextTick", "fallback", "inserted", "fallbackTolerance", "fallbackOffset", "ghostMatrix", "relativeScrollOffset", "dx", "dy", "cssMatrix", "revert", "activeSortable", "isOwner", "canSort", "fromSortable", "completedFired", "dragOverEvent", "extra", "completed", "after", "_onMove", "capture", "insertion", "elLastChild", "_ghostIsLast", "_ghostIsFirst", "firstChild", "direction", "targetBeforeFirstSwap", "differentLevel", "differentRowCol", "side1", "scrolledPastTop", "scrollBefore", "_getSwapDirection", "sibling", "dragIndex", "nextSibling", "moveVector", "_unsilent", "_cancelNextTick", "_globalDragOver", "_generateId", "useAnimation", "items", "willInsertAfter", "onMoveFn", "retVal", "spacer", "swapThreshold", "invertedSwapThreshold", "invertSwap", "isLastTarget", "mouseOnAxis", "targetLength", "targetS1", "targetS2", "invert", "_getInsertDirection", "sum", "root", "inputs", "idx", "autoScrolls", "scrollEl", "scrollRootEl", "scrolling", "lastAutoScrollX", "lastAutoScrollY", "touchEvt$1", "pointerElemChangedInterval", "AutoScrollPlugin", "AutoScroll", "_ref2", "clearPointerElemChangedInterval", "clearAutoScrolls", "autoScroll", "ogElemScroller", "newElem", "isFallback", "sens", "speed", "scrollThisInstance", "scrollCustomFn", "layersOut", "currentParent", "canScrollX", "canScrollY", "scrollWidth", "scrollHeight", "scrollPosX", "scrollPosY", "vx", "vy", "scrollOffsetY", "scrollOffsetX", "drop", "dispatchSortableEvent", "hideGhostForTarget", "unhideGhostForTarget", "toSortable", "Revert", "_ref3", "Remove", "_ref4", "parentSortable", "__defProp", "__defProps", "__getOwnPropDescs", "__getOwnPropSymbols", "__hasOwnProp", "__propIsEnum", "__defNormalProp", "__spreadValues", "__spreadProps", "removeNode", "insertNodeAt", "fatherNode", "position", "refNode", "getConsole", "console$1", "cache", "camelize", "manageAndEmit$1", "emit$1", "manage$1", "eventHandlerNames", "events2", "isReadOnly", "tags", "isHtmlTag", "isTransition", "isHtmlAttribute", "project", "getComponentAttributes", "$attrs", "componentData", "attributes", "createSortableOption", "callBackBuilder", "getValidSortableEntries", "eventType", "eventBuilder", "value2", "getHtmlElementFromNode", "addContext", "domElement", "getContext", "ComponentStructure", "header", "defaultNodes", "footer", "realList", "h2", "tag", "_isRootComponent", "domIndex", "domChildren", "firstDomListElement", "indexFirstDomListElement", "element2", "getSlot", "slotValue", "computeNodes", "$slots", "getKey", "normalizedList", "getRootInformation", "transition", "externalComponent", "TransitionGroup", "computeComponentStructure", "evtName", "evtData", "manage", "originalElement", "manageAndEmit", "delegateCallBack", "draggingElement", "draggableComponent", "componentStructure", "$el", "sortableOptions", "targetDomElement", "itemKey", "newOptionValue", "_sortable", "htmElement", "onList", "newList", "spliceList", "updatePosition", "related", "destination", "added", "removed", "relatedContext", "currentDomIndex", "currentIndex", "move", "futureIndex", "draggedContext", "sendEvent", "_sfc_main$f", "drawerBind", "checkAll", "onCheckAllChange", "checkAllBind", "showLength", "allLength", "isIndeterminate", "allCheckedUpdate", "onDraggableMove", "draged", "sorted", "leftIndex", "rightIndex", "minNotIndex", "maxNotIndex", "fixedChange", "_sfc_main$d", "FsSearchButtons", "validatedForm", "searchAfterReset", "autoSearch", "debounce", "validateOnChange", "each", "_cellRender", "onFormValidated", "validateForm", "splitKey", "split", "_onUpdateModelValue", "onValueChanged", "_onInput", "onInput", "onKeyup", "autoSearchTrigger", "doSearch", "defaultSlot", "buildFieldContext", "componentRenderRefs", "splitedKey", "rulePath", "searchFormRef", "getComponentRenderRef", "doValidate", "silent", "validateWrap", "doReset", "unset", "defBtnOptions", "_click", "initAutoSearch", "wait", "getValidatedForm", "setForm", "newForm", "inputEventDisabled", "doAutoSearch", "changeInputEventDisabled", "validateOnChangeSilent", "componentRef", "computedRules", "_sfc_main$b", "computedIsMultiLine", "columnsRowRef", "columnsBoxHeightRef", "columnsList", "columnsLineHeightRef", "searchEventContextRef", "toggleCollapse", "computedColName", "computedColumnBoxHeight", "_component_fs_search_buttons", "_sfc_main$a", "useAttrs", "defaultOption", "__DEFAULT__", "onUpdateActiveKey", "_sfc_main$8", "computedRadioName", "usedDict", "computedOptions", "placeholder", "renderLabel", "transformDictData", "computedPlaceholder", "selectComp", "optionComp", "getHashCode", "chr", "buildArrayValue", "valueArr", "_sfc_main$7", "COLOR_LIST", "EFFECT_LIST", "getColor", "setColor", "typeKey", "color", "hashcode", "colors", "effects", "computedValueItems", "valueProp", "labelProp", "colorfulOptions", "doClose", "newValues", "_sfc_main$6", "sub", "Labels", "Index", "_sfc_main$5", "dictUseRet", "fieldNamesBinder", "_sfc_main$4", "_sfc_main$3", "_sfc_main$2", "_sfc_main$1", "_useSlots", "dictSelectRef", "valuesFormatRef", "dialogOpen", "initSelectedKeys", "selectedRowKeys", "multiple", "valueType", "openTableSelect", "computedValuesFormat", "valuesFormat", "computedSelect", "updateKey", "clearable", "buildMultiBinding", "computedDialogBinding", "dialog", "buildProps", "appendByValues", "refreshing", "override", "selectionOptions", "buildSelectionCrudOptions", "crossPage", "getPageData", "onSelectedKeysChanged", "onRefreshed", "setSelectedRows", "getBaseTableRef", "crudOptionsOverride", "JSON", "stringify", "cur", "pagination", "goFirstPage", "onOk", "getDictMap", "scopeRef", "getScopeContext", "opened", "FastCrud", "com", "printWarningLogger"]
}
